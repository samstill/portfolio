const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeScreen-CTtCBy1B.js","assets/index-DjBvL98p.js","assets/iconBase-VHV16drN.js","assets/messageService-BFQPd58Q.js","assets/proxy-DMLGpHM7.js","assets/index-C2QpgPxn.js","assets/NotFoundScreen-gY8KEDL9.js","assets/LoginScreen-CCL5Qvr5.js","assets/index-Cl0ZZ_yY.js","assets/BackButton-Cfbj4dkC.js","assets/AuthStyles-BlLZRVpG.js","assets/SignUpScreen-CPXgClaA.js","assets/ResetPasswordScreen-C7o1BRBN.js","assets/EventsScreen-DYDaZpic.js","assets/Skeleton-DUCGPrHy.js","assets/index-DFRYBWvR.js","assets/ProfileScreen-Cmy_ZaX8.js","assets/AdminScreen-BvhmsOJh.js","assets/TicketValidation-CeHhJcAj.js","assets/CreateEventScreen-Bmz_rAg0.js","assets/clsx-B-dksMZM.js","assets/index-COrAMwZg.js","assets/CreateEventScreen-BqTOw2_m.css","assets/MessengerScreen-qvGGT0Tn.js","assets/UserSearch-yu9ofzsz.js","assets/ChatScreen-B7b9B7I0.js","assets/MessagesScreen-DxhAgt-2.js","assets/EventDetailScreen-DwUg3bYq.js","assets/extends-CEetKkoc.js","assets/defineProperty-BA7Z6euB.js","assets/typeof-QjJsDpFa.js","assets/EditEventScreen-BC0wz5ib.js","assets/FirebaseEventRepository-DBVeqBwi.js","assets/BookingScreen-CRedXL5c.js","assets/TicketScreen-DG187Pmo.js","assets/TicketScreen-DmmCiOnJ.css","assets/MyTicketsScreen-BTBcwl1U.js","assets/ValidateTicketScreen-DjQZzyA4.js","assets/UnauthorizedScreen-DQ4yPtSS.js","assets/PaymentErrorScreen-DYx0HaLU.js","assets/UserDetailScreen-DoU-eVb1.js","assets/UserTicketsScreen-C5Qi_9Kb.js","assets/LoadingCard-BAkm2dwO.js","assets/UserTransactionsScreen-Cnescb3F.js","assets/TicketValidationScreen-ZlXLw40R.js","assets/UserSearchScreen-VIU4yzuI.js","assets/TermsConditionsScreen-DK6HeYq4.js","assets/Container-DZC4ZQJM.js","assets/PrivacyPolicyScreen-AnDyS0Io.js","assets/RefundPolicyScreen-Cv4DkMgq.js","assets/AboutUsScreen-CMoIleh7.js"])))=>i.map(i=>d[i]);
var YC=Object.defineProperty;var JC=(n,e,t)=>e in n?YC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ii=(n,e,t)=>JC(n,typeof e!="symbol"?e+"":e,t);function uS(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function Ra(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function M2(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Qm={exports:{}},Gu={},Ym={exports:{}},Ze={},LE;function XC(){if(LE)return Ze;LE=1;/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function E(B){return B===null||typeof B!="object"?null:(B=v&&B[v]||B["@@iterator"],typeof B=="function"?B:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,x={};function V(B,te,we){this.props=B,this.context=te,this.refs=x,this.updater=we||I}V.prototype.isReactComponent={},V.prototype.setState=function(B,te){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,te,"setState")},V.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function G(){}G.prototype=V.prototype;function $(B,te,we){this.props=B,this.context=te,this.refs=x,this.updater=we||I}var j=$.prototype=new G;j.constructor=$,D(j,V.prototype),j.isPureReactComponent=!0;var H=Array.isArray,re=Object.prototype.hasOwnProperty,b={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function S(B,te,we){var Oe,Ve={},Be=null,je=null;if(te!=null)for(Oe in te.ref!==void 0&&(je=te.ref),te.key!==void 0&&(Be=""+te.key),te)re.call(te,Oe)&&!P.hasOwnProperty(Oe)&&(Ve[Oe]=te[Oe]);var $e=arguments.length-2;if($e===1)Ve.children=we;else if(1<$e){for(var Ge=Array($e),St=0;St<$e;St++)Ge[St]=arguments[St+2];Ve.children=Ge}if(B&&B.defaultProps)for(Oe in $e=B.defaultProps,$e)Ve[Oe]===void 0&&(Ve[Oe]=$e[Oe]);return{$$typeof:n,type:B,key:Be,ref:je,props:Ve,_owner:b.current}}function R(B,te){return{$$typeof:n,type:B.type,key:te,ref:B.ref,props:B.props,_owner:B._owner}}function k(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function N(B){var te={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(we){return te[we]})}var L=/\/+/g;function C(B,te){return typeof B=="object"&&B!==null&&B.key!=null?N(""+B.key):te.toString(36)}function pe(B,te,we,Oe,Ve){var Be=typeof B;(Be==="undefined"||Be==="boolean")&&(B=null);var je=!1;if(B===null)je=!0;else switch(Be){case"string":case"number":je=!0;break;case"object":switch(B.$$typeof){case n:case e:je=!0}}if(je)return je=B,Ve=Ve(je),B=Oe===""?"."+C(je,0):Oe,H(Ve)?(we="",B!=null&&(we=B.replace(L,"$&/")+"/"),pe(Ve,te,we,"",function(St){return St})):Ve!=null&&(k(Ve)&&(Ve=R(Ve,we+(!Ve.key||je&&je.key===Ve.key?"":(""+Ve.key).replace(L,"$&/")+"/")+B)),te.push(Ve)),1;if(je=0,Oe=Oe===""?".":Oe+":",H(B))for(var $e=0;$e<B.length;$e++){Be=B[$e];var Ge=Oe+C(Be,$e);je+=pe(Be,te,we,Ge,Ve)}else if(Ge=E(B),typeof Ge=="function")for(B=Ge.call(B),$e=0;!(Be=B.next()).done;)Be=Be.value,Ge=Oe+C(Be,$e++),je+=pe(Be,te,we,Ge,Ve);else if(Be==="object")throw te=String(B),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return je}function st(B,te,we){if(B==null)return B;var Oe=[],Ve=0;return pe(B,Oe,"","",function(Be){return te.call(we,Be,Ve++)}),Oe}function yt(B){if(B._status===-1){var te=B._result;te=te(),te.then(function(we){(B._status===0||B._status===-1)&&(B._status=1,B._result=we)},function(we){(B._status===0||B._status===-1)&&(B._status=2,B._result=we)}),B._status===-1&&(B._status=0,B._result=te)}if(B._status===1)return B._result.default;throw B._result}var Le={current:null},ce={transition:null},_e={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:ce,ReactCurrentOwner:b};function de(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:st,forEach:function(B,te,we){st(B,function(){te.apply(this,arguments)},we)},count:function(B){var te=0;return st(B,function(){te++}),te},toArray:function(B){return st(B,function(te){return te})||[]},only:function(B){if(!k(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Ze.Component=V,Ze.Fragment=t,Ze.Profiler=i,Ze.PureComponent=$,Ze.StrictMode=r,Ze.Suspense=h,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,Ze.act=de,Ze.cloneElement=function(B,te,we){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Oe=D({},B.props),Ve=B.key,Be=B.ref,je=B._owner;if(te!=null){if(te.ref!==void 0&&(Be=te.ref,je=b.current),te.key!==void 0&&(Ve=""+te.key),B.type&&B.type.defaultProps)var $e=B.type.defaultProps;for(Ge in te)re.call(te,Ge)&&!P.hasOwnProperty(Ge)&&(Oe[Ge]=te[Ge]===void 0&&$e!==void 0?$e[Ge]:te[Ge])}var Ge=arguments.length-2;if(Ge===1)Oe.children=we;else if(1<Ge){$e=Array(Ge);for(var St=0;St<Ge;St++)$e[St]=arguments[St+2];Oe.children=$e}return{$$typeof:n,type:B.type,key:Ve,ref:Be,props:Oe,_owner:je}},Ze.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:o,_context:B},B.Consumer=B},Ze.createElement=S,Ze.createFactory=function(B){var te=S.bind(null,B);return te.type=B,te},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(B){return{$$typeof:c,render:B}},Ze.isValidElement=k,Ze.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:yt}},Ze.memo=function(B,te){return{$$typeof:p,type:B,compare:te===void 0?null:te}},Ze.startTransition=function(B){var te=ce.transition;ce.transition={};try{B()}finally{ce.transition=te}},Ze.unstable_act=de,Ze.useCallback=function(B,te){return Le.current.useCallback(B,te)},Ze.useContext=function(B){return Le.current.useContext(B)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(B){return Le.current.useDeferredValue(B)},Ze.useEffect=function(B,te){return Le.current.useEffect(B,te)},Ze.useId=function(){return Le.current.useId()},Ze.useImperativeHandle=function(B,te,we){return Le.current.useImperativeHandle(B,te,we)},Ze.useInsertionEffect=function(B,te){return Le.current.useInsertionEffect(B,te)},Ze.useLayoutEffect=function(B,te){return Le.current.useLayoutEffect(B,te)},Ze.useMemo=function(B,te){return Le.current.useMemo(B,te)},Ze.useReducer=function(B,te,we){return Le.current.useReducer(B,te,we)},Ze.useRef=function(B){return Le.current.useRef(B)},Ze.useState=function(B){return Le.current.useState(B)},Ze.useSyncExternalStore=function(B,te,we){return Le.current.useSyncExternalStore(B,te,we)},Ze.useTransition=function(){return Le.current.useTransition()},Ze.version="18.3.1",Ze}var ME;function Xy(){return ME||(ME=1,Ym.exports=XC()),Ym.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function ZC(){if(FE)return Gu;FE=1;var n=Xy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,p){var g,v={},E=null,I=null;p!==void 0&&(E=""+p),h.key!==void 0&&(E=""+h.key),h.ref!==void 0&&(I=h.ref);for(g in h)r.call(h,g)&&!o.hasOwnProperty(g)&&(v[g]=h[g]);if(c&&c.defaultProps)for(g in h=c.defaultProps,h)v[g]===void 0&&(v[g]=h[g]);return{$$typeof:e,type:c,key:E,ref:I,props:v,_owner:i.current}}return Gu.Fragment=t,Gu.jsx=l,Gu.jsxs=l,Gu}var UE;function ek(){return UE||(UE=1,Qm.exports=ZC()),Qm.exports}var le=ek(),X=Xy();const ze=Ra(X),tk=uS({__proto__:null,default:ze},[X]);var Id={},Jm={exports:{}},ir={},Xm={exports:{}},Zm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE;function nk(){return BE||(BE=1,function(n){function e(ce,_e){var de=ce.length;ce.push(_e);e:for(;0<de;){var B=de-1>>>1,te=ce[B];if(0<i(te,_e))ce[B]=_e,ce[de]=te,de=B;else break e}}function t(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var _e=ce[0],de=ce.pop();if(de!==_e){ce[0]=de;e:for(var B=0,te=ce.length,we=te>>>1;B<we;){var Oe=2*(B+1)-1,Ve=ce[Oe],Be=Oe+1,je=ce[Be];if(0>i(Ve,de))Be<te&&0>i(je,Ve)?(ce[B]=je,ce[Be]=de,B=Be):(ce[B]=Ve,ce[Oe]=de,B=Oe);else if(Be<te&&0>i(je,de))ce[B]=je,ce[Be]=de,B=Be;else break e}}return _e}function i(ce,_e){var de=ce.sortIndex-_e.sortIndex;return de!==0?de:ce.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],p=[],g=1,v=null,E=3,I=!1,D=!1,x=!1,V=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(ce){for(var _e=t(p);_e!==null;){if(_e.callback===null)r(p);else if(_e.startTime<=ce)r(p),_e.sortIndex=_e.expirationTime,e(h,_e);else break;_e=t(p)}}function H(ce){if(x=!1,j(ce),!D)if(t(h)!==null)D=!0,yt(re);else{var _e=t(p);_e!==null&&Le(H,_e.startTime-ce)}}function re(ce,_e){D=!1,x&&(x=!1,G(S),S=-1),I=!0;var de=E;try{for(j(_e),v=t(h);v!==null&&(!(v.expirationTime>_e)||ce&&!N());){var B=v.callback;if(typeof B=="function"){v.callback=null,E=v.priorityLevel;var te=B(v.expirationTime<=_e);_e=n.unstable_now(),typeof te=="function"?v.callback=te:v===t(h)&&r(h),j(_e)}else r(h);v=t(h)}if(v!==null)var we=!0;else{var Oe=t(p);Oe!==null&&Le(H,Oe.startTime-_e),we=!1}return we}finally{v=null,E=de,I=!1}}var b=!1,P=null,S=-1,R=5,k=-1;function N(){return!(n.unstable_now()-k<R)}function L(){if(P!==null){var ce=n.unstable_now();k=ce;var _e=!0;try{_e=P(!0,ce)}finally{_e?C():(b=!1,P=null)}}else b=!1}var C;if(typeof $=="function")C=function(){$(L)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,st=pe.port2;pe.port1.onmessage=L,C=function(){st.postMessage(null)}}else C=function(){V(L,0)};function yt(ce){P=ce,b||(b=!0,C())}function Le(ce,_e){S=V(function(){ce(n.unstable_now())},_e)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ce){ce.callback=null},n.unstable_continueExecution=function(){D||I||(D=!0,yt(re))},n.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ce?Math.floor(1e3/ce):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(ce){switch(E){case 1:case 2:case 3:var _e=3;break;default:_e=E}var de=E;E=_e;try{return ce()}finally{E=de}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ce,_e){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var de=E;E=ce;try{return _e()}finally{E=de}},n.unstable_scheduleCallback=function(ce,_e,de){var B=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?B+de:B):de=B,ce){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=de+te,ce={id:g++,callback:_e,priorityLevel:ce,startTime:de,expirationTime:te,sortIndex:-1},de>B?(ce.sortIndex=de,e(p,ce),t(h)===null&&ce===t(p)&&(x?(G(S),S=-1):x=!0,Le(H,de-B))):(ce.sortIndex=te,e(h,ce),D||I||(D=!0,yt(re))),ce},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(ce){var _e=E;return function(){var de=E;E=_e;try{return ce.apply(this,arguments)}finally{E=de}}}}(Zm)),Zm}var jE;function rk(){return jE||(jE=1,Xm.exports=nk()),Xm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function ik(){if(zE)return ir;zE=1;var n=Xy(),e=rk();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function E(s){return h.call(v,s)?!0:h.call(g,s)?!1:p.test(s)?v[s]=!0:(g[s]=!0,!1)}function I(s,a,u,f){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function D(s,a,u,f){if(a===null||typeof a>"u"||I(s,a,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function x(s,a,u,f,m,_,T){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=_,this.removeEmptyString=T}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){V[s]=new x(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];V[a]=new x(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){V[s]=new x(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){V[s]=new x(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){V[s]=new x(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){V[s]=new x(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){V[s]=new x(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){V[s]=new x(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){V[s]=new x(s,5,!1,s.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function $(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(G,$);V[a]=new x(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(G,$);V[a]=new x(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(G,$);V[a]=new x(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){V[s]=new x(s,1,!1,s.toLowerCase(),null,!1,!1)}),V.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){V[s]=new x(s,1,!1,s.toLowerCase(),null,!0,!0)});function j(s,a,u,f){var m=V.hasOwnProperty(a)?V[a]:null;(m!==null?m.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(D(a,u,m,f)&&(u=null),f||m===null?E(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):m.mustUseProperty?s[m.propertyName]=u===null?m.type===3?!1:"":u:(a=m.attributeName,f=m.attributeNamespace,u===null?s.removeAttribute(a):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,f?s.setAttributeNS(f,a,u):s.setAttribute(a,u))))}var H=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),b=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),N=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),st=Symbol.for("react.memo"),yt=Symbol.for("react.lazy"),Le=Symbol.for("react.offscreen"),ce=Symbol.iterator;function _e(s){return s===null||typeof s!="object"?null:(s=ce&&s[ce]||s["@@iterator"],typeof s=="function"?s:null)}var de=Object.assign,B;function te(s){if(B===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);B=a&&a[1]||""}return`
`+B+s}var we=!1;function Oe(s,a){if(!s||we)return"";we=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(J){var f=J}Reflect.construct(s,[],a)}else{try{a.call()}catch(J){f=J}s.call(a.prototype)}else{try{throw Error()}catch(J){f=J}s()}}catch(J){if(J&&f&&typeof J.stack=="string"){for(var m=J.stack.split(`
`),_=f.stack.split(`
`),T=m.length-1,O=_.length-1;1<=T&&0<=O&&m[T]!==_[O];)O--;for(;1<=T&&0<=O;T--,O--)if(m[T]!==_[O]){if(T!==1||O!==1)do if(T--,O--,0>O||m[T]!==_[O]){var F=`
`+m[T].replace(" at new "," at ");return s.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",s.displayName)),F}while(1<=T&&0<=O);break}}}finally{we=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?te(s):""}function Ve(s){switch(s.tag){case 5:return te(s.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return s=Oe(s.type,!1),s;case 11:return s=Oe(s.type.render,!1),s;case 1:return s=Oe(s.type,!0),s;default:return""}}function Be(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case P:return"Fragment";case b:return"Portal";case R:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case pe:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case N:return(s.displayName||"Context")+".Consumer";case k:return(s._context.displayName||"Context")+".Provider";case L:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case st:return a=s.displayName||null,a!==null?a:Be(s.type)||"Memo";case yt:a=s._payload,s=s._init;try{return Be(s(a))}catch{}}return null}function je(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Be(a);case 8:return a===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function $e(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ge(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function St(s){var a=Ge(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),f=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,_=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(T){f=""+T,_.call(this,T)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function pt(s){s._valueTracker||(s._valueTracker=St(s))}function Qt(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return s&&(f=Ge(s)?s.checked?"true":"false":s.value),s=f,s!==u?(a.setValue(s),!0):!1}function $r(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Fi(s,a){var u=a.checked;return de({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Kn(s,a){var u=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;u=$e(a.value!=null?a.value:u),s._wrapperState={initialChecked:f,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Po(s,a){a=a.checked,a!=null&&j(s,"checked",a,!1)}function Co(s,a){Po(s,a);var u=$e(a.value),f=a.type;if(u!=null)f==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?ys(s,a.type,u):a.hasOwnProperty("defaultValue")&&ys(s,a.type,$e(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function ko(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function ys(s,a,u){(a!=="number"||$r(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var qr=Array.isArray;function Hr(s,a,u,f){if(s=s.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<s.length;u++)m=a.hasOwnProperty("$"+s[u].value),s[u].selected!==m&&(s[u].selected=m),m&&f&&(s[u].defaultSelected=!0)}else{for(u=""+$e(u),a=null,m=0;m<s.length;m++){if(s[m].value===u){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function bo(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return de({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Gn(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(qr(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:$e(u)}}function Pr(s,a){var u=$e(a.value),f=$e(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),f!=null&&(s.defaultValue=""+f)}function _s(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function $t(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?$t(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ln,vs=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,f,m){MSApp.execUnsafeLocalFunction(function(){return s(a,u,f,m)})}:s}(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(ln=ln||document.createElement("div"),ln.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ln.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function cr(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xn=["Webkit","ms","Moz","O"];Object.keys(Ui).forEach(function(s){xn.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Ui[a]=Ui[s]})});function ws(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Ui.hasOwnProperty(s)&&Ui[s]?(""+a).trim():a+"px"}function Es(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var f=u.indexOf("--")===0,m=ws(u,a[u],f);u==="float"&&(u="cssFloat"),f?s.setProperty(u,m):s[u]=m}}var Ts=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Do(s,a){if(a){if(Ts[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Is(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cr=null;function Bi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var hi=null,Nn=null,kr=null;function ji(s){if(s=xu(s)){if(typeof hi!="function")throw Error(t(280));var a=s.stateNode;a&&(a=Fh(a),hi(s.stateNode,s.type,a))}}function br(s){Nn?kr?kr.push(s):kr=[s]:Nn=s}function Ss(){if(Nn){var s=Nn,a=kr;if(kr=Nn=null,ji(s),a)for(s=0;s<a.length;s++)ji(a[s])}}function Dr(s,a){return s(a)}function di(){}var Kr=!1;function xo(s,a,u){if(Kr)return s(a,u);Kr=!0;try{return Dr(s,a,u)}finally{Kr=!1,(Nn!==null||kr!==null)&&(di(),Ss())}}function M(s,a){var u=s.stateNode;if(u===null)return null;var f=Fh(u);if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var z=!1;if(c)try{var Y={};Object.defineProperty(Y,"passive",{get:function(){z=!0}}),window.addEventListener("test",Y,Y),window.removeEventListener("test",Y,Y)}catch{z=!1}function ne(s,a,u,f,m,_,T,O,F){var J=Array.prototype.slice.call(arguments,3);try{a.apply(u,J)}catch(oe){this.onError(oe)}}var ge=!1,Pe=null,Ne=!1,Ee=null,Ie={onError:function(s){ge=!0,Pe=s}};function ye(s,a,u,f,m,_,T,O,F){ge=!1,Pe=null,ne.apply(Ie,arguments)}function be(s,a,u,f,m,_,T,O,F){if(ye.apply(this,arguments),ge){if(ge){var J=Pe;ge=!1,Pe=null}else throw Error(t(198));Ne||(Ne=!0,Ee=J)}}function qe(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,a.flags&4098&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function We(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function _t(s){if(qe(s)!==s)throw Error(t(188))}function ft(s){var a=s.alternate;if(!a){if(a=qe(s),a===null)throw Error(t(188));return a!==s?null:s}for(var u=s,f=a;;){var m=u.return;if(m===null)break;var _=m.alternate;if(_===null){if(f=m.return,f!==null){u=f;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===u)return _t(m),s;if(_===f)return _t(m),a;_=_.sibling}throw Error(t(188))}if(u.return!==f.return)u=m,f=_;else{for(var T=!1,O=m.child;O;){if(O===u){T=!0,u=m,f=_;break}if(O===f){T=!0,f=m,u=_;break}O=O.sibling}if(!T){for(O=_.child;O;){if(O===u){T=!0,u=_,f=m;break}if(O===f){T=!0,f=_,u=m;break}O=O.sibling}if(!T)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:a}function et(s){return s=ft(s),s!==null?vt(s):null}function vt(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=vt(s);if(a!==null)return a;s=s.sibling}return null}var hr=e.unstable_scheduleCallback,Gr=e.unstable_cancelCallback,Wn=e.unstable_shouldYield,Qn=e.unstable_requestPaint,mt=e.unstable_now,fi=e.unstable_getCurrentPriorityLevel,Bn=e.unstable_ImmediatePriority,dr=e.unstable_UserBlockingPriority,Sn=e.unstable_NormalPriority,Xe=e.unstable_LowPriority,Ct=e.unstable_IdlePriority,Yn=null,un=null;function xt(s){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Yn,s,void 0,(s.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:gh,Rs=Math.log,Oa=Math.LN2;function gh(s){return s>>>=0,s===0?32:31-(Rs(s)/Oa|0)|0}var Va=64,La=4194304;function As(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function No(s,a){var u=s.pendingLanes;if(u===0)return 0;var f=0,m=s.suspendedLanes,_=s.pingedLanes,T=u&268435455;if(T!==0){var O=T&~m;O!==0?f=As(O):(_&=T,_!==0&&(f=As(_)))}else T=u&~m,T!==0?f=As(T):_!==0&&(f=As(_));if(f===0)return 0;if(a!==0&&a!==f&&!(a&m)&&(m=f&-f,_=a&-a,m>=_||m===16&&(_&4194240)!==0))return a;if(f&4&&(f|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=f;0<a;)u=31-Yt(a),m=1<<u,f|=s[u],a&=~m;return f}function Rp(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zi(s,a){for(var u=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,_=s.pendingLanes;0<_;){var T=31-Yt(_),O=1<<T,F=m[T];F===-1?(!(O&u)||O&f)&&(m[T]=Rp(O,a)):F<=a&&(s.expiredLanes|=O),_&=~O}}function fr(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Oo(){var s=Va;return Va<<=1,!(Va&4194240)&&(Va=64),s}function Ps(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Cs(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-Yt(a),s[a]=u}function kt(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<u;){var m=31-Yt(u),_=1<<m;a[m]=0,f[m]=-1,s[m]=-1,u&=~_}}function ks(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var f=31-Yt(u),m=1<<f;m&a|s[f]&a&&(s[f]|=a),u&=~m}}var rt=0;function bs(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var yh,Ma,_h,vh,wh,yu=!1,pi=[],Rn=null,Wr=null,Qr=null,Ds=new Map,xr=new Map,mi=[],Ap="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Eh(s,a){switch(s){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":Ds.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":xr.delete(a.pointerId)}}function Jn(s,a,u,f,m,_){return s===null||s.nativeEvent!==_?(s={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[m]},a!==null&&(a=xu(a),a!==null&&Ma(a)),s):(s.eventSystemFlags|=f,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function Pp(s,a,u,f,m){switch(a){case"focusin":return Rn=Jn(Rn,s,a,u,f,m),!0;case"dragenter":return Wr=Jn(Wr,s,a,u,f,m),!0;case"mouseover":return Qr=Jn(Qr,s,a,u,f,m),!0;case"pointerover":var _=m.pointerId;return Ds.set(_,Jn(Ds.get(_)||null,s,a,u,f,m)),!0;case"gotpointercapture":return _=m.pointerId,xr.set(_,Jn(xr.get(_)||null,s,a,u,f,m)),!0}return!1}function Th(s){var a=Uo(s.target);if(a!==null){var u=qe(a);if(u!==null){if(a=u.tag,a===13){if(a=We(u),a!==null){s.blockedOn=a,wh(s.priority,function(){_h(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function $i(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=Fa(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var f=new u.constructor(u.type,u);Cr=f,u.target.dispatchEvent(f),Cr=null}else return a=xu(u),a!==null&&Ma(a),s.blockedOn=u,!1;a.shift()}return!0}function Vo(s,a,u){$i(s)&&u.delete(a)}function Ih(){yu=!1,Rn!==null&&$i(Rn)&&(Rn=null),Wr!==null&&$i(Wr)&&(Wr=null),Qr!==null&&$i(Qr)&&(Qr=null),Ds.forEach(Vo),xr.forEach(Vo)}function Yr(s,a){s.blockedOn===a&&(s.blockedOn=null,yu||(yu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ih)))}function Jr(s){function a(m){return Yr(m,s)}if(0<pi.length){Yr(pi[0],s);for(var u=1;u<pi.length;u++){var f=pi[u];f.blockedOn===s&&(f.blockedOn=null)}}for(Rn!==null&&Yr(Rn,s),Wr!==null&&Yr(Wr,s),Qr!==null&&Yr(Qr,s),Ds.forEach(a),xr.forEach(a),u=0;u<mi.length;u++)f=mi[u],f.blockedOn===s&&(f.blockedOn=null);for(;0<mi.length&&(u=mi[0],u.blockedOn===null);)Th(u),u.blockedOn===null&&mi.shift()}var qi=H.ReactCurrentBatchConfig,xs=!0;function Ft(s,a,u,f){var m=rt,_=qi.transition;qi.transition=null;try{rt=1,_u(s,a,u,f)}finally{rt=m,qi.transition=_}}function Cp(s,a,u,f){var m=rt,_=qi.transition;qi.transition=null;try{rt=4,_u(s,a,u,f)}finally{rt=m,qi.transition=_}}function _u(s,a,u,f){if(xs){var m=Fa(s,a,u,f);if(m===null)Up(s,a,f,Lo,u),Eh(s,f);else if(Pp(m,s,a,u,f))f.stopPropagation();else if(Eh(s,f),a&4&&-1<Ap.indexOf(s)){for(;m!==null;){var _=xu(m);if(_!==null&&yh(_),_=Fa(s,a,u,f),_===null&&Up(s,a,f,Lo,u),_===m)break;m=_}m!==null&&f.stopPropagation()}else Up(s,a,f,null,u)}}var Lo=null;function Fa(s,a,u,f){if(Lo=null,s=Bi(f),s=Uo(s),s!==null)if(a=qe(s),a===null)s=null;else if(u=a.tag,u===13){if(s=We(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Lo=s,null}function vu(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fi()){case Bn:return 1;case dr:return 4;case Sn:case Xe:return 16;case Ct:return 536870912;default:return 16}default:return 16}}var pr=null,Ua=null,Xn=null;function wu(){if(Xn)return Xn;var s,a=Ua,u=a.length,f,m="value"in pr?pr.value:pr.textContent,_=m.length;for(s=0;s<u&&a[s]===m[s];s++);var T=u-s;for(f=1;f<=T&&a[u-f]===m[_-f];f++);return Xn=m.slice(s,1<f?1-f:void 0)}function Ba(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function gi(){return!0}function Eu(){return!1}function An(s){function a(u,f,m,_,T){this._reactName=u,this._targetInst=m,this.type=f,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var O in s)s.hasOwnProperty(O)&&(u=s[O],this[O]=u?u(_):_[O]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?gi:Eu,this.isPropagationStopped=Eu,this}return de(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=gi)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=gi)},persist:function(){},isPersistent:gi}),a}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=An(Xr),yi=de({},Xr,{view:0,detail:0}),kp=An(yi),za,Hi,Ns,Mo=de({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_i,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ns&&(Ns&&s.type==="mousemove"?(za=s.screenX-Ns.screenX,Hi=s.screenY-Ns.screenY):Hi=za=0,Ns=s),za)},movementY:function(s){return"movementY"in s?s.movementY:Hi}}),$a=An(Mo),Tu=de({},Mo,{dataTransfer:0}),Sh=An(Tu),qa=de({},yi,{relatedTarget:0}),Ha=An(qa),Rh=de({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ki=An(Rh),Ah=de({},Xr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ph=An(Ah),Ch=de({},Xr,{data:0}),Iu=An(Ch),Ka={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bh(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=kh[s])?!!a[s]:!1}function _i(){return bh}var d=de({},yi,{key:function(s){if(s.key){var a=Ka[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Ba(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?jn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_i,charCode:function(s){return s.type==="keypress"?Ba(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ba(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),y=An(d),w=de({},Mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A=An(w),q=de({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_i}),Z=An(q),fe=de({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),wt=An(fe),cn=de({},Mo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ot=An(cn),mn=[9,13,27,32],nn=c&&"CompositionEvent"in window,Nr=null;c&&"documentMode"in document&&(Nr=document.documentMode);var mr=c&&"TextEvent"in window&&!Nr,Fo=c&&(!nn||Nr&&8<Nr&&11>=Nr),Ga=" ",bv=!1;function Dv(s,a){switch(s){case"keyup":return mn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Wa=!1;function WP(s,a){switch(s){case"compositionend":return xv(a);case"keypress":return a.which!==32?null:(bv=!0,Ga);case"textInput":return s=a.data,s===Ga&&bv?null:s;default:return null}}function QP(s,a){if(Wa)return s==="compositionend"||!nn&&Dv(s,a)?(s=wu(),Xn=Ua=pr=null,Wa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Fo&&a.locale!=="ko"?null:a.data;default:return null}}var YP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nv(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!YP[s.type]:a==="textarea"}function Ov(s,a,u,f){br(f),a=Vh(a,"onChange"),0<a.length&&(u=new ja("onChange","change",null,u,f),s.push({event:u,listeners:a}))}var Su=null,Ru=null;function JP(s){Xv(s,0)}function Dh(s){var a=Za(s);if(Qt(a))return s}function XP(s,a){if(s==="change")return a}var Vv=!1;if(c){var bp;if(c){var Dp="oninput"in document;if(!Dp){var Lv=document.createElement("div");Lv.setAttribute("oninput","return;"),Dp=typeof Lv.oninput=="function"}bp=Dp}else bp=!1;Vv=bp&&(!document.documentMode||9<document.documentMode)}function Mv(){Su&&(Su.detachEvent("onpropertychange",Fv),Ru=Su=null)}function Fv(s){if(s.propertyName==="value"&&Dh(Ru)){var a=[];Ov(a,Ru,s,Bi(s)),xo(JP,a)}}function ZP(s,a,u){s==="focusin"?(Mv(),Su=a,Ru=u,Su.attachEvent("onpropertychange",Fv)):s==="focusout"&&Mv()}function eC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Dh(Ru)}function tC(s,a){if(s==="click")return Dh(a)}function nC(s,a){if(s==="input"||s==="change")return Dh(a)}function rC(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Zr=typeof Object.is=="function"?Object.is:rC;function Au(s,a){if(Zr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var m=u[f];if(!h.call(a,m)||!Zr(s[m],a[m]))return!1}return!0}function Uv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Bv(s,a){var u=Uv(s);s=0;for(var f;u;){if(u.nodeType===3){if(f=s+u.textContent.length,s<=a&&f>=a)return{node:u,offset:a-s};s=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Uv(u)}}function jv(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?jv(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function zv(){for(var s=window,a=$r();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=$r(s.document)}return a}function xp(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function iC(s){var a=zv(),u=s.focusedElem,f=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&jv(u.ownerDocument.documentElement,u)){if(f!==null&&xp(u)){if(a=f.start,s=f.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var m=u.textContent.length,_=Math.min(f.start,m);f=f.end===void 0?_:Math.min(f.end,m),!s.extend&&_>f&&(m=f,f=_,_=m),m=Bv(u,_);var T=Bv(u,f);m&&T&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),s.removeAllRanges(),_>f?(s.addRange(a),s.extend(T.node,T.offset)):(a.setEnd(T.node,T.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var sC=c&&"documentMode"in document&&11>=document.documentMode,Qa=null,Np=null,Pu=null,Op=!1;function $v(s,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Op||Qa==null||Qa!==$r(f)||(f=Qa,"selectionStart"in f&&xp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Pu&&Au(Pu,f)||(Pu=f,f=Vh(Np,"onSelect"),0<f.length&&(a=new ja("onSelect","select",null,a,u),s.push({event:a,listeners:f}),a.target=Qa)))}function xh(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var Ya={animationend:xh("Animation","AnimationEnd"),animationiteration:xh("Animation","AnimationIteration"),animationstart:xh("Animation","AnimationStart"),transitionend:xh("Transition","TransitionEnd")},Vp={},qv={};c&&(qv=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Nh(s){if(Vp[s])return Vp[s];if(!Ya[s])return s;var a=Ya[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in qv)return Vp[s]=a[u];return s}var Hv=Nh("animationend"),Kv=Nh("animationiteration"),Gv=Nh("animationstart"),Wv=Nh("transitionend"),Qv=new Map,Yv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(s,a){Qv.set(s,a),o(a,[s])}for(var Lp=0;Lp<Yv.length;Lp++){var Mp=Yv[Lp],oC=Mp.toLowerCase(),aC=Mp[0].toUpperCase()+Mp.slice(1);Os(oC,"on"+aC)}Os(Hv,"onAnimationEnd"),Os(Kv,"onAnimationIteration"),Os(Gv,"onAnimationStart"),Os("dblclick","onDoubleClick"),Os("focusin","onFocus"),Os("focusout","onBlur"),Os(Wv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cu));function Jv(s,a,u){var f=s.type||"unknown-event";s.currentTarget=u,be(f,a,void 0,s),s.currentTarget=null}function Xv(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var f=s[u],m=f.event;f=f.listeners;e:{var _=void 0;if(a)for(var T=f.length-1;0<=T;T--){var O=f[T],F=O.instance,J=O.currentTarget;if(O=O.listener,F!==_&&m.isPropagationStopped())break e;Jv(m,O,J),_=F}else for(T=0;T<f.length;T++){if(O=f[T],F=O.instance,J=O.currentTarget,O=O.listener,F!==_&&m.isPropagationStopped())break e;Jv(m,O,J),_=F}}}if(Ne)throw s=Ee,Ne=!1,Ee=null,s}function Nt(s,a){var u=a[Hp];u===void 0&&(u=a[Hp]=new Set);var f=s+"__bubble";u.has(f)||(Zv(a,s,2,!1),u.add(f))}function Fp(s,a,u){var f=0;a&&(f|=4),Zv(u,s,f,a)}var Oh="_reactListening"+Math.random().toString(36).slice(2);function ku(s){if(!s[Oh]){s[Oh]=!0,r.forEach(function(u){u!=="selectionchange"&&(lC.has(u)||Fp(u,!1,s),Fp(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Oh]||(a[Oh]=!0,Fp("selectionchange",!1,a))}}function Zv(s,a,u,f){switch(vu(a)){case 1:var m=Ft;break;case 4:m=Cp;break;default:m=_u}u=m.bind(null,a,u,s),m=void 0,!z||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(a,u,{capture:!0,passive:m}):s.addEventListener(a,u,!0):m!==void 0?s.addEventListener(a,u,{passive:m}):s.addEventListener(a,u,!1)}function Up(s,a,u,f,m){var _=f;if(!(a&1)&&!(a&2)&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var O=f.stateNode.containerInfo;if(O===m||O.nodeType===8&&O.parentNode===m)break;if(T===4)for(T=f.return;T!==null;){var F=T.tag;if((F===3||F===4)&&(F=T.stateNode.containerInfo,F===m||F.nodeType===8&&F.parentNode===m))return;T=T.return}for(;O!==null;){if(T=Uo(O),T===null)return;if(F=T.tag,F===5||F===6){f=_=T;continue e}O=O.parentNode}}f=f.return}xo(function(){var J=_,oe=Bi(u),ae=[];e:{var ie=Qv.get(s);if(ie!==void 0){var ve=ja,Ae=s;switch(s){case"keypress":if(Ba(u)===0)break e;case"keydown":case"keyup":ve=y;break;case"focusin":Ae="focus",ve=Ha;break;case"focusout":Ae="blur",ve=Ha;break;case"beforeblur":case"afterblur":ve=Ha;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=$a;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=Sh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=Z;break;case Hv:case Kv:case Gv:ve=Ki;break;case Wv:ve=wt;break;case"scroll":ve=kp;break;case"wheel":ve=ot;break;case"copy":case"cut":case"paste":ve=Ph;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=A}var Ce=(a&4)!==0,Xt=!Ce&&s==="scroll",K=Ce?ie!==null?ie+"Capture":null:ie;Ce=[];for(var U=J,Q;U!==null;){Q=U;var he=Q.stateNode;if(Q.tag===5&&he!==null&&(Q=he,K!==null&&(he=M(U,K),he!=null&&Ce.push(bu(U,he,Q)))),Xt)break;U=U.return}0<Ce.length&&(ie=new ve(ie,Ae,null,u,oe),ae.push({event:ie,listeners:Ce}))}}if(!(a&7)){e:{if(ie=s==="mouseover"||s==="pointerover",ve=s==="mouseout"||s==="pointerout",ie&&u!==Cr&&(Ae=u.relatedTarget||u.fromElement)&&(Uo(Ae)||Ae[Gi]))break e;if((ve||ie)&&(ie=oe.window===oe?oe:(ie=oe.ownerDocument)?ie.defaultView||ie.parentWindow:window,ve?(Ae=u.relatedTarget||u.toElement,ve=J,Ae=Ae?Uo(Ae):null,Ae!==null&&(Xt=qe(Ae),Ae!==Xt||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(ve=null,Ae=J),ve!==Ae)){if(Ce=$a,he="onMouseLeave",K="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(Ce=A,he="onPointerLeave",K="onPointerEnter",U="pointer"),Xt=ve==null?ie:Za(ve),Q=Ae==null?ie:Za(Ae),ie=new Ce(he,U+"leave",ve,u,oe),ie.target=Xt,ie.relatedTarget=Q,he=null,Uo(oe)===J&&(Ce=new Ce(K,U+"enter",Ae,u,oe),Ce.target=Q,Ce.relatedTarget=Xt,he=Ce),Xt=he,ve&&Ae)t:{for(Ce=ve,K=Ae,U=0,Q=Ce;Q;Q=Ja(Q))U++;for(Q=0,he=K;he;he=Ja(he))Q++;for(;0<U-Q;)Ce=Ja(Ce),U--;for(;0<Q-U;)K=Ja(K),Q--;for(;U--;){if(Ce===K||K!==null&&Ce===K.alternate)break t;Ce=Ja(Ce),K=Ja(K)}Ce=null}else Ce=null;ve!==null&&ew(ae,ie,ve,Ce,!1),Ae!==null&&Xt!==null&&ew(ae,Xt,Ae,Ce,!0)}}e:{if(ie=J?Za(J):window,ve=ie.nodeName&&ie.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ie.type==="file")var De=XP;else if(Nv(ie))if(Vv)De=nC;else{De=eC;var Me=ZP}else(ve=ie.nodeName)&&ve.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(De=tC);if(De&&(De=De(s,J))){Ov(ae,De,u,oe);break e}Me&&Me(s,ie,J),s==="focusout"&&(Me=ie._wrapperState)&&Me.controlled&&ie.type==="number"&&ys(ie,"number",ie.value)}switch(Me=J?Za(J):window,s){case"focusin":(Nv(Me)||Me.contentEditable==="true")&&(Qa=Me,Np=J,Pu=null);break;case"focusout":Pu=Np=Qa=null;break;case"mousedown":Op=!0;break;case"contextmenu":case"mouseup":case"dragend":Op=!1,$v(ae,u,oe);break;case"selectionchange":if(sC)break;case"keydown":case"keyup":$v(ae,u,oe)}var Fe;if(nn)e:{switch(s){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Wa?Dv(s,u)&&(He="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(He="onCompositionStart");He&&(Fo&&u.locale!=="ko"&&(Wa||He!=="onCompositionStart"?He==="onCompositionEnd"&&Wa&&(Fe=wu()):(pr=oe,Ua="value"in pr?pr.value:pr.textContent,Wa=!0)),Me=Vh(J,He),0<Me.length&&(He=new Iu(He,s,null,u,oe),ae.push({event:He,listeners:Me}),Fe?He.data=Fe:(Fe=xv(u),Fe!==null&&(He.data=Fe)))),(Fe=mr?WP(s,u):QP(s,u))&&(J=Vh(J,"onBeforeInput"),0<J.length&&(oe=new Iu("onBeforeInput","beforeinput",null,u,oe),ae.push({event:oe,listeners:J}),oe.data=Fe))}Xv(ae,a)})}function bu(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Vh(s,a){for(var u=a+"Capture",f=[];s!==null;){var m=s,_=m.stateNode;m.tag===5&&_!==null&&(m=_,_=M(s,u),_!=null&&f.unshift(bu(s,_,m)),_=M(s,a),_!=null&&f.push(bu(s,_,m))),s=s.return}return f}function Ja(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function ew(s,a,u,f,m){for(var _=a._reactName,T=[];u!==null&&u!==f;){var O=u,F=O.alternate,J=O.stateNode;if(F!==null&&F===f)break;O.tag===5&&J!==null&&(O=J,m?(F=M(u,_),F!=null&&T.unshift(bu(u,F,O))):m||(F=M(u,_),F!=null&&T.push(bu(u,F,O)))),u=u.return}T.length!==0&&s.push({event:a,listeners:T})}var uC=/\r\n?/g,cC=/\u0000|\uFFFD/g;function tw(s){return(typeof s=="string"?s:""+s).replace(uC,`
`).replace(cC,"")}function Lh(s,a,u){if(a=tw(a),tw(s)!==a&&u)throw Error(t(425))}function Mh(){}var Bp=null,jp=null;function zp(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var $p=typeof setTimeout=="function"?setTimeout:void 0,hC=typeof clearTimeout=="function"?clearTimeout:void 0,nw=typeof Promise=="function"?Promise:void 0,dC=typeof queueMicrotask=="function"?queueMicrotask:typeof nw<"u"?function(s){return nw.resolve(null).then(s).catch(fC)}:$p;function fC(s){setTimeout(function(){throw s})}function qp(s,a){var u=a,f=0;do{var m=u.nextSibling;if(s.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(f===0){s.removeChild(m),Jr(a);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=m}while(u);Jr(a)}function Vs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function rw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var Xa=Math.random().toString(36).slice(2),vi="__reactFiber$"+Xa,Du="__reactProps$"+Xa,Gi="__reactContainer$"+Xa,Hp="__reactEvents$"+Xa,pC="__reactListeners$"+Xa,mC="__reactHandles$"+Xa;function Uo(s){var a=s[vi];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Gi]||u[vi]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=rw(s);s!==null;){if(u=s[vi])return u;s=rw(s)}return a}s=u,u=s.parentNode}return null}function xu(s){return s=s[vi]||s[Gi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Za(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Fh(s){return s[Du]||null}var Kp=[],el=-1;function Ls(s){return{current:s}}function Ot(s){0>el||(s.current=Kp[el],Kp[el]=null,el--)}function bt(s,a){el++,Kp[el]=s.current,s.current=a}var Ms={},On=Ls(Ms),Zn=Ls(!1),Bo=Ms;function tl(s,a){var u=s.type.contextTypes;if(!u)return Ms;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var m={},_;for(_ in u)m[_]=a[_];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=m),m}function er(s){return s=s.childContextTypes,s!=null}function Uh(){Ot(Zn),Ot(On)}function iw(s,a,u){if(On.current!==Ms)throw Error(t(168));bt(On,a),bt(Zn,u)}function sw(s,a,u){var f=s.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var m in f)if(!(m in a))throw Error(t(108,je(s)||"Unknown",m));return de({},u,f)}function Bh(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ms,Bo=On.current,bt(On,s),bt(Zn,Zn.current),!0}function ow(s,a,u){var f=s.stateNode;if(!f)throw Error(t(169));u?(s=sw(s,a,Bo),f.__reactInternalMemoizedMergedChildContext=s,Ot(Zn),Ot(On),bt(On,s)):Ot(Zn),bt(Zn,u)}var Wi=null,jh=!1,Gp=!1;function aw(s){Wi===null?Wi=[s]:Wi.push(s)}function gC(s){jh=!0,aw(s)}function Fs(){if(!Gp&&Wi!==null){Gp=!0;var s=0,a=rt;try{var u=Wi;for(rt=1;s<u.length;s++){var f=u[s];do f=f(!0);while(f!==null)}Wi=null,jh=!1}catch(m){throw Wi!==null&&(Wi=Wi.slice(s+1)),hr(Bn,Fs),m}finally{rt=a,Gp=!1}}return null}var nl=[],rl=0,zh=null,$h=0,Or=[],Vr=0,jo=null,Qi=1,Yi="";function zo(s,a){nl[rl++]=$h,nl[rl++]=zh,zh=s,$h=a}function lw(s,a,u){Or[Vr++]=Qi,Or[Vr++]=Yi,Or[Vr++]=jo,jo=s;var f=Qi;s=Yi;var m=32-Yt(f)-1;f&=~(1<<m),u+=1;var _=32-Yt(a)+m;if(30<_){var T=m-m%5;_=(f&(1<<T)-1).toString(32),f>>=T,m-=T,Qi=1<<32-Yt(a)+m|u<<m|f,Yi=_+s}else Qi=1<<_|u<<m|f,Yi=s}function Wp(s){s.return!==null&&(zo(s,1),lw(s,1,0))}function Qp(s){for(;s===zh;)zh=nl[--rl],nl[rl]=null,$h=nl[--rl],nl[rl]=null;for(;s===jo;)jo=Or[--Vr],Or[Vr]=null,Yi=Or[--Vr],Or[Vr]=null,Qi=Or[--Vr],Or[Vr]=null}var gr=null,yr=null,Ut=!1,ei=null;function uw(s,a){var u=Ur(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function cw(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,gr=s,yr=Vs(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,gr=s,yr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=jo!==null?{id:Qi,overflow:Yi}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=Ur(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,gr=s,yr=null,!0):!1;default:return!1}}function Yp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Jp(s){if(Ut){var a=yr;if(a){var u=a;if(!cw(s,a)){if(Yp(s))throw Error(t(418));a=Vs(u.nextSibling);var f=gr;a&&cw(s,a)?uw(f,u):(s.flags=s.flags&-4097|2,Ut=!1,gr=s)}}else{if(Yp(s))throw Error(t(418));s.flags=s.flags&-4097|2,Ut=!1,gr=s}}}function hw(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;gr=s}function qh(s){if(s!==gr)return!1;if(!Ut)return hw(s),Ut=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!zp(s.type,s.memoizedProps)),a&&(a=yr)){if(Yp(s))throw dw(),Error(t(418));for(;a;)uw(s,a),a=Vs(a.nextSibling)}if(hw(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){yr=Vs(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}yr=null}}else yr=gr?Vs(s.stateNode.nextSibling):null;return!0}function dw(){for(var s=yr;s;)s=Vs(s.nextSibling)}function il(){yr=gr=null,Ut=!1}function Xp(s){ei===null?ei=[s]:ei.push(s)}var yC=H.ReactCurrentBatchConfig;function Nu(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,s));var m=f,_=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(T){var O=m.refs;T===null?delete O[_]:O[_]=T},a._stringRef=_,a)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function Hh(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function fw(s){var a=s._init;return a(s._payload)}function pw(s){function a(K,U){if(s){var Q=K.deletions;Q===null?(K.deletions=[U],K.flags|=16):Q.push(U)}}function u(K,U){if(!s)return null;for(;U!==null;)a(K,U),U=U.sibling;return null}function f(K,U){for(K=new Map;U!==null;)U.key!==null?K.set(U.key,U):K.set(U.index,U),U=U.sibling;return K}function m(K,U){return K=Ks(K,U),K.index=0,K.sibling=null,K}function _(K,U,Q){return K.index=Q,s?(Q=K.alternate,Q!==null?(Q=Q.index,Q<U?(K.flags|=2,U):Q):(K.flags|=2,U)):(K.flags|=1048576,U)}function T(K){return s&&K.alternate===null&&(K.flags|=2),K}function O(K,U,Q,he){return U===null||U.tag!==6?(U=$m(Q,K.mode,he),U.return=K,U):(U=m(U,Q),U.return=K,U)}function F(K,U,Q,he){var De=Q.type;return De===P?oe(K,U,Q.props.children,he,Q.key):U!==null&&(U.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===yt&&fw(De)===U.type)?(he=m(U,Q.props),he.ref=Nu(K,U,Q),he.return=K,he):(he=md(Q.type,Q.key,Q.props,null,K.mode,he),he.ref=Nu(K,U,Q),he.return=K,he)}function J(K,U,Q,he){return U===null||U.tag!==4||U.stateNode.containerInfo!==Q.containerInfo||U.stateNode.implementation!==Q.implementation?(U=qm(Q,K.mode,he),U.return=K,U):(U=m(U,Q.children||[]),U.return=K,U)}function oe(K,U,Q,he,De){return U===null||U.tag!==7?(U=Yo(Q,K.mode,he,De),U.return=K,U):(U=m(U,Q),U.return=K,U)}function ae(K,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number")return U=$m(""+U,K.mode,Q),U.return=K,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case re:return Q=md(U.type,U.key,U.props,null,K.mode,Q),Q.ref=Nu(K,null,U),Q.return=K,Q;case b:return U=qm(U,K.mode,Q),U.return=K,U;case yt:var he=U._init;return ae(K,he(U._payload),Q)}if(qr(U)||_e(U))return U=Yo(U,K.mode,Q,null),U.return=K,U;Hh(K,U)}return null}function ie(K,U,Q,he){var De=U!==null?U.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return De!==null?null:O(K,U,""+Q,he);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case re:return Q.key===De?F(K,U,Q,he):null;case b:return Q.key===De?J(K,U,Q,he):null;case yt:return De=Q._init,ie(K,U,De(Q._payload),he)}if(qr(Q)||_e(Q))return De!==null?null:oe(K,U,Q,he,null);Hh(K,Q)}return null}function ve(K,U,Q,he,De){if(typeof he=="string"&&he!==""||typeof he=="number")return K=K.get(Q)||null,O(U,K,""+he,De);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case re:return K=K.get(he.key===null?Q:he.key)||null,F(U,K,he,De);case b:return K=K.get(he.key===null?Q:he.key)||null,J(U,K,he,De);case yt:var Me=he._init;return ve(K,U,Q,Me(he._payload),De)}if(qr(he)||_e(he))return K=K.get(Q)||null,oe(U,K,he,De,null);Hh(U,he)}return null}function Ae(K,U,Q,he){for(var De=null,Me=null,Fe=U,He=U=0,_n=null;Fe!==null&&He<Q.length;He++){Fe.index>He?(_n=Fe,Fe=null):_n=Fe.sibling;var ct=ie(K,Fe,Q[He],he);if(ct===null){Fe===null&&(Fe=_n);break}s&&Fe&&ct.alternate===null&&a(K,Fe),U=_(ct,U,He),Me===null?De=ct:Me.sibling=ct,Me=ct,Fe=_n}if(He===Q.length)return u(K,Fe),Ut&&zo(K,He),De;if(Fe===null){for(;He<Q.length;He++)Fe=ae(K,Q[He],he),Fe!==null&&(U=_(Fe,U,He),Me===null?De=Fe:Me.sibling=Fe,Me=Fe);return Ut&&zo(K,He),De}for(Fe=f(K,Fe);He<Q.length;He++)_n=ve(Fe,K,He,Q[He],he),_n!==null&&(s&&_n.alternate!==null&&Fe.delete(_n.key===null?He:_n.key),U=_(_n,U,He),Me===null?De=_n:Me.sibling=_n,Me=_n);return s&&Fe.forEach(function(Gs){return a(K,Gs)}),Ut&&zo(K,He),De}function Ce(K,U,Q,he){var De=_e(Q);if(typeof De!="function")throw Error(t(150));if(Q=De.call(Q),Q==null)throw Error(t(151));for(var Me=De=null,Fe=U,He=U=0,_n=null,ct=Q.next();Fe!==null&&!ct.done;He++,ct=Q.next()){Fe.index>He?(_n=Fe,Fe=null):_n=Fe.sibling;var Gs=ie(K,Fe,ct.value,he);if(Gs===null){Fe===null&&(Fe=_n);break}s&&Fe&&Gs.alternate===null&&a(K,Fe),U=_(Gs,U,He),Me===null?De=Gs:Me.sibling=Gs,Me=Gs,Fe=_n}if(ct.done)return u(K,Fe),Ut&&zo(K,He),De;if(Fe===null){for(;!ct.done;He++,ct=Q.next())ct=ae(K,ct.value,he),ct!==null&&(U=_(ct,U,He),Me===null?De=ct:Me.sibling=ct,Me=ct);return Ut&&zo(K,He),De}for(Fe=f(K,Fe);!ct.done;He++,ct=Q.next())ct=ve(Fe,K,He,ct.value,he),ct!==null&&(s&&ct.alternate!==null&&Fe.delete(ct.key===null?He:ct.key),U=_(ct,U,He),Me===null?De=ct:Me.sibling=ct,Me=ct);return s&&Fe.forEach(function(QC){return a(K,QC)}),Ut&&zo(K,He),De}function Xt(K,U,Q,he){if(typeof Q=="object"&&Q!==null&&Q.type===P&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case re:e:{for(var De=Q.key,Me=U;Me!==null;){if(Me.key===De){if(De=Q.type,De===P){if(Me.tag===7){u(K,Me.sibling),U=m(Me,Q.props.children),U.return=K,K=U;break e}}else if(Me.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===yt&&fw(De)===Me.type){u(K,Me.sibling),U=m(Me,Q.props),U.ref=Nu(K,Me,Q),U.return=K,K=U;break e}u(K,Me);break}else a(K,Me);Me=Me.sibling}Q.type===P?(U=Yo(Q.props.children,K.mode,he,Q.key),U.return=K,K=U):(he=md(Q.type,Q.key,Q.props,null,K.mode,he),he.ref=Nu(K,U,Q),he.return=K,K=he)}return T(K);case b:e:{for(Me=Q.key;U!==null;){if(U.key===Me)if(U.tag===4&&U.stateNode.containerInfo===Q.containerInfo&&U.stateNode.implementation===Q.implementation){u(K,U.sibling),U=m(U,Q.children||[]),U.return=K,K=U;break e}else{u(K,U);break}else a(K,U);U=U.sibling}U=qm(Q,K.mode,he),U.return=K,K=U}return T(K);case yt:return Me=Q._init,Xt(K,U,Me(Q._payload),he)}if(qr(Q))return Ae(K,U,Q,he);if(_e(Q))return Ce(K,U,Q,he);Hh(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,U!==null&&U.tag===6?(u(K,U.sibling),U=m(U,Q),U.return=K,K=U):(u(K,U),U=$m(Q,K.mode,he),U.return=K,K=U),T(K)):u(K,U)}return Xt}var sl=pw(!0),mw=pw(!1),Kh=Ls(null),Gh=null,ol=null,Zp=null;function em(){Zp=ol=Gh=null}function tm(s){var a=Kh.current;Ot(Kh),s._currentValue=a}function nm(s,a,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),s===u)break;s=s.return}}function al(s,a){Gh=s,Zp=ol=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&a&&(tr=!0),s.firstContext=null)}function Lr(s){var a=s._currentValue;if(Zp!==s)if(s={context:s,memoizedValue:a,next:null},ol===null){if(Gh===null)throw Error(t(308));ol=s,Gh.dependencies={lanes:0,firstContext:s}}else ol=ol.next=s;return a}var $o=null;function rm(s){$o===null?$o=[s]:$o.push(s)}function gw(s,a,u,f){var m=a.interleaved;return m===null?(u.next=u,rm(a)):(u.next=m.next,m.next=u),a.interleaved=u,Ji(s,f)}function Ji(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Us=!1;function im(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yw(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Xi(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Bs(s,a,u){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,ut&2){var m=f.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),f.pending=a,Ji(s,u)}return m=f.interleaved,m===null?(a.next=a,rm(f)):(a.next=m.next,m.next=a),f.interleaved=a,Ji(s,u)}function Wh(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,ks(s,u)}}function _w(s,a){var u=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var m=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?m=_=T:_=_.next=T,u=u.next}while(u!==null);_===null?m=_=a:_=_.next=a}else m=_=a;u={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:f.shared,effects:f.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function Qh(s,a,u,f){var m=s.updateQueue;Us=!1;var _=m.firstBaseUpdate,T=m.lastBaseUpdate,O=m.shared.pending;if(O!==null){m.shared.pending=null;var F=O,J=F.next;F.next=null,T===null?_=J:T.next=J,T=F;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,O=oe.lastBaseUpdate,O!==T&&(O===null?oe.firstBaseUpdate=J:O.next=J,oe.lastBaseUpdate=F))}if(_!==null){var ae=m.baseState;T=0,oe=J=F=null,O=_;do{var ie=O.lane,ve=O.eventTime;if((f&ie)===ie){oe!==null&&(oe=oe.next={eventTime:ve,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Ae=s,Ce=O;switch(ie=a,ve=u,Ce.tag){case 1:if(Ae=Ce.payload,typeof Ae=="function"){ae=Ae.call(ve,ae,ie);break e}ae=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Ce.payload,ie=typeof Ae=="function"?Ae.call(ve,ae,ie):Ae,ie==null)break e;ae=de({},ae,ie);break e;case 2:Us=!0}}O.callback!==null&&O.lane!==0&&(s.flags|=64,ie=m.effects,ie===null?m.effects=[O]:ie.push(O))}else ve={eventTime:ve,lane:ie,tag:O.tag,payload:O.payload,callback:O.callback,next:null},oe===null?(J=oe=ve,F=ae):oe=oe.next=ve,T|=ie;if(O=O.next,O===null){if(O=m.shared.pending,O===null)break;ie=O,O=ie.next,ie.next=null,m.lastBaseUpdate=ie,m.shared.pending=null}}while(!0);if(oe===null&&(F=ae),m.baseState=F,m.firstBaseUpdate=J,m.lastBaseUpdate=oe,a=m.shared.interleaved,a!==null){m=a;do T|=m.lane,m=m.next;while(m!==a)}else _===null&&(m.shared.lanes=0);Ko|=T,s.lanes=T,s.memoizedState=ae}}function vw(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var f=s[a],m=f.callback;if(m!==null){if(f.callback=null,f=u,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var Ou={},wi=Ls(Ou),Vu=Ls(Ou),Lu=Ls(Ou);function qo(s){if(s===Ou)throw Error(t(174));return s}function sm(s,a){switch(bt(Lu,a),bt(Vu,s),bt(wi,Ou),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Rt(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=Rt(a,s)}Ot(wi),bt(wi,a)}function ll(){Ot(wi),Ot(Vu),Ot(Lu)}function ww(s){qo(Lu.current);var a=qo(wi.current),u=Rt(a,s.type);a!==u&&(bt(Vu,s),bt(wi,u))}function om(s){Vu.current===s&&(Ot(wi),Ot(Vu))}var qt=Ls(0);function Yh(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var am=[];function lm(){for(var s=0;s<am.length;s++)am[s]._workInProgressVersionPrimary=null;am.length=0}var Jh=H.ReactCurrentDispatcher,um=H.ReactCurrentBatchConfig,Ho=0,Ht=null,hn=null,gn=null,Xh=!1,Mu=!1,Fu=0,_C=0;function Vn(){throw Error(t(321))}function cm(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Zr(s[u],a[u]))return!1;return!0}function hm(s,a,u,f,m,_){if(Ho=_,Ht=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Jh.current=s===null||s.memoizedState===null?TC:IC,s=u(f,m),Mu){_=0;do{if(Mu=!1,Fu=0,25<=_)throw Error(t(301));_+=1,gn=hn=null,a.updateQueue=null,Jh.current=SC,s=u(f,m)}while(Mu)}if(Jh.current=td,a=hn!==null&&hn.next!==null,Ho=0,gn=hn=Ht=null,Xh=!1,a)throw Error(t(300));return s}function dm(){var s=Fu!==0;return Fu=0,s}function Ei(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?Ht.memoizedState=gn=s:gn=gn.next=s,gn}function Mr(){if(hn===null){var s=Ht.alternate;s=s!==null?s.memoizedState:null}else s=hn.next;var a=gn===null?Ht.memoizedState:gn.next;if(a!==null)gn=a,hn=s;else{if(s===null)throw Error(t(310));hn=s,s={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},gn===null?Ht.memoizedState=gn=s:gn=gn.next=s}return gn}function Uu(s,a){return typeof a=="function"?a(s):a}function fm(s){var a=Mr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=hn,m=f.baseQueue,_=u.pending;if(_!==null){if(m!==null){var T=m.next;m.next=_.next,_.next=T}f.baseQueue=m=_,u.pending=null}if(m!==null){_=m.next,f=f.baseState;var O=T=null,F=null,J=_;do{var oe=J.lane;if((Ho&oe)===oe)F!==null&&(F=F.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),f=J.hasEagerState?J.eagerState:s(f,J.action);else{var ae={lane:oe,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};F===null?(O=F=ae,T=f):F=F.next=ae,Ht.lanes|=oe,Ko|=oe}J=J.next}while(J!==null&&J!==_);F===null?T=f:F.next=O,Zr(f,a.memoizedState)||(tr=!0),a.memoizedState=f,a.baseState=T,a.baseQueue=F,u.lastRenderedState=f}if(s=u.interleaved,s!==null){m=s;do _=m.lane,Ht.lanes|=_,Ko|=_,m=m.next;while(m!==s)}else m===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function pm(s){var a=Mr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=u.dispatch,m=u.pending,_=a.memoizedState;if(m!==null){u.pending=null;var T=m=m.next;do _=s(_,T.action),T=T.next;while(T!==m);Zr(_,a.memoizedState)||(tr=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),u.lastRenderedState=_}return[_,f]}function Ew(){}function Tw(s,a){var u=Ht,f=Mr(),m=a(),_=!Zr(f.memoizedState,m);if(_&&(f.memoizedState=m,tr=!0),f=f.queue,mm(Rw.bind(null,u,f,s),[s]),f.getSnapshot!==a||_||gn!==null&&gn.memoizedState.tag&1){if(u.flags|=2048,Bu(9,Sw.bind(null,u,f,m,a),void 0,null),yn===null)throw Error(t(349));Ho&30||Iw(u,a,m)}return m}function Iw(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Ht.updateQueue,a===null?(a={lastEffect:null,stores:null},Ht.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function Sw(s,a,u,f){a.value=u,a.getSnapshot=f,Aw(a)&&Pw(s)}function Rw(s,a,u){return u(function(){Aw(a)&&Pw(s)})}function Aw(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Zr(s,u)}catch{return!0}}function Pw(s){var a=Ji(s,1);a!==null&&ii(a,s,1,-1)}function Cw(s){var a=Ei();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:s},a.queue=s,s=s.dispatch=EC.bind(null,Ht,s),[a.memoizedState,s]}function Bu(s,a,u,f){return s={tag:s,create:a,destroy:u,deps:f,next:null},a=Ht.updateQueue,a===null?(a={lastEffect:null,stores:null},Ht.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(f=u.next,u.next=s,s.next=f,a.lastEffect=s)),s}function kw(){return Mr().memoizedState}function Zh(s,a,u,f){var m=Ei();Ht.flags|=s,m.memoizedState=Bu(1|a,u,void 0,f===void 0?null:f)}function ed(s,a,u,f){var m=Mr();f=f===void 0?null:f;var _=void 0;if(hn!==null){var T=hn.memoizedState;if(_=T.destroy,f!==null&&cm(f,T.deps)){m.memoizedState=Bu(a,u,_,f);return}}Ht.flags|=s,m.memoizedState=Bu(1|a,u,_,f)}function bw(s,a){return Zh(8390656,8,s,a)}function mm(s,a){return ed(2048,8,s,a)}function Dw(s,a){return ed(4,2,s,a)}function xw(s,a){return ed(4,4,s,a)}function Nw(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Ow(s,a,u){return u=u!=null?u.concat([s]):null,ed(4,4,Nw.bind(null,a,s),u)}function gm(){}function Vw(s,a){var u=Mr();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&cm(a,f[1])?f[0]:(u.memoizedState=[s,a],s)}function Lw(s,a){var u=Mr();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&cm(a,f[1])?f[0]:(s=s(),u.memoizedState=[s,a],s)}function Mw(s,a,u){return Ho&21?(Zr(u,a)||(u=Oo(),Ht.lanes|=u,Ko|=u,s.baseState=!0),a):(s.baseState&&(s.baseState=!1,tr=!0),s.memoizedState=u)}function vC(s,a){var u=rt;rt=u!==0&&4>u?u:4,s(!0);var f=um.transition;um.transition={};try{s(!1),a()}finally{rt=u,um.transition=f}}function Fw(){return Mr().memoizedState}function wC(s,a,u){var f=qs(s);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Uw(s))Bw(a,u);else if(u=gw(s,a,u,f),u!==null){var m=$n();ii(u,s,f,m),jw(u,a,f)}}function EC(s,a,u){var f=qs(s),m={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Uw(s))Bw(a,m);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var T=a.lastRenderedState,O=_(T,u);if(m.hasEagerState=!0,m.eagerState=O,Zr(O,T)){var F=a.interleaved;F===null?(m.next=m,rm(a)):(m.next=F.next,F.next=m),a.interleaved=m;return}}catch{}finally{}u=gw(s,a,m,f),u!==null&&(m=$n(),ii(u,s,f,m),jw(u,a,f))}}function Uw(s){var a=s.alternate;return s===Ht||a!==null&&a===Ht}function Bw(s,a){Mu=Xh=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function jw(s,a,u){if(u&4194240){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,ks(s,u)}}var td={readContext:Lr,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},TC={readContext:Lr,useCallback:function(s,a){return Ei().memoizedState=[s,a===void 0?null:a],s},useContext:Lr,useEffect:bw,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,Zh(4194308,4,Nw.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Zh(4194308,4,s,a)},useInsertionEffect:function(s,a){return Zh(4,2,s,a)},useMemo:function(s,a){var u=Ei();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var f=Ei();return a=u!==void 0?u(a):a,f.memoizedState=f.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},f.queue=s,s=s.dispatch=wC.bind(null,Ht,s),[f.memoizedState,s]},useRef:function(s){var a=Ei();return s={current:s},a.memoizedState=s},useState:Cw,useDebugValue:gm,useDeferredValue:function(s){return Ei().memoizedState=s},useTransition:function(){var s=Cw(!1),a=s[0];return s=vC.bind(null,s[1]),Ei().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var f=Ht,m=Ei();if(Ut){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),yn===null)throw Error(t(349));Ho&30||Iw(f,a,u)}m.memoizedState=u;var _={value:u,getSnapshot:a};return m.queue=_,bw(Rw.bind(null,f,_,s),[s]),f.flags|=2048,Bu(9,Sw.bind(null,f,_,u,a),void 0,null),u},useId:function(){var s=Ei(),a=yn.identifierPrefix;if(Ut){var u=Yi,f=Qi;u=(f&~(1<<32-Yt(f)-1)).toString(32)+u,a=":"+a+"R"+u,u=Fu++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=_C++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},IC={readContext:Lr,useCallback:Vw,useContext:Lr,useEffect:mm,useImperativeHandle:Ow,useInsertionEffect:Dw,useLayoutEffect:xw,useMemo:Lw,useReducer:fm,useRef:kw,useState:function(){return fm(Uu)},useDebugValue:gm,useDeferredValue:function(s){var a=Mr();return Mw(a,hn.memoizedState,s)},useTransition:function(){var s=fm(Uu)[0],a=Mr().memoizedState;return[s,a]},useMutableSource:Ew,useSyncExternalStore:Tw,useId:Fw,unstable_isNewReconciler:!1},SC={readContext:Lr,useCallback:Vw,useContext:Lr,useEffect:mm,useImperativeHandle:Ow,useInsertionEffect:Dw,useLayoutEffect:xw,useMemo:Lw,useReducer:pm,useRef:kw,useState:function(){return pm(Uu)},useDebugValue:gm,useDeferredValue:function(s){var a=Mr();return hn===null?a.memoizedState=s:Mw(a,hn.memoizedState,s)},useTransition:function(){var s=pm(Uu)[0],a=Mr().memoizedState;return[s,a]},useMutableSource:Ew,useSyncExternalStore:Tw,useId:Fw,unstable_isNewReconciler:!1};function ti(s,a){if(s&&s.defaultProps){a=de({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}function ym(s,a,u,f){a=s.memoizedState,u=u(f,a),u=u==null?a:de({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var nd={isMounted:function(s){return(s=s._reactInternals)?qe(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var f=$n(),m=qs(s),_=Xi(f,m);_.payload=a,u!=null&&(_.callback=u),a=Bs(s,_,m),a!==null&&(ii(a,s,m,f),Wh(a,s,m))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var f=$n(),m=qs(s),_=Xi(f,m);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=Bs(s,_,m),a!==null&&(ii(a,s,m,f),Wh(a,s,m))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=$n(),f=qs(s),m=Xi(u,f);m.tag=2,a!=null&&(m.callback=a),a=Bs(s,m,f),a!==null&&(ii(a,s,f,u),Wh(a,s,f))}};function zw(s,a,u,f,m,_,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,_,T):a.prototype&&a.prototype.isPureReactComponent?!Au(u,f)||!Au(m,_):!0}function $w(s,a,u){var f=!1,m=Ms,_=a.contextType;return typeof _=="object"&&_!==null?_=Lr(_):(m=er(a)?Bo:On.current,f=a.contextTypes,_=(f=f!=null)?tl(s,m):Ms),a=new a(u,_),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=nd,s.stateNode=a,a._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=_),a}function qw(s,a,u,f){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==s&&nd.enqueueReplaceState(a,a.state,null)}function _m(s,a,u,f){var m=s.stateNode;m.props=u,m.state=s.memoizedState,m.refs={},im(s);var _=a.contextType;typeof _=="object"&&_!==null?m.context=Lr(_):(_=er(a)?Bo:On.current,m.context=tl(s,_)),m.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(ym(s,a,_,u),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&nd.enqueueReplaceState(m,m.state,null),Qh(s,u,m,f),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function ul(s,a){try{var u="",f=a;do u+=Ve(f),f=f.return;while(f);var m=u}catch(_){m=`
Error generating stack: `+_.message+`
`+_.stack}return{value:s,source:a,stack:m,digest:null}}function vm(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function wm(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var RC=typeof WeakMap=="function"?WeakMap:Map;function Hw(s,a,u){u=Xi(-1,u),u.tag=3,u.payload={element:null};var f=a.value;return u.callback=function(){ud||(ud=!0,Vm=f),wm(s,a)},u}function Kw(s,a,u){u=Xi(-1,u),u.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=a.value;u.payload=function(){return f(m)},u.callback=function(){wm(s,a)}}var _=s.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){wm(s,a),typeof f!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),u}function Gw(s,a,u){var f=s.pingCache;if(f===null){f=s.pingCache=new RC;var m=new Set;f.set(a,m)}else m=f.get(a),m===void 0&&(m=new Set,f.set(a,m));m.has(u)||(m.add(u),s=UC.bind(null,s,a,u),a.then(s,s))}function Ww(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function Qw(s,a,u,f,m){return s.mode&1?(s.flags|=65536,s.lanes=m,s):(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Xi(-1,1),a.tag=2,Bs(u,a,1))),u.lanes|=1),s)}var AC=H.ReactCurrentOwner,tr=!1;function zn(s,a,u,f){a.child=s===null?mw(a,null,u,f):sl(a,s.child,u,f)}function Yw(s,a,u,f,m){u=u.render;var _=a.ref;return al(a,m),f=hm(s,a,u,f,_,m),u=dm(),s!==null&&!tr?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,Zi(s,a,m)):(Ut&&u&&Wp(a),a.flags|=1,zn(s,a,f,m),a.child)}function Jw(s,a,u,f,m){if(s===null){var _=u.type;return typeof _=="function"&&!zm(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=_,Xw(s,a,_,f,m)):(s=md(u.type,null,f,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(_=s.child,!(s.lanes&m)){var T=_.memoizedProps;if(u=u.compare,u=u!==null?u:Au,u(T,f)&&s.ref===a.ref)return Zi(s,a,m)}return a.flags|=1,s=Ks(_,f),s.ref=a.ref,s.return=a,a.child=s}function Xw(s,a,u,f,m){if(s!==null){var _=s.memoizedProps;if(Au(_,f)&&s.ref===a.ref)if(tr=!1,a.pendingProps=f=_,(s.lanes&m)!==0)s.flags&131072&&(tr=!0);else return a.lanes=s.lanes,Zi(s,a,m)}return Em(s,a,u,f,m)}function Zw(s,a,u){var f=a.pendingProps,m=f.children,_=s!==null?s.memoizedState:null;if(f.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(hl,_r),_r|=u;else{if(!(u&1073741824))return s=_!==null?_.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,bt(hl,_r),_r|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:u,bt(hl,_r),_r|=f}else _!==null?(f=_.baseLanes|u,a.memoizedState=null):f=u,bt(hl,_r),_r|=f;return zn(s,a,m,u),a.child}function eE(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Em(s,a,u,f,m){var _=er(u)?Bo:On.current;return _=tl(a,_),al(a,m),u=hm(s,a,u,f,_,m),f=dm(),s!==null&&!tr?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,Zi(s,a,m)):(Ut&&f&&Wp(a),a.flags|=1,zn(s,a,u,m),a.child)}function tE(s,a,u,f,m){if(er(u)){var _=!0;Bh(a)}else _=!1;if(al(a,m),a.stateNode===null)id(s,a),$w(a,u,f),_m(a,u,f,m),f=!0;else if(s===null){var T=a.stateNode,O=a.memoizedProps;T.props=O;var F=T.context,J=u.contextType;typeof J=="object"&&J!==null?J=Lr(J):(J=er(u)?Bo:On.current,J=tl(a,J));var oe=u.getDerivedStateFromProps,ae=typeof oe=="function"||typeof T.getSnapshotBeforeUpdate=="function";ae||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(O!==f||F!==J)&&qw(a,T,f,J),Us=!1;var ie=a.memoizedState;T.state=ie,Qh(a,f,T,m),F=a.memoizedState,O!==f||ie!==F||Zn.current||Us?(typeof oe=="function"&&(ym(a,u,oe,f),F=a.memoizedState),(O=Us||zw(a,u,O,f,ie,F,J))?(ae||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=F),T.props=f,T.state=F,T.context=J,f=O):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{T=a.stateNode,yw(s,a),O=a.memoizedProps,J=a.type===a.elementType?O:ti(a.type,O),T.props=J,ae=a.pendingProps,ie=T.context,F=u.contextType,typeof F=="object"&&F!==null?F=Lr(F):(F=er(u)?Bo:On.current,F=tl(a,F));var ve=u.getDerivedStateFromProps;(oe=typeof ve=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(O!==ae||ie!==F)&&qw(a,T,f,F),Us=!1,ie=a.memoizedState,T.state=ie,Qh(a,f,T,m);var Ae=a.memoizedState;O!==ae||ie!==Ae||Zn.current||Us?(typeof ve=="function"&&(ym(a,u,ve,f),Ae=a.memoizedState),(J=Us||zw(a,u,J,f,ie,Ae,F)||!1)?(oe||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,Ae,F),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,Ae,F)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||O===s.memoizedProps&&ie===s.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||O===s.memoizedProps&&ie===s.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=Ae),T.props=f,T.state=Ae,T.context=F,f=J):(typeof T.componentDidUpdate!="function"||O===s.memoizedProps&&ie===s.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||O===s.memoizedProps&&ie===s.memoizedState||(a.flags|=1024),f=!1)}return Tm(s,a,u,f,_,m)}function Tm(s,a,u,f,m,_){eE(s,a);var T=(a.flags&128)!==0;if(!f&&!T)return m&&ow(a,u,!1),Zi(s,a,_);f=a.stateNode,AC.current=a;var O=T&&typeof u.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,s!==null&&T?(a.child=sl(a,s.child,null,_),a.child=sl(a,null,O,_)):zn(s,a,O,_),a.memoizedState=f.state,m&&ow(a,u,!0),a.child}function nE(s){var a=s.stateNode;a.pendingContext?iw(s,a.pendingContext,a.pendingContext!==a.context):a.context&&iw(s,a.context,!1),sm(s,a.containerInfo)}function rE(s,a,u,f,m){return il(),Xp(m),a.flags|=256,zn(s,a,u,f),a.child}var Im={dehydrated:null,treeContext:null,retryLane:0};function Sm(s){return{baseLanes:s,cachePool:null,transitions:null}}function iE(s,a,u){var f=a.pendingProps,m=qt.current,_=!1,T=(a.flags&128)!==0,O;if((O=T)||(O=s!==null&&s.memoizedState===null?!1:(m&2)!==0),O?(_=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),bt(qt,m&1),s===null)return Jp(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(a.mode&1?s.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(T=f.children,s=f.fallback,_?(f=a.mode,_=a.child,T={mode:"hidden",children:T},!(f&1)&&_!==null?(_.childLanes=0,_.pendingProps=T):_=gd(T,f,0,null),s=Yo(s,f,u,null),_.return=a,s.return=a,_.sibling=s,a.child=_,a.child.memoizedState=Sm(u),a.memoizedState=Im,s):Rm(a,T));if(m=s.memoizedState,m!==null&&(O=m.dehydrated,O!==null))return PC(s,a,T,f,O,m,u);if(_){_=f.fallback,T=a.mode,m=s.child,O=m.sibling;var F={mode:"hidden",children:f.children};return!(T&1)&&a.child!==m?(f=a.child,f.childLanes=0,f.pendingProps=F,a.deletions=null):(f=Ks(m,F),f.subtreeFlags=m.subtreeFlags&14680064),O!==null?_=Ks(O,_):(_=Yo(_,T,u,null),_.flags|=2),_.return=a,f.return=a,f.sibling=_,a.child=f,f=_,_=a.child,T=s.child.memoizedState,T=T===null?Sm(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},_.memoizedState=T,_.childLanes=s.childLanes&~u,a.memoizedState=Im,f}return _=s.child,s=_.sibling,f=Ks(_,{mode:"visible",children:f.children}),!(a.mode&1)&&(f.lanes=u),f.return=a,f.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=f,a.memoizedState=null,f}function Rm(s,a){return a=gd({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function rd(s,a,u,f){return f!==null&&Xp(f),sl(a,s.child,null,u),s=Rm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function PC(s,a,u,f,m,_,T){if(u)return a.flags&256?(a.flags&=-257,f=vm(Error(t(422))),rd(s,a,T,f)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(_=f.fallback,m=a.mode,f=gd({mode:"visible",children:f.children},m,0,null),_=Yo(_,m,T,null),_.flags|=2,f.return=a,_.return=a,f.sibling=_,a.child=f,a.mode&1&&sl(a,s.child,null,T),a.child.memoizedState=Sm(T),a.memoizedState=Im,_);if(!(a.mode&1))return rd(s,a,T,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var O=f.dgst;return f=O,_=Error(t(419)),f=vm(_,f,void 0),rd(s,a,T,f)}if(O=(T&s.childLanes)!==0,tr||O){if(f=yn,f!==null){switch(T&-T){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(f.suspendedLanes|T)?0:m,m!==0&&m!==_.retryLane&&(_.retryLane=m,Ji(s,m),ii(f,s,m,-1))}return jm(),f=vm(Error(t(421))),rd(s,a,T,f)}return m.data==="$?"?(a.flags|=128,a.child=s.child,a=BC.bind(null,s),m._reactRetry=a,null):(s=_.treeContext,yr=Vs(m.nextSibling),gr=a,Ut=!0,ei=null,s!==null&&(Or[Vr++]=Qi,Or[Vr++]=Yi,Or[Vr++]=jo,Qi=s.id,Yi=s.overflow,jo=a),a=Rm(a,f.children),a.flags|=4096,a)}function sE(s,a,u){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a),nm(s.return,a,u)}function Am(s,a,u,f,m){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:m}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=m)}function oE(s,a,u){var f=a.pendingProps,m=f.revealOrder,_=f.tail;if(zn(s,a,f.children,u),f=qt.current,f&2)f=f&1|2,a.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&sE(s,u,a);else if(s.tag===19)sE(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(bt(qt,f),!(a.mode&1))a.memoizedState=null;else switch(m){case"forwards":for(u=a.child,m=null;u!==null;)s=u.alternate,s!==null&&Yh(s)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),Am(a,!1,m,u,_);break;case"backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&Yh(s)===null){a.child=m;break}s=m.sibling,m.sibling=u,u=m,m=s}Am(a,!0,u,null,_);break;case"together":Am(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function id(s,a){!(a.mode&1)&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function Zi(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),Ko|=a.lanes,!(u&a.childLanes))return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,u=Ks(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=Ks(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function CC(s,a,u){switch(a.tag){case 3:nE(a),il();break;case 5:ww(a);break;case 1:er(a.type)&&Bh(a);break;case 4:sm(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,m=a.memoizedProps.value;bt(Kh,f._currentValue),f._currentValue=m;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(bt(qt,qt.current&1),a.flags|=128,null):u&a.child.childLanes?iE(s,a,u):(bt(qt,qt.current&1),s=Zi(s,a,u),s!==null?s.sibling:null);bt(qt,qt.current&1);break;case 19:if(f=(u&a.childLanes)!==0,s.flags&128){if(f)return oE(s,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),bt(qt,qt.current),f)break;return null;case 22:case 23:return a.lanes=0,Zw(s,a,u)}return Zi(s,a,u)}var aE,Pm,lE,uE;aE=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Pm=function(){},lE=function(s,a,u,f){var m=s.memoizedProps;if(m!==f){s=a.stateNode,qo(wi.current);var _=null;switch(u){case"input":m=Fi(s,m),f=Fi(s,f),_=[];break;case"select":m=de({},m,{value:void 0}),f=de({},f,{value:void 0}),_=[];break;case"textarea":m=bo(s,m),f=bo(s,f),_=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=Mh)}Do(u,f);var T;u=null;for(J in m)if(!f.hasOwnProperty(J)&&m.hasOwnProperty(J)&&m[J]!=null)if(J==="style"){var O=m[J];for(T in O)O.hasOwnProperty(T)&&(u||(u={}),u[T]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(i.hasOwnProperty(J)?_||(_=[]):(_=_||[]).push(J,null));for(J in f){var F=f[J];if(O=m!=null?m[J]:void 0,f.hasOwnProperty(J)&&F!==O&&(F!=null||O!=null))if(J==="style")if(O){for(T in O)!O.hasOwnProperty(T)||F&&F.hasOwnProperty(T)||(u||(u={}),u[T]="");for(T in F)F.hasOwnProperty(T)&&O[T]!==F[T]&&(u||(u={}),u[T]=F[T])}else u||(_||(_=[]),_.push(J,u)),u=F;else J==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,O=O?O.__html:void 0,F!=null&&O!==F&&(_=_||[]).push(J,F)):J==="children"?typeof F!="string"&&typeof F!="number"||(_=_||[]).push(J,""+F):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(i.hasOwnProperty(J)?(F!=null&&J==="onScroll"&&Nt("scroll",s),_||O===F||(_=[])):(_=_||[]).push(J,F))}u&&(_=_||[]).push("style",u);var J=_;(a.updateQueue=J)&&(a.flags|=4)}},uE=function(s,a,u,f){u!==f&&(a.flags|=4)};function ju(s,a){if(!Ut)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Ln(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,f=0;if(a)for(var m=s.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=u,a}function kC(s,a,u){var f=a.pendingProps;switch(Qp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(a),null;case 1:return er(a.type)&&Uh(),Ln(a),null;case 3:return f=a.stateNode,ll(),Ot(Zn),Ot(On),lm(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(qh(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,ei!==null&&(Fm(ei),ei=null))),Pm(s,a),Ln(a),null;case 5:om(a);var m=qo(Lu.current);if(u=a.type,s!==null&&a.stateNode!=null)lE(s,a,u,f,m),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return Ln(a),null}if(s=qo(wi.current),qh(a)){f=a.stateNode,u=a.type;var _=a.memoizedProps;switch(f[vi]=a,f[Du]=_,s=(a.mode&1)!==0,u){case"dialog":Nt("cancel",f),Nt("close",f);break;case"iframe":case"object":case"embed":Nt("load",f);break;case"video":case"audio":for(m=0;m<Cu.length;m++)Nt(Cu[m],f);break;case"source":Nt("error",f);break;case"img":case"image":case"link":Nt("error",f),Nt("load",f);break;case"details":Nt("toggle",f);break;case"input":Kn(f,_),Nt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},Nt("invalid",f);break;case"textarea":Gn(f,_),Nt("invalid",f)}Do(u,_),m=null;for(var T in _)if(_.hasOwnProperty(T)){var O=_[T];T==="children"?typeof O=="string"?f.textContent!==O&&(_.suppressHydrationWarning!==!0&&Lh(f.textContent,O,s),m=["children",O]):typeof O=="number"&&f.textContent!==""+O&&(_.suppressHydrationWarning!==!0&&Lh(f.textContent,O,s),m=["children",""+O]):i.hasOwnProperty(T)&&O!=null&&T==="onScroll"&&Nt("scroll",f)}switch(u){case"input":pt(f),ko(f,_,!0);break;case"textarea":pt(f),_s(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=Mh)}f=m,a.updateQueue=f,f!==null&&(a.flags|=4)}else{T=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=$t(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=T.createElement(u,{is:f.is}):(s=T.createElement(u),u==="select"&&(T=s,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):s=T.createElementNS(s,u),s[vi]=a,s[Du]=f,aE(s,a,!1,!1),a.stateNode=s;e:{switch(T=Is(u,f),u){case"dialog":Nt("cancel",s),Nt("close",s),m=f;break;case"iframe":case"object":case"embed":Nt("load",s),m=f;break;case"video":case"audio":for(m=0;m<Cu.length;m++)Nt(Cu[m],s);m=f;break;case"source":Nt("error",s),m=f;break;case"img":case"image":case"link":Nt("error",s),Nt("load",s),m=f;break;case"details":Nt("toggle",s),m=f;break;case"input":Kn(s,f),m=Fi(s,f),Nt("invalid",s);break;case"option":m=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},m=de({},f,{value:void 0}),Nt("invalid",s);break;case"textarea":Gn(s,f),m=bo(s,f),Nt("invalid",s);break;default:m=f}Do(u,m),O=m;for(_ in O)if(O.hasOwnProperty(_)){var F=O[_];_==="style"?Es(s,F):_==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&vs(s,F)):_==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&cr(s,F):typeof F=="number"&&cr(s,""+F):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?F!=null&&_==="onScroll"&&Nt("scroll",s):F!=null&&j(s,_,F,T))}switch(u){case"input":pt(s),ko(s,f,!1);break;case"textarea":pt(s),_s(s);break;case"option":f.value!=null&&s.setAttribute("value",""+$e(f.value));break;case"select":s.multiple=!!f.multiple,_=f.value,_!=null?Hr(s,!!f.multiple,_,!1):f.defaultValue!=null&&Hr(s,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=Mh)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Ln(a),null;case 6:if(s&&a.stateNode!=null)uE(s,a,s.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(u=qo(Lu.current),qo(wi.current),qh(a)){if(f=a.stateNode,u=a.memoizedProps,f[vi]=a,(_=f.nodeValue!==u)&&(s=gr,s!==null))switch(s.tag){case 3:Lh(f.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Lh(f.nodeValue,u,(s.mode&1)!==0)}_&&(a.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[vi]=a,a.stateNode=f}return Ln(a),null;case 13:if(Ot(qt),f=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Ut&&yr!==null&&a.mode&1&&!(a.flags&128))dw(),il(),a.flags|=98560,_=!1;else if(_=qh(a),f!==null&&f.dehydrated!==null){if(s===null){if(!_)throw Error(t(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[vi]=a}else il(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;Ln(a),_=!1}else ei!==null&&(Fm(ei),ei=null),_=!0;if(!_)return a.flags&65536?a:null}return a.flags&128?(a.lanes=u,a):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(a.child.flags|=8192,a.mode&1&&(s===null||qt.current&1?dn===0&&(dn=3):jm())),a.updateQueue!==null&&(a.flags|=4),Ln(a),null);case 4:return ll(),Pm(s,a),s===null&&ku(a.stateNode.containerInfo),Ln(a),null;case 10:return tm(a.type._context),Ln(a),null;case 17:return er(a.type)&&Uh(),Ln(a),null;case 19:if(Ot(qt),_=a.memoizedState,_===null)return Ln(a),null;if(f=(a.flags&128)!==0,T=_.rendering,T===null)if(f)ju(_,!1);else{if(dn!==0||s!==null&&s.flags&128)for(s=a.child;s!==null;){if(T=Yh(s),T!==null){for(a.flags|=128,ju(_,!1),f=T.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=u,u=a.child;u!==null;)_=u,s=f,_.flags&=14680066,T=_.alternate,T===null?(_.childLanes=0,_.lanes=s,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=T.childLanes,_.lanes=T.lanes,_.child=T.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=T.memoizedProps,_.memoizedState=T.memoizedState,_.updateQueue=T.updateQueue,_.type=T.type,s=T.dependencies,_.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return bt(qt,qt.current&1|2),a.child}s=s.sibling}_.tail!==null&&mt()>dl&&(a.flags|=128,f=!0,ju(_,!1),a.lanes=4194304)}else{if(!f)if(s=Yh(T),s!==null){if(a.flags|=128,f=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),ju(_,!0),_.tail===null&&_.tailMode==="hidden"&&!T.alternate&&!Ut)return Ln(a),null}else 2*mt()-_.renderingStartTime>dl&&u!==1073741824&&(a.flags|=128,f=!0,ju(_,!1),a.lanes=4194304);_.isBackwards?(T.sibling=a.child,a.child=T):(u=_.last,u!==null?u.sibling=T:a.child=T,_.last=T)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=mt(),a.sibling=null,u=qt.current,bt(qt,f?u&1|2:u&1),a):(Ln(a),null);case 22:case 23:return Bm(),f=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(a.flags|=8192),f&&a.mode&1?_r&1073741824&&(Ln(a),a.subtreeFlags&6&&(a.flags|=8192)):Ln(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function bC(s,a){switch(Qp(a),a.tag){case 1:return er(a.type)&&Uh(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ll(),Ot(Zn),Ot(On),lm(),s=a.flags,s&65536&&!(s&128)?(a.flags=s&-65537|128,a):null;case 5:return om(a),null;case 13:if(Ot(qt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));il()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Ot(qt),null;case 4:return ll(),null;case 10:return tm(a.type._context),null;case 22:case 23:return Bm(),null;case 24:return null;default:return null}}var sd=!1,Mn=!1,DC=typeof WeakSet=="function"?WeakSet:Set,Se=null;function cl(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Jt(s,a,f)}else u.current=null}function Cm(s,a,u){try{u()}catch(f){Jt(s,a,f)}}var cE=!1;function xC(s,a){if(Bp=xs,s=zv(),xp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var m=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var T=0,O=-1,F=-1,J=0,oe=0,ae=s,ie=null;t:for(;;){for(var ve;ae!==u||m!==0&&ae.nodeType!==3||(O=T+m),ae!==_||f!==0&&ae.nodeType!==3||(F=T+f),ae.nodeType===3&&(T+=ae.nodeValue.length),(ve=ae.firstChild)!==null;)ie=ae,ae=ve;for(;;){if(ae===s)break t;if(ie===u&&++J===m&&(O=T),ie===_&&++oe===f&&(F=T),(ve=ae.nextSibling)!==null)break;ae=ie,ie=ae.parentNode}ae=ve}u=O===-1||F===-1?null:{start:O,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(jp={focusedElem:s,selectionRange:u},xs=!1,Se=a;Se!==null;)if(a=Se,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Se=s;else for(;Se!==null;){a=Se;try{var Ae=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Ce=Ae.memoizedProps,Xt=Ae.memoizedState,K=a.stateNode,U=K.getSnapshotBeforeUpdate(a.elementType===a.type?Ce:ti(a.type,Ce),Xt);K.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var Q=a.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(he){Jt(a,a.return,he)}if(s=a.sibling,s!==null){s.return=a.return,Se=s;break}Se=a.return}return Ae=cE,cE=!1,Ae}function zu(s,a,u){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&s)===s){var _=m.destroy;m.destroy=void 0,_!==void 0&&Cm(a,u,_)}m=m.next}while(m!==f)}}function od(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var f=u.create;u.destroy=f()}u=u.next}while(u!==a)}}function km(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function hE(s){var a=s.alternate;a!==null&&(s.alternate=null,hE(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[vi],delete a[Du],delete a[Hp],delete a[pC],delete a[mC])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function dE(s){return s.tag===5||s.tag===3||s.tag===4}function fE(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||dE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function bm(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Mh));else if(f!==4&&(s=s.child,s!==null))for(bm(s,a,u),s=s.sibling;s!==null;)bm(s,a,u),s=s.sibling}function Dm(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(Dm(s,a,u),s=s.sibling;s!==null;)Dm(s,a,u),s=s.sibling}var Pn=null,ni=!1;function js(s,a,u){for(u=u.child;u!==null;)pE(s,a,u),u=u.sibling}function pE(s,a,u){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Yn,u)}catch{}switch(u.tag){case 5:Mn||cl(u,a);case 6:var f=Pn,m=ni;Pn=null,js(s,a,u),Pn=f,ni=m,Pn!==null&&(ni?(s=Pn,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Pn.removeChild(u.stateNode));break;case 18:Pn!==null&&(ni?(s=Pn,u=u.stateNode,s.nodeType===8?qp(s.parentNode,u):s.nodeType===1&&qp(s,u),Jr(s)):qp(Pn,u.stateNode));break;case 4:f=Pn,m=ni,Pn=u.stateNode.containerInfo,ni=!0,js(s,a,u),Pn=f,ni=m;break;case 0:case 11:case 14:case 15:if(!Mn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var _=m,T=_.destroy;_=_.tag,T!==void 0&&(_&2||_&4)&&Cm(u,a,T),m=m.next}while(m!==f)}js(s,a,u);break;case 1:if(!Mn&&(cl(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(O){Jt(u,a,O)}js(s,a,u);break;case 21:js(s,a,u);break;case 22:u.mode&1?(Mn=(f=Mn)||u.memoizedState!==null,js(s,a,u),Mn=f):js(s,a,u);break;default:js(s,a,u)}}function mE(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new DC),a.forEach(function(f){var m=jC.bind(null,s,f);u.has(f)||(u.add(f),f.then(m,m))})}}function ri(s,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var m=u[f];try{var _=s,T=a,O=T;e:for(;O!==null;){switch(O.tag){case 5:Pn=O.stateNode,ni=!1;break e;case 3:Pn=O.stateNode.containerInfo,ni=!0;break e;case 4:Pn=O.stateNode.containerInfo,ni=!0;break e}O=O.return}if(Pn===null)throw Error(t(160));pE(_,T,m),Pn=null,ni=!1;var F=m.alternate;F!==null&&(F.return=null),m.return=null}catch(J){Jt(m,a,J)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)gE(a,s),a=a.sibling}function gE(s,a){var u=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ri(a,s),Ti(s),f&4){try{zu(3,s,s.return),od(3,s)}catch(Ce){Jt(s,s.return,Ce)}try{zu(5,s,s.return)}catch(Ce){Jt(s,s.return,Ce)}}break;case 1:ri(a,s),Ti(s),f&512&&u!==null&&cl(u,u.return);break;case 5:if(ri(a,s),Ti(s),f&512&&u!==null&&cl(u,u.return),s.flags&32){var m=s.stateNode;try{cr(m,"")}catch(Ce){Jt(s,s.return,Ce)}}if(f&4&&(m=s.stateNode,m!=null)){var _=s.memoizedProps,T=u!==null?u.memoizedProps:_,O=s.type,F=s.updateQueue;if(s.updateQueue=null,F!==null)try{O==="input"&&_.type==="radio"&&_.name!=null&&Po(m,_),Is(O,T);var J=Is(O,_);for(T=0;T<F.length;T+=2){var oe=F[T],ae=F[T+1];oe==="style"?Es(m,ae):oe==="dangerouslySetInnerHTML"?vs(m,ae):oe==="children"?cr(m,ae):j(m,oe,ae,J)}switch(O){case"input":Co(m,_);break;case"textarea":Pr(m,_);break;case"select":var ie=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!_.multiple;var ve=_.value;ve!=null?Hr(m,!!_.multiple,ve,!1):ie!==!!_.multiple&&(_.defaultValue!=null?Hr(m,!!_.multiple,_.defaultValue,!0):Hr(m,!!_.multiple,_.multiple?[]:"",!1))}m[Du]=_}catch(Ce){Jt(s,s.return,Ce)}}break;case 6:if(ri(a,s),Ti(s),f&4){if(s.stateNode===null)throw Error(t(162));m=s.stateNode,_=s.memoizedProps;try{m.nodeValue=_}catch(Ce){Jt(s,s.return,Ce)}}break;case 3:if(ri(a,s),Ti(s),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Jr(a.containerInfo)}catch(Ce){Jt(s,s.return,Ce)}break;case 4:ri(a,s),Ti(s);break;case 13:ri(a,s),Ti(s),m=s.child,m.flags&8192&&(_=m.memoizedState!==null,m.stateNode.isHidden=_,!_||m.alternate!==null&&m.alternate.memoizedState!==null||(Om=mt())),f&4&&mE(s);break;case 22:if(oe=u!==null&&u.memoizedState!==null,s.mode&1?(Mn=(J=Mn)||oe,ri(a,s),Mn=J):ri(a,s),Ti(s),f&8192){if(J=s.memoizedState!==null,(s.stateNode.isHidden=J)&&!oe&&s.mode&1)for(Se=s,oe=s.child;oe!==null;){for(ae=Se=oe;Se!==null;){switch(ie=Se,ve=ie.child,ie.tag){case 0:case 11:case 14:case 15:zu(4,ie,ie.return);break;case 1:cl(ie,ie.return);var Ae=ie.stateNode;if(typeof Ae.componentWillUnmount=="function"){f=ie,u=ie.return;try{a=f,Ae.props=a.memoizedProps,Ae.state=a.memoizedState,Ae.componentWillUnmount()}catch(Ce){Jt(f,u,Ce)}}break;case 5:cl(ie,ie.return);break;case 22:if(ie.memoizedState!==null){vE(ae);continue}}ve!==null?(ve.return=ie,Se=ve):vE(ae)}oe=oe.sibling}e:for(oe=null,ae=s;;){if(ae.tag===5){if(oe===null){oe=ae;try{m=ae.stateNode,J?(_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(O=ae.stateNode,F=ae.memoizedProps.style,T=F!=null&&F.hasOwnProperty("display")?F.display:null,O.style.display=ws("display",T))}catch(Ce){Jt(s,s.return,Ce)}}}else if(ae.tag===6){if(oe===null)try{ae.stateNode.nodeValue=J?"":ae.memoizedProps}catch(Ce){Jt(s,s.return,Ce)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===s)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===s)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===s)break e;oe===ae&&(oe=null),ae=ae.return}oe===ae&&(oe=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:ri(a,s),Ti(s),f&4&&mE(s);break;case 21:break;default:ri(a,s),Ti(s)}}function Ti(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(dE(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(cr(m,""),f.flags&=-33);var _=fE(s);Dm(s,_,m);break;case 3:case 4:var T=f.stateNode.containerInfo,O=fE(s);bm(s,O,T);break;default:throw Error(t(161))}}catch(F){Jt(s,s.return,F)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function NC(s,a,u){Se=s,yE(s)}function yE(s,a,u){for(var f=(s.mode&1)!==0;Se!==null;){var m=Se,_=m.child;if(m.tag===22&&f){var T=m.memoizedState!==null||sd;if(!T){var O=m.alternate,F=O!==null&&O.memoizedState!==null||Mn;O=sd;var J=Mn;if(sd=T,(Mn=F)&&!J)for(Se=m;Se!==null;)T=Se,F=T.child,T.tag===22&&T.memoizedState!==null?wE(m):F!==null?(F.return=T,Se=F):wE(m);for(;_!==null;)Se=_,yE(_),_=_.sibling;Se=m,sd=O,Mn=J}_E(s)}else m.subtreeFlags&8772&&_!==null?(_.return=m,Se=_):_E(s)}}function _E(s){for(;Se!==null;){var a=Se;if(a.flags&8772){var u=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:Mn||od(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!Mn)if(u===null)f.componentDidMount();else{var m=a.elementType===a.type?u.memoizedProps:ti(a.type,u.memoizedProps);f.componentDidUpdate(m,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&vw(a,_,f);break;case 3:var T=a.updateQueue;if(T!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}vw(a,T,u)}break;case 5:var O=a.stateNode;if(u===null&&a.flags&4){u=O;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var J=a.alternate;if(J!==null){var oe=J.memoizedState;if(oe!==null){var ae=oe.dehydrated;ae!==null&&Jr(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Mn||a.flags&512&&km(a)}catch(ie){Jt(a,a.return,ie)}}if(a===s){Se=null;break}if(u=a.sibling,u!==null){u.return=a.return,Se=u;break}Se=a.return}}function vE(s){for(;Se!==null;){var a=Se;if(a===s){Se=null;break}var u=a.sibling;if(u!==null){u.return=a.return,Se=u;break}Se=a.return}}function wE(s){for(;Se!==null;){var a=Se;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{od(4,a)}catch(F){Jt(a,u,F)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var m=a.return;try{f.componentDidMount()}catch(F){Jt(a,m,F)}}var _=a.return;try{km(a)}catch(F){Jt(a,_,F)}break;case 5:var T=a.return;try{km(a)}catch(F){Jt(a,T,F)}}}catch(F){Jt(a,a.return,F)}if(a===s){Se=null;break}var O=a.sibling;if(O!==null){O.return=a.return,Se=O;break}Se=a.return}}var OC=Math.ceil,ad=H.ReactCurrentDispatcher,xm=H.ReactCurrentOwner,Fr=H.ReactCurrentBatchConfig,ut=0,yn=null,rn=null,Cn=0,_r=0,hl=Ls(0),dn=0,$u=null,Ko=0,ld=0,Nm=0,qu=null,nr=null,Om=0,dl=1/0,es=null,ud=!1,Vm=null,zs=null,cd=!1,$s=null,hd=0,Hu=0,Lm=null,dd=-1,fd=0;function $n(){return ut&6?mt():dd!==-1?dd:dd=mt()}function qs(s){return s.mode&1?ut&2&&Cn!==0?Cn&-Cn:yC.transition!==null?(fd===0&&(fd=Oo()),fd):(s=rt,s!==0||(s=window.event,s=s===void 0?16:vu(s.type)),s):1}function ii(s,a,u,f){if(50<Hu)throw Hu=0,Lm=null,Error(t(185));Cs(s,u,f),(!(ut&2)||s!==yn)&&(s===yn&&(!(ut&2)&&(ld|=u),dn===4&&Hs(s,Cn)),rr(s,f),u===1&&ut===0&&!(a.mode&1)&&(dl=mt()+500,jh&&Fs()))}function rr(s,a){var u=s.callbackNode;zi(s,a);var f=No(s,s===yn?Cn:0);if(f===0)u!==null&&Gr(u),s.callbackNode=null,s.callbackPriority=0;else if(a=f&-f,s.callbackPriority!==a){if(u!=null&&Gr(u),a===1)s.tag===0?gC(TE.bind(null,s)):aw(TE.bind(null,s)),dC(function(){!(ut&6)&&Fs()}),u=null;else{switch(bs(f)){case 1:u=Bn;break;case 4:u=dr;break;case 16:u=Sn;break;case 536870912:u=Ct;break;default:u=Sn}u=bE(u,EE.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function EE(s,a){if(dd=-1,fd=0,ut&6)throw Error(t(327));var u=s.callbackNode;if(fl()&&s.callbackNode!==u)return null;var f=No(s,s===yn?Cn:0);if(f===0)return null;if(f&30||f&s.expiredLanes||a)a=pd(s,f);else{a=f;var m=ut;ut|=2;var _=SE();(yn!==s||Cn!==a)&&(es=null,dl=mt()+500,Wo(s,a));do try{MC();break}catch(O){IE(s,O)}while(!0);em(),ad.current=_,ut=m,rn!==null?a=0:(yn=null,Cn=0,a=dn)}if(a!==0){if(a===2&&(m=fr(s),m!==0&&(f=m,a=Mm(s,m))),a===1)throw u=$u,Wo(s,0),Hs(s,f),rr(s,mt()),u;if(a===6)Hs(s,f);else{if(m=s.current.alternate,!(f&30)&&!VC(m)&&(a=pd(s,f),a===2&&(_=fr(s),_!==0&&(f=_,a=Mm(s,_))),a===1))throw u=$u,Wo(s,0),Hs(s,f),rr(s,mt()),u;switch(s.finishedWork=m,s.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:Qo(s,nr,es);break;case 3:if(Hs(s,f),(f&130023424)===f&&(a=Om+500-mt(),10<a)){if(No(s,0)!==0)break;if(m=s.suspendedLanes,(m&f)!==f){$n(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=$p(Qo.bind(null,s,nr,es),a);break}Qo(s,nr,es);break;case 4:if(Hs(s,f),(f&4194240)===f)break;for(a=s.eventTimes,m=-1;0<f;){var T=31-Yt(f);_=1<<T,T=a[T],T>m&&(m=T),f&=~_}if(f=m,f=mt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*OC(f/1960))-f,10<f){s.timeoutHandle=$p(Qo.bind(null,s,nr,es),f);break}Qo(s,nr,es);break;case 5:Qo(s,nr,es);break;default:throw Error(t(329))}}}return rr(s,mt()),s.callbackNode===u?EE.bind(null,s):null}function Mm(s,a){var u=qu;return s.current.memoizedState.isDehydrated&&(Wo(s,a).flags|=256),s=pd(s,a),s!==2&&(a=nr,nr=u,a!==null&&Fm(a)),s}function Fm(s){nr===null?nr=s:nr.push.apply(nr,s)}function VC(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var m=u[f],_=m.getSnapshot;m=m.value;try{if(!Zr(_(),m))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Hs(s,a){for(a&=~Nm,a&=~ld,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-Yt(a),f=1<<u;s[u]=-1,a&=~f}}function TE(s){if(ut&6)throw Error(t(327));fl();var a=No(s,0);if(!(a&1))return rr(s,mt()),null;var u=pd(s,a);if(s.tag!==0&&u===2){var f=fr(s);f!==0&&(a=f,u=Mm(s,f))}if(u===1)throw u=$u,Wo(s,0),Hs(s,a),rr(s,mt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Qo(s,nr,es),rr(s,mt()),null}function Um(s,a){var u=ut;ut|=1;try{return s(a)}finally{ut=u,ut===0&&(dl=mt()+500,jh&&Fs())}}function Go(s){$s!==null&&$s.tag===0&&!(ut&6)&&fl();var a=ut;ut|=1;var u=Fr.transition,f=rt;try{if(Fr.transition=null,rt=1,s)return s()}finally{rt=f,Fr.transition=u,ut=a,!(ut&6)&&Fs()}}function Bm(){_r=hl.current,Ot(hl)}function Wo(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,hC(u)),rn!==null)for(u=rn.return;u!==null;){var f=u;switch(Qp(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Uh();break;case 3:ll(),Ot(Zn),Ot(On),lm();break;case 5:om(f);break;case 4:ll();break;case 13:Ot(qt);break;case 19:Ot(qt);break;case 10:tm(f.type._context);break;case 22:case 23:Bm()}u=u.return}if(yn=s,rn=s=Ks(s.current,null),Cn=_r=a,dn=0,$u=null,Nm=ld=Ko=0,nr=qu=null,$o!==null){for(a=0;a<$o.length;a++)if(u=$o[a],f=u.interleaved,f!==null){u.interleaved=null;var m=f.next,_=u.pending;if(_!==null){var T=_.next;_.next=m,f.next=T}u.pending=f}$o=null}return s}function IE(s,a){do{var u=rn;try{if(em(),Jh.current=td,Xh){for(var f=Ht.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}Xh=!1}if(Ho=0,gn=hn=Ht=null,Mu=!1,Fu=0,xm.current=null,u===null||u.return===null){dn=1,$u=a,rn=null;break}e:{var _=s,T=u.return,O=u,F=a;if(a=Cn,O.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var J=F,oe=O,ae=oe.tag;if(!(oe.mode&1)&&(ae===0||ae===11||ae===15)){var ie=oe.alternate;ie?(oe.updateQueue=ie.updateQueue,oe.memoizedState=ie.memoizedState,oe.lanes=ie.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var ve=Ww(T);if(ve!==null){ve.flags&=-257,Qw(ve,T,O,_,a),ve.mode&1&&Gw(_,J,a),a=ve,F=J;var Ae=a.updateQueue;if(Ae===null){var Ce=new Set;Ce.add(F),a.updateQueue=Ce}else Ae.add(F);break e}else{if(!(a&1)){Gw(_,J,a),jm();break e}F=Error(t(426))}}else if(Ut&&O.mode&1){var Xt=Ww(T);if(Xt!==null){!(Xt.flags&65536)&&(Xt.flags|=256),Qw(Xt,T,O,_,a),Xp(ul(F,O));break e}}_=F=ul(F,O),dn!==4&&(dn=2),qu===null?qu=[_]:qu.push(_),_=T;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var K=Hw(_,F,a);_w(_,K);break e;case 1:O=F;var U=_.type,Q=_.stateNode;if(!(_.flags&128)&&(typeof U.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(zs===null||!zs.has(Q)))){_.flags|=65536,a&=-a,_.lanes|=a;var he=Kw(_,O,a);_w(_,he);break e}}_=_.return}while(_!==null)}AE(u)}catch(De){a=De,rn===u&&u!==null&&(rn=u=u.return);continue}break}while(!0)}function SE(){var s=ad.current;return ad.current=td,s===null?td:s}function jm(){(dn===0||dn===3||dn===2)&&(dn=4),yn===null||!(Ko&268435455)&&!(ld&268435455)||Hs(yn,Cn)}function pd(s,a){var u=ut;ut|=2;var f=SE();(yn!==s||Cn!==a)&&(es=null,Wo(s,a));do try{LC();break}catch(m){IE(s,m)}while(!0);if(em(),ut=u,ad.current=f,rn!==null)throw Error(t(261));return yn=null,Cn=0,dn}function LC(){for(;rn!==null;)RE(rn)}function MC(){for(;rn!==null&&!Wn();)RE(rn)}function RE(s){var a=kE(s.alternate,s,_r);s.memoizedProps=s.pendingProps,a===null?AE(s):rn=a,xm.current=null}function AE(s){var a=s;do{var u=a.alternate;if(s=a.return,a.flags&32768){if(u=bC(u,a),u!==null){u.flags&=32767,rn=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{dn=6,rn=null;return}}else if(u=kC(u,a,_r),u!==null){rn=u;return}if(a=a.sibling,a!==null){rn=a;return}rn=a=s}while(a!==null);dn===0&&(dn=5)}function Qo(s,a,u){var f=rt,m=Fr.transition;try{Fr.transition=null,rt=1,FC(s,a,u,f)}finally{Fr.transition=m,rt=f}return null}function FC(s,a,u,f){do fl();while($s!==null);if(ut&6)throw Error(t(327));u=s.finishedWork;var m=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var _=u.lanes|u.childLanes;if(kt(s,_),s===yn&&(rn=yn=null,Cn=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||cd||(cd=!0,bE(Sn,function(){return fl(),null})),_=(u.flags&15990)!==0,u.subtreeFlags&15990||_){_=Fr.transition,Fr.transition=null;var T=rt;rt=1;var O=ut;ut|=4,xm.current=null,xC(s,u),gE(u,s),iC(jp),xs=!!Bp,jp=Bp=null,s.current=u,NC(u),Qn(),ut=O,rt=T,Fr.transition=_}else s.current=u;if(cd&&(cd=!1,$s=s,hd=m),_=s.pendingLanes,_===0&&(zs=null),xt(u.stateNode),rr(s,mt()),a!==null)for(f=s.onRecoverableError,u=0;u<a.length;u++)m=a[u],f(m.value,{componentStack:m.stack,digest:m.digest});if(ud)throw ud=!1,s=Vm,Vm=null,s;return hd&1&&s.tag!==0&&fl(),_=s.pendingLanes,_&1?s===Lm?Hu++:(Hu=0,Lm=s):Hu=0,Fs(),null}function fl(){if($s!==null){var s=bs(hd),a=Fr.transition,u=rt;try{if(Fr.transition=null,rt=16>s?16:s,$s===null)var f=!1;else{if(s=$s,$s=null,hd=0,ut&6)throw Error(t(331));var m=ut;for(ut|=4,Se=s.current;Se!==null;){var _=Se,T=_.child;if(Se.flags&16){var O=_.deletions;if(O!==null){for(var F=0;F<O.length;F++){var J=O[F];for(Se=J;Se!==null;){var oe=Se;switch(oe.tag){case 0:case 11:case 15:zu(8,oe,_)}var ae=oe.child;if(ae!==null)ae.return=oe,Se=ae;else for(;Se!==null;){oe=Se;var ie=oe.sibling,ve=oe.return;if(hE(oe),oe===J){Se=null;break}if(ie!==null){ie.return=ve,Se=ie;break}Se=ve}}}var Ae=_.alternate;if(Ae!==null){var Ce=Ae.child;if(Ce!==null){Ae.child=null;do{var Xt=Ce.sibling;Ce.sibling=null,Ce=Xt}while(Ce!==null)}}Se=_}}if(_.subtreeFlags&2064&&T!==null)T.return=_,Se=T;else e:for(;Se!==null;){if(_=Se,_.flags&2048)switch(_.tag){case 0:case 11:case 15:zu(9,_,_.return)}var K=_.sibling;if(K!==null){K.return=_.return,Se=K;break e}Se=_.return}}var U=s.current;for(Se=U;Se!==null;){T=Se;var Q=T.child;if(T.subtreeFlags&2064&&Q!==null)Q.return=T,Se=Q;else e:for(T=U;Se!==null;){if(O=Se,O.flags&2048)try{switch(O.tag){case 0:case 11:case 15:od(9,O)}}catch(De){Jt(O,O.return,De)}if(O===T){Se=null;break e}var he=O.sibling;if(he!==null){he.return=O.return,Se=he;break e}Se=O.return}}if(ut=m,Fs(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Yn,s)}catch{}f=!0}return f}finally{rt=u,Fr.transition=a}}return!1}function PE(s,a,u){a=ul(u,a),a=Hw(s,a,1),s=Bs(s,a,1),a=$n(),s!==null&&(Cs(s,1,a),rr(s,a))}function Jt(s,a,u){if(s.tag===3)PE(s,s,u);else for(;a!==null;){if(a.tag===3){PE(a,s,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(zs===null||!zs.has(f))){s=ul(u,s),s=Kw(a,s,1),a=Bs(a,s,1),s=$n(),a!==null&&(Cs(a,1,s),rr(a,s));break}}a=a.return}}function UC(s,a,u){var f=s.pingCache;f!==null&&f.delete(a),a=$n(),s.pingedLanes|=s.suspendedLanes&u,yn===s&&(Cn&u)===u&&(dn===4||dn===3&&(Cn&130023424)===Cn&&500>mt()-Om?Wo(s,0):Nm|=u),rr(s,a)}function CE(s,a){a===0&&(s.mode&1?(a=La,La<<=1,!(La&130023424)&&(La=4194304)):a=1);var u=$n();s=Ji(s,a),s!==null&&(Cs(s,a,u),rr(s,u))}function BC(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),CE(s,u)}function jC(s,a){var u=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(u=m.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),CE(s,u)}var kE;kE=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||Zn.current)tr=!0;else{if(!(s.lanes&u)&&!(a.flags&128))return tr=!1,CC(s,a,u);tr=!!(s.flags&131072)}else tr=!1,Ut&&a.flags&1048576&&lw(a,$h,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;id(s,a),s=a.pendingProps;var m=tl(a,On.current);al(a,u),m=hm(null,a,f,s,m,u);var _=dm();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,er(f)?(_=!0,Bh(a)):_=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,im(a),m.updater=nd,a.stateNode=m,m._reactInternals=a,_m(a,f,s,u),a=Tm(null,a,f,!0,_,u)):(a.tag=0,Ut&&_&&Wp(a),zn(null,a,m,u),a=a.child),a;case 16:f=a.elementType;e:{switch(id(s,a),s=a.pendingProps,m=f._init,f=m(f._payload),a.type=f,m=a.tag=$C(f),s=ti(f,s),m){case 0:a=Em(null,a,f,s,u);break e;case 1:a=tE(null,a,f,s,u);break e;case 11:a=Yw(null,a,f,s,u);break e;case 14:a=Jw(null,a,f,ti(f.type,s),u);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:ti(f,m),Em(s,a,f,m,u);case 1:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:ti(f,m),tE(s,a,f,m,u);case 3:e:{if(nE(a),s===null)throw Error(t(387));f=a.pendingProps,_=a.memoizedState,m=_.element,yw(s,a),Qh(a,f,null,u);var T=a.memoizedState;if(f=T.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){m=ul(Error(t(423)),a),a=rE(s,a,f,u,m);break e}else if(f!==m){m=ul(Error(t(424)),a),a=rE(s,a,f,u,m);break e}else for(yr=Vs(a.stateNode.containerInfo.firstChild),gr=a,Ut=!0,ei=null,u=mw(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(il(),f===m){a=Zi(s,a,u);break e}zn(s,a,f,u)}a=a.child}return a;case 5:return ww(a),s===null&&Jp(a),f=a.type,m=a.pendingProps,_=s!==null?s.memoizedProps:null,T=m.children,zp(f,m)?T=null:_!==null&&zp(f,_)&&(a.flags|=32),eE(s,a),zn(s,a,T,u),a.child;case 6:return s===null&&Jp(a),null;case 13:return iE(s,a,u);case 4:return sm(a,a.stateNode.containerInfo),f=a.pendingProps,s===null?a.child=sl(a,null,f,u):zn(s,a,f,u),a.child;case 11:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:ti(f,m),Yw(s,a,f,m,u);case 7:return zn(s,a,a.pendingProps,u),a.child;case 8:return zn(s,a,a.pendingProps.children,u),a.child;case 12:return zn(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(f=a.type._context,m=a.pendingProps,_=a.memoizedProps,T=m.value,bt(Kh,f._currentValue),f._currentValue=T,_!==null)if(Zr(_.value,T)){if(_.children===m.children&&!Zn.current){a=Zi(s,a,u);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var O=_.dependencies;if(O!==null){T=_.child;for(var F=O.firstContext;F!==null;){if(F.context===f){if(_.tag===1){F=Xi(-1,u&-u),F.tag=2;var J=_.updateQueue;if(J!==null){J=J.shared;var oe=J.pending;oe===null?F.next=F:(F.next=oe.next,oe.next=F),J.pending=F}}_.lanes|=u,F=_.alternate,F!==null&&(F.lanes|=u),nm(_.return,u,a),O.lanes|=u;break}F=F.next}}else if(_.tag===10)T=_.type===a.type?null:_.child;else if(_.tag===18){if(T=_.return,T===null)throw Error(t(341));T.lanes|=u,O=T.alternate,O!==null&&(O.lanes|=u),nm(T,u,a),T=_.sibling}else T=_.child;if(T!==null)T.return=_;else for(T=_;T!==null;){if(T===a){T=null;break}if(_=T.sibling,_!==null){_.return=T.return,T=_;break}T=T.return}_=T}zn(s,a,m.children,u),a=a.child}return a;case 9:return m=a.type,f=a.pendingProps.children,al(a,u),m=Lr(m),f=f(m),a.flags|=1,zn(s,a,f,u),a.child;case 14:return f=a.type,m=ti(f,a.pendingProps),m=ti(f.type,m),Jw(s,a,f,m,u);case 15:return Xw(s,a,a.type,a.pendingProps,u);case 17:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:ti(f,m),id(s,a),a.tag=1,er(f)?(s=!0,Bh(a)):s=!1,al(a,u),$w(a,f,m),_m(a,f,m,u),Tm(null,a,f,!0,s,u);case 19:return oE(s,a,u);case 22:return Zw(s,a,u)}throw Error(t(156,a.tag))};function bE(s,a){return hr(s,a)}function zC(s,a,u,f){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(s,a,u,f){return new zC(s,a,u,f)}function zm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function $C(s){if(typeof s=="function")return zm(s)?1:0;if(s!=null){if(s=s.$$typeof,s===L)return 11;if(s===st)return 14}return 2}function Ks(s,a){var u=s.alternate;return u===null?(u=Ur(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function md(s,a,u,f,m,_){var T=2;if(f=s,typeof s=="function")zm(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case P:return Yo(u.children,m,_,a);case S:T=8,m|=8;break;case R:return s=Ur(12,u,a,m|2),s.elementType=R,s.lanes=_,s;case C:return s=Ur(13,u,a,m),s.elementType=C,s.lanes=_,s;case pe:return s=Ur(19,u,a,m),s.elementType=pe,s.lanes=_,s;case Le:return gd(u,m,_,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:T=10;break e;case N:T=9;break e;case L:T=11;break e;case st:T=14;break e;case yt:T=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=Ur(T,u,a,m),a.elementType=s,a.type=f,a.lanes=_,a}function Yo(s,a,u,f){return s=Ur(7,s,f,a),s.lanes=u,s}function gd(s,a,u,f){return s=Ur(22,s,f,a),s.elementType=Le,s.lanes=u,s.stateNode={isHidden:!1},s}function $m(s,a,u){return s=Ur(6,s,null,a),s.lanes=u,s}function qm(s,a,u){return a=Ur(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function qC(s,a,u,f,m){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ps(0),this.expirationTimes=Ps(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ps(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Hm(s,a,u,f,m,_,T,O,F){return s=new qC(s,a,u,O,F),a===1?(a=1,_===!0&&(a|=8)):a=0,_=Ur(3,null,null,a),s.current=_,_.stateNode=s,_.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},im(_),s}function HC(s,a,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:b,key:f==null?null:""+f,children:s,containerInfo:a,implementation:u}}function DE(s){if(!s)return Ms;s=s._reactInternals;e:{if(qe(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(er(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(er(u))return sw(s,u,a)}return a}function xE(s,a,u,f,m,_,T,O,F){return s=Hm(u,f,!0,s,m,_,T,O,F),s.context=DE(null),u=s.current,f=$n(),m=qs(u),_=Xi(f,m),_.callback=a??null,Bs(u,_,m),s.current.lanes=m,Cs(s,m,f),rr(s,f),s}function yd(s,a,u,f){var m=a.current,_=$n(),T=qs(m);return u=DE(u),a.context===null?a.context=u:a.pendingContext=u,a=Xi(_,T),a.payload={element:s},f=f===void 0?null:f,f!==null&&(a.callback=f),s=Bs(m,a,T),s!==null&&(ii(s,m,T,_),Wh(s,m,T)),T}function _d(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function NE(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Km(s,a){NE(s,a),(s=s.alternate)&&NE(s,a)}var OE=typeof reportError=="function"?reportError:function(s){console.error(s)};function Gm(s){this._internalRoot=s}vd.prototype.render=Gm.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));yd(s,a,null,null)},vd.prototype.unmount=Gm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Go(function(){yd(null,s,null,null)}),a[Gi]=null}};function vd(s){this._internalRoot=s}vd.prototype.unstable_scheduleHydration=function(s){if(s){var a=vh();s={blockedOn:null,target:s,priority:a};for(var u=0;u<mi.length&&a!==0&&a<mi[u].priority;u++);mi.splice(u,0,s),u===0&&Th(s)}};function Wm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function wd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function VE(){}function KC(s,a,u,f,m){if(m){if(typeof f=="function"){var _=f;f=function(){var J=_d(T);_.call(J)}}var T=xE(a,f,s,0,null,!1,!1,"",VE);return s._reactRootContainer=T,s[Gi]=T.current,ku(s.nodeType===8?s.parentNode:s),Go(),T}for(;m=s.lastChild;)s.removeChild(m);if(typeof f=="function"){var O=f;f=function(){var J=_d(F);O.call(J)}}var F=Hm(s,0,!1,null,null,!1,!1,"",VE);return s._reactRootContainer=F,s[Gi]=F.current,ku(s.nodeType===8?s.parentNode:s),Go(function(){yd(a,F,u,f)}),F}function Ed(s,a,u,f,m){var _=u._reactRootContainer;if(_){var T=_;if(typeof m=="function"){var O=m;m=function(){var F=_d(T);O.call(F)}}yd(a,T,s,m)}else T=KC(u,a,s,m,f);return _d(T)}yh=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=As(a.pendingLanes);u!==0&&(ks(a,u|1),rr(a,mt()),!(ut&6)&&(dl=mt()+500,Fs()))}break;case 13:Go(function(){var f=Ji(s,1);if(f!==null){var m=$n();ii(f,s,1,m)}}),Km(s,1)}},Ma=function(s){if(s.tag===13){var a=Ji(s,134217728);if(a!==null){var u=$n();ii(a,s,134217728,u)}Km(s,134217728)}},_h=function(s){if(s.tag===13){var a=qs(s),u=Ji(s,a);if(u!==null){var f=$n();ii(u,s,a,f)}Km(s,a)}},vh=function(){return rt},wh=function(s,a){var u=rt;try{return rt=s,a()}finally{rt=u}},hi=function(s,a,u){switch(a){case"input":if(Co(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==s&&f.form===s.form){var m=Fh(f);if(!m)throw Error(t(90));Qt(f),Co(f,m)}}}break;case"textarea":Pr(s,u);break;case"select":a=u.value,a!=null&&Hr(s,!!u.multiple,a,!1)}},Dr=Um,di=Go;var GC={usingClientEntryPoint:!1,Events:[xu,Za,Fh,br,Ss,Um]},Ku={findFiberByHostInstance:Uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WC={bundleType:Ku.bundleType,version:Ku.version,rendererPackageName:Ku.rendererPackageName,rendererConfig:Ku.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=et(s),s===null?null:s.stateNode},findFiberByHostInstance:Ku.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Td.isDisabled&&Td.supportsFiber)try{Yn=Td.inject(WC),un=Td}catch{}}return ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GC,ir.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wm(a))throw Error(t(200));return HC(s,a,null,u)},ir.createRoot=function(s,a){if(!Wm(s))throw Error(t(299));var u=!1,f="",m=OE;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=Hm(s,1,!1,null,null,u,!1,f,m),s[Gi]=a.current,ku(s.nodeType===8?s.parentNode:s),new Gm(a)},ir.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=et(a),s=s===null?null:s.stateNode,s},ir.flushSync=function(s){return Go(s)},ir.hydrate=function(s,a,u){if(!wd(a))throw Error(t(200));return Ed(null,s,a,!0,u)},ir.hydrateRoot=function(s,a,u){if(!Wm(s))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,m=!1,_="",T=OE;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),a=xE(a,null,s,1,u??null,m,!1,_,T),s[Gi]=a.current,ku(s),f)for(s=0;s<f.length;s++)u=f[s],m=u._getVersion,m=m(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,m]:a.mutableSourceEagerHydrationData.push(u,m);return new vd(a)},ir.render=function(s,a,u){if(!wd(a))throw Error(t(200));return Ed(null,s,a,!1,u)},ir.unmountComponentAtNode=function(s){if(!wd(s))throw Error(t(40));return s._reactRootContainer?(Go(function(){Ed(null,null,s,!1,function(){s._reactRootContainer=null,s[Gi]=null})}),!0):!1},ir.unstable_batchedUpdates=Um,ir.unstable_renderSubtreeIntoContainer=function(s,a,u,f){if(!wd(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Ed(s,a,u,!1,f)},ir.version="18.3.1-next-f1338f8080-20240426",ir}var $E;function cS(){if($E)return Jm.exports;$E=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jm.exports=ik(),Jm.exports}var qE;function sk(){if(qE)return Id;qE=1;var n=cS();return Id.createRoot=n.createRoot,Id.hydrateRoot=n.hydrateRoot,Id}var ok=sk();const ak=Ra(ok);var Un=function(){return Un=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Un.apply(this,arguments)};function Ul(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var eg,HE;function lk(){return HE||(HE=1,eg=function(e,t,r,i){var o=r?r.call(i,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var l=Object.keys(e),c=Object.keys(t);if(l.length!==c.length)return!1;for(var h=Object.prototype.hasOwnProperty.bind(t),p=0;p<l.length;p++){var g=l[p];if(!h(g))return!1;var v=e[g],E=t[g];if(o=r?r.call(i,v,E,g):void 0,o===!1||o===void 0&&v!==E)return!1}return!0}),eg}var uk=lk();const hS=Ra(uk);var Vt="-ms-",yc="-moz-",gt="-webkit-",dS="comm",jf="rule",Zy="decl",ck="@import",fS="@keyframes",hk="@layer",pS=Math.abs,e_=String.fromCharCode,ry=Object.assign;function dk(n,e){return wn(n,0)^45?(((e<<2^wn(n,0))<<2^wn(n,1))<<2^wn(n,2))<<2^wn(n,3):0}function mS(n){return n.trim()}function ts(n,e){return(n=e.exec(n))?n[0]:n}function Qe(n,e,t){return n.replace(e,t)}function Fd(n,e,t){return n.indexOf(e,t)}function wn(n,e){return n.charCodeAt(e)|0}function Bl(n,e,t){return n.slice(e,t)}function Ai(n){return n.length}function gS(n){return n.length}function lc(n,e){return e.push(n),n}function fk(n,e){return n.map(e).join("")}function KE(n,e){return n.filter(function(t){return!ts(t,e)})}var zf=1,jl=1,yS=0,zr=0,an=0,su="";function $f(n,e,t,r,i,o,l,c){return{value:n,root:e,parent:t,type:r,props:i,children:o,line:zf,column:jl,length:l,return:"",siblings:c}}function Zs(n,e){return ry($f("",null,null,"",null,null,0,n.siblings),n,{length:-n.length},e)}function pl(n){for(;n.root;)n=Zs(n.root,{children:[n]});lc(n,n.siblings)}function pk(){return an}function mk(){return an=zr>0?wn(su,--zr):0,jl--,an===10&&(jl=1,zf--),an}function ai(){return an=zr<yS?wn(su,zr++):0,jl++,an===10&&(jl=1,zf++),an}function ua(){return wn(su,zr)}function Ud(){return zr}function qf(n,e){return Bl(su,n,e)}function iy(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function gk(n){return zf=jl=1,yS=Ai(su=n),zr=0,[]}function yk(n){return su="",n}function tg(n){return mS(qf(zr-1,sy(n===91?n+2:n===40?n+1:n)))}function _k(n){for(;(an=ua())&&an<33;)ai();return iy(n)>2||iy(an)>3?"":" "}function vk(n,e){for(;--e&&ai()&&!(an<48||an>102||an>57&&an<65||an>70&&an<97););return qf(n,Ud()+(e<6&&ua()==32&&ai()==32))}function sy(n){for(;ai();)switch(an){case n:return zr;case 34:case 39:n!==34&&n!==39&&sy(an);break;case 40:n===41&&sy(n);break;case 92:ai();break}return zr}function wk(n,e){for(;ai()&&n+an!==57;)if(n+an===84&&ua()===47)break;return"/*"+qf(e,zr-1)+"*"+e_(n===47?n:ai())}function Ek(n){for(;!iy(ua());)ai();return qf(n,zr)}function Tk(n){return yk(Bd("",null,null,null,[""],n=gk(n),0,[0],n))}function Bd(n,e,t,r,i,o,l,c,h){for(var p=0,g=0,v=l,E=0,I=0,D=0,x=1,V=1,G=1,$=0,j="",H=i,re=o,b=r,P=j;V;)switch(D=$,$=ai()){case 40:if(D!=108&&wn(P,v-1)==58){Fd(P+=Qe(tg($),"&","&\f"),"&\f",pS(p?c[p-1]:0))!=-1&&(G=-1);break}case 34:case 39:case 91:P+=tg($);break;case 9:case 10:case 13:case 32:P+=_k(D);break;case 92:P+=vk(Ud()-1,7);continue;case 47:switch(ua()){case 42:case 47:lc(Ik(wk(ai(),Ud()),e,t,h),h);break;default:P+="/"}break;case 123*x:c[p++]=Ai(P)*G;case 125*x:case 59:case 0:switch($){case 0:case 125:V=0;case 59+g:G==-1&&(P=Qe(P,/\f/g,"")),I>0&&Ai(P)-v&&lc(I>32?WE(P+";",r,t,v-1,h):WE(Qe(P," ","")+";",r,t,v-2,h),h);break;case 59:P+=";";default:if(lc(b=GE(P,e,t,p,g,i,c,j,H=[],re=[],v,o),o),$===123)if(g===0)Bd(P,e,b,b,H,o,v,c,re);else switch(E===99&&wn(P,3)===110?100:E){case 100:case 108:case 109:case 115:Bd(n,b,b,r&&lc(GE(n,b,b,0,0,i,c,j,i,H=[],v,re),re),i,re,v,c,r?H:re);break;default:Bd(P,b,b,b,[""],re,0,c,re)}}p=g=I=0,x=G=1,j=P="",v=l;break;case 58:v=1+Ai(P),I=D;default:if(x<1){if($==123)--x;else if($==125&&x++==0&&mk()==125)continue}switch(P+=e_($),$*x){case 38:G=g>0?1:(P+="\f",-1);break;case 44:c[p++]=(Ai(P)-1)*G,G=1;break;case 64:ua()===45&&(P+=tg(ai())),E=ua(),g=v=Ai(j=P+=Ek(Ud())),$++;break;case 45:D===45&&Ai(P)==2&&(x=0)}}return o}function GE(n,e,t,r,i,o,l,c,h,p,g,v){for(var E=i-1,I=i===0?o:[""],D=gS(I),x=0,V=0,G=0;x<r;++x)for(var $=0,j=Bl(n,E+1,E=pS(V=l[x])),H=n;$<D;++$)(H=mS(V>0?I[$]+" "+j:Qe(j,/&\f/g,I[$])))&&(h[G++]=H);return $f(n,e,t,i===0?jf:c,h,p,g,v)}function Ik(n,e,t,r){return $f(n,e,t,dS,e_(pk()),Bl(n,2,-2),0,r)}function WE(n,e,t,r,i){return $f(n,e,t,Zy,Bl(n,0,r),Bl(n,r+1,-1),r,i)}function _S(n,e,t){switch(dk(n,e)){case 5103:return gt+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return gt+n+n;case 4789:return yc+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return gt+n+yc+n+Vt+n+n;case 5936:switch(wn(n,e+11)){case 114:return gt+n+Vt+Qe(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return gt+n+Vt+Qe(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return gt+n+Vt+Qe(n,/[svh]\w+-[tblr]{2}/,"lr")+n}case 6828:case 4268:case 2903:return gt+n+Vt+n+n;case 6165:return gt+n+Vt+"flex-"+n+n;case 5187:return gt+n+Qe(n,/(\w+).+(:[^]+)/,gt+"box-$1$2"+Vt+"flex-$1$2")+n;case 5443:return gt+n+Vt+"flex-item-"+Qe(n,/flex-|-self/g,"")+(ts(n,/flex-|baseline/)?"":Vt+"grid-row-"+Qe(n,/flex-|-self/g,""))+n;case 4675:return gt+n+Vt+"flex-line-pack"+Qe(n,/align-content|flex-|-self/g,"")+n;case 5548:return gt+n+Vt+Qe(n,"shrink","negative")+n;case 5292:return gt+n+Vt+Qe(n,"basis","preferred-size")+n;case 6060:return gt+"box-"+Qe(n,"-grow","")+gt+n+Vt+Qe(n,"grow","positive")+n;case 4554:return gt+Qe(n,/([^-])(transform)/g,"$1"+gt+"$2")+n;case 6187:return Qe(Qe(Qe(n,/(zoom-|grab)/,gt+"$1"),/(image-set)/,gt+"$1"),n,"")+n;case 5495:case 3959:return Qe(n,/(image-set\([^]*)/,gt+"$1$`$1");case 4968:return Qe(Qe(n,/(.+:)(flex-)?(.*)/,gt+"box-pack:$3"+Vt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+gt+n+n;case 4200:if(!ts(n,/flex-|baseline/))return Vt+"grid-column-align"+Bl(n,e)+n;break;case 2592:case 3360:return Vt+Qe(n,"template-","")+n;case 4384:case 3616:return t&&t.some(function(r,i){return e=i,ts(r.props,/grid-\w+-end/)})?~Fd(n+(t=t[e].value),"span",0)?n:Vt+Qe(n,"-start","")+n+Vt+"grid-row-span:"+(~Fd(t,"span",0)?ts(t,/\d+/):+ts(t,/\d+/)-+ts(n,/\d+/))+";":Vt+Qe(n,"-start","")+n;case 4896:case 4128:return t&&t.some(function(r){return ts(r.props,/grid-\w+-start/)})?n:Vt+Qe(Qe(n,"-end","-span"),"span ","")+n;case 4095:case 3583:case 4068:case 2532:return Qe(n,/(.+)-inline(.+)/,gt+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ai(n)-1-e>6)switch(wn(n,e+1)){case 109:if(wn(n,e+4)!==45)break;case 102:return Qe(n,/(.+:)(.+)-([^]+)/,"$1"+gt+"$2-$3$1"+yc+(wn(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~Fd(n,"stretch",0)?_S(Qe(n,"stretch","fill-available"),e,t)+n:n}break;case 5152:case 5920:return Qe(n,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,o,l,c,h,p){return Vt+i+":"+o+p+(l?Vt+i+"-span:"+(c?h:+h-+o)+p:"")+n});case 4949:if(wn(n,e+6)===121)return Qe(n,":",":"+gt)+n;break;case 6444:switch(wn(n,wn(n,14)===45?18:11)){case 120:return Qe(n,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+gt+(wn(n,14)===45?"inline-":"")+"box$3$1"+gt+"$2$3$1"+Vt+"$2box$3")+n;case 100:return Qe(n,":",":"+Vt)+n}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Qe(n,"scroll-","scroll-snap-")+n}return n}function af(n,e){for(var t="",r=0;r<n.length;r++)t+=e(n[r],r,n,e)||"";return t}function Sk(n,e,t,r){switch(n.type){case hk:if(n.children.length)break;case ck:case Zy:return n.return=n.return||n.value;case dS:return"";case fS:return n.return=n.value+"{"+af(n.children,r)+"}";case jf:if(!Ai(n.value=n.props.join(",")))return""}return Ai(t=af(n.children,r))?n.return=n.value+"{"+t+"}":""}function Rk(n){var e=gS(n);return function(t,r,i,o){for(var l="",c=0;c<e;c++)l+=n[c](t,r,i,o)||"";return l}}function Ak(n){return function(e){e.root||(e=e.return)&&n(e)}}function Pk(n,e,t,r){if(n.length>-1&&!n.return)switch(n.type){case Zy:n.return=_S(n.value,n.length,t);return;case fS:return af([Zs(n,{value:Qe(n.value,"@","@"+gt)})],r);case jf:if(n.length)return fk(t=n.props,function(i){switch(ts(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":pl(Zs(n,{props:[Qe(i,/:(read-\w+)/,":"+yc+"$1")]})),pl(Zs(n,{props:[i]})),ry(n,{props:KE(t,r)});break;case"::placeholder":pl(Zs(n,{props:[Qe(i,/:(plac\w+)/,":"+gt+"input-$1")]})),pl(Zs(n,{props:[Qe(i,/:(plac\w+)/,":"+yc+"$1")]})),pl(Zs(n,{props:[Qe(i,/:(plac\w+)/,Vt+"input-$1")]})),pl(Zs(n,{props:[i]})),ry(n,{props:KE(t,r)});break}return""})}}var Ck={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},wr={},zl=typeof process<"u"&&wr!==void 0&&(wr.REACT_APP_SC_ATTR||wr.SC_ATTR)||"data-styled",vS="active",wS="data-styled-version",Hf="6.1.15",t_=`/*!sc*/
`,lf=typeof window<"u"&&"HTMLElement"in window,kk=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&wr!==void 0&&wr.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&wr.REACT_APP_SC_DISABLE_SPEEDY!==""?wr.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&wr.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&wr!==void 0&&wr.SC_DISABLE_SPEEDY!==void 0&&wr.SC_DISABLE_SPEEDY!==""&&wr.SC_DISABLE_SPEEDY!=="false"&&wr.SC_DISABLE_SPEEDY),bk={},Kf=Object.freeze([]),$l=Object.freeze({});function ES(n,e,t){return t===void 0&&(t=$l),n.theme!==t.theme&&n.theme||e||t.theme}var TS=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Dk=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,xk=/(^-|-$)/g;function QE(n){return n.replace(Dk,"-").replace(xk,"")}var Nk=/(a)(d)/gi,Sd=52,YE=function(n){return String.fromCharCode(n+(n>25?39:97))};function oy(n){var e,t="";for(e=Math.abs(n);e>Sd;e=e/Sd|0)t=YE(e%Sd)+t;return(YE(e%Sd)+t).replace(Nk,"$1-$2")}var ng,IS=5381,kl=function(n,e){for(var t=e.length;t;)n=33*n^e.charCodeAt(--t);return n},SS=function(n){return kl(IS,n)};function n_(n){return oy(SS(n)>>>0)}function Ok(n){return n.displayName||n.name||"Component"}function rg(n){return typeof n=="string"&&!0}var RS=typeof Symbol=="function"&&Symbol.for,AS=RS?Symbol.for("react.memo"):60115,Vk=RS?Symbol.for("react.forward_ref"):60112,Lk={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Mk={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},PS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Fk=((ng={})[Vk]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ng[AS]=PS,ng);function JE(n){return("type"in(e=n)&&e.type.$$typeof)===AS?PS:"$$typeof"in n?Fk[n.$$typeof]:Lk;var e}var Uk=Object.defineProperty,Bk=Object.getOwnPropertyNames,XE=Object.getOwnPropertySymbols,jk=Object.getOwnPropertyDescriptor,zk=Object.getPrototypeOf,ZE=Object.prototype;function CS(n,e,t){if(typeof e!="string"){if(ZE){var r=zk(e);r&&r!==ZE&&CS(n,r,t)}var i=Bk(e);XE&&(i=i.concat(XE(e)));for(var o=JE(n),l=JE(e),c=0;c<i.length;++c){var h=i[c];if(!(h in Mk||t&&t[h]||l&&h in l||o&&h in o)){var p=jk(e,h);try{Uk(n,h,p)}catch{}}}}return n}function ql(n){return typeof n=="function"}function r_(n){return typeof n=="object"&&"styledComponentId"in n}function oa(n,e){return n&&e?"".concat(n," ").concat(e):n||e||""}function uf(n,e){if(n.length===0)return"";for(var t=n[0],r=1;r<n.length;r++)t+=n[r];return t}function Pc(n){return n!==null&&typeof n=="object"&&n.constructor.name===Object.name&&!("props"in n&&n.$$typeof)}function ay(n,e,t){if(t===void 0&&(t=!1),!t&&!Pc(n)&&!Array.isArray(n))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)n[r]=ay(n[r],e[r]);else if(Pc(e))for(var r in e)n[r]=ay(n[r],e[r]);return n}function i_(n,e){Object.defineProperty(n,"toString",{value:e})}function Qc(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(n," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var $k=function(){function n(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return n.prototype.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},n.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,o=i;e>=o;)if((o<<=1)<0)throw Qc(16,"".concat(e));this.groupSizes=new Uint32Array(o),this.groupSizes.set(r),this.length=o;for(var l=i;l<o;l++)this.groupSizes[l]=0}for(var c=this.indexOfGroup(e+1),h=(l=0,t.length);l<h;l++)this.tag.insertRule(c,t[l])&&(this.groupSizes[e]++,c++)},n.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),i=r+t;this.groupSizes[e]=0;for(var o=r;o<i;o++)this.tag.deleteRule(r)}},n.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),o=i+r,l=i;l<o;l++)t+="".concat(this.tag.getRule(l)).concat(t_);return t},n}(),jd=new Map,cf=new Map,zd=1,Rd=function(n){if(jd.has(n))return jd.get(n);for(;cf.has(zd);)zd++;var e=zd++;return jd.set(n,e),cf.set(e,n),e},qk=function(n,e){zd=e+1,jd.set(n,e),cf.set(e,n)},Hk="style[".concat(zl,"][").concat(wS,'="').concat(Hf,'"]'),Kk=new RegExp("^".concat(zl,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Gk=function(n,e,t){for(var r,i=t.split(","),o=0,l=i.length;o<l;o++)(r=i[o])&&n.registerName(e,r)},Wk=function(n,e){for(var t,r=((t=e.textContent)!==null&&t!==void 0?t:"").split(t_),i=[],o=0,l=r.length;o<l;o++){var c=r[o].trim();if(c){var h=c.match(Kk);if(h){var p=0|parseInt(h[1],10),g=h[2];p!==0&&(qk(g,p),Gk(n,g,h[3]),n.getTag().insertRules(p,i)),i.length=0}else i.push(c)}}},e0=function(n){for(var e=document.querySelectorAll(Hk),t=0,r=e.length;t<r;t++){var i=e[t];i&&i.getAttribute(zl)!==vS&&(Wk(n,i),i.parentNode&&i.parentNode.removeChild(i))}};function Qk(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var kS=function(n){var e=document.head,t=n||e,r=document.createElement("style"),i=function(c){var h=Array.from(c.querySelectorAll("style[".concat(zl,"]")));return h[h.length-1]}(t),o=i!==void 0?i.nextSibling:null;r.setAttribute(zl,vS),r.setAttribute(wS,Hf);var l=Qk();return l&&r.setAttribute("nonce",l),t.insertBefore(r,o),r},Yk=function(){function n(e){this.element=kS(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var r=document.styleSheets,i=0,o=r.length;i<o;i++){var l=r[i];if(l.ownerNode===t)return l}throw Qc(17)}(this.element),this.length=0}return n.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},n.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},n}(),Jk=function(){function n(e){this.element=kS(e),this.nodes=this.element.childNodes,this.length=0}return n.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},n.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},n}(),Xk=function(){function n(e){this.rules=[],this.length=0}return n.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},n.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},n}(),t0=lf,Zk={isServer:!lf,useCSSOMInjection:!kk},hf=function(){function n(e,t,r){e===void 0&&(e=$l),t===void 0&&(t={});var i=this;this.options=Un(Un({},Zk),e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&lf&&t0&&(t0=!1,e0(this)),i_(this,function(){return function(o){for(var l=o.getTag(),c=l.length,h="",p=function(v){var E=function(G){return cf.get(G)}(v);if(E===void 0)return"continue";var I=o.names.get(E),D=l.getGroup(v);if(I===void 0||!I.size||D.length===0)return"continue";var x="".concat(zl,".g").concat(v,'[id="').concat(E,'"]'),V="";I!==void 0&&I.forEach(function(G){G.length>0&&(V+="".concat(G,","))}),h+="".concat(D).concat(x,'{content:"').concat(V,'"}').concat(t_)},g=0;g<c;g++)p(g);return h}(i)})}return n.registerId=function(e){return Rd(e)},n.prototype.rehydrate=function(){!this.server&&lf&&e0(this)},n.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new n(Un(Un({},this.options),e),this.gs,t&&this.names||void 0)},n.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.prototype.getTag=function(){return this.tag||(this.tag=(e=function(t){var r=t.useCSSOMInjection,i=t.target;return t.isServer?new Xk(i):r?new Yk(i):new Jk(i)}(this.options),new $k(e)));var e},n.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},n.prototype.registerName=function(e,t){if(Rd(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},n.prototype.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(Rd(e),r)},n.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.prototype.clearRules=function(e){this.getTag().clearGroup(Rd(e)),this.clearNames(e)},n.prototype.clearTag=function(){this.tag=void 0},n}(),eb=/&/g,tb=/^\s*\/\/.*$/gm;function bS(n,e){return n.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=bS(t.children,e)),t})}function DS(n){var e,t,r,i=n===void 0?$l:n,o=i.options,l=o===void 0?$l:o,c=i.plugins,h=c===void 0?Kf:c,p=function(E,I,D){return D.startsWith(t)&&D.endsWith(t)&&D.replaceAll(t,"").length>0?".".concat(e):E},g=h.slice();g.push(function(E){E.type===jf&&E.value.includes("&")&&(E.props[0]=E.props[0].replace(eb,t).replace(r,p))}),l.prefix&&g.push(Pk),g.push(Sk);var v=function(E,I,D,x){I===void 0&&(I=""),D===void 0&&(D=""),x===void 0&&(x="&"),e=x,t=I,r=new RegExp("\\".concat(t,"\\b"),"g");var V=E.replace(tb,""),G=Tk(D||I?"".concat(D," ").concat(I," { ").concat(V," }"):V);l.namespace&&(G=bS(G,l.namespace));var $=[];return af(G,Rk(g.concat(Ak(function(j){return $.push(j)})))),$};return v.hash=h.length?h.reduce(function(E,I){return I.name||Qc(15),kl(E,I.name)},IS).toString():"",v}var nb=new hf,ly=DS(),s_=ze.createContext({shouldForwardProp:void 0,styleSheet:nb,stylis:ly});s_.Consumer;var rb=ze.createContext(void 0);function df(){return X.useContext(s_)}function ib(n){var e=X.useState(n.stylisPlugins),t=e[0],r=e[1],i=df().styleSheet,o=X.useMemo(function(){var h=i;return n.sheet?h=n.sheet:n.target&&(h=h.reconstructWithOptions({target:n.target},!1)),n.disableCSSOMInjection&&(h=h.reconstructWithOptions({useCSSOMInjection:!1})),h},[n.disableCSSOMInjection,n.sheet,n.target,i]),l=X.useMemo(function(){return DS({options:{namespace:n.namespace,prefix:n.enableVendorPrefixes},plugins:t})},[n.enableVendorPrefixes,n.namespace,t]);X.useEffect(function(){hS(t,n.stylisPlugins)||r(n.stylisPlugins)},[n.stylisPlugins]);var c=X.useMemo(function(){return{shouldForwardProp:n.shouldForwardProp,styleSheet:o,stylis:l}},[n.shouldForwardProp,o,l]);return ze.createElement(s_.Provider,{value:c},ze.createElement(rb.Provider,{value:l},n.children))}var xS=function(){function n(e,t){var r=this;this.inject=function(i,o){o===void 0&&(o=ly);var l=r.name+o.hash;i.hasNameForId(r.id,l)||i.insertRules(r.id,l,o(r.rules,l,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,i_(this,function(){throw Qc(12,String(r.name))})}return n.prototype.getName=function(e){return e===void 0&&(e=ly),this.name+e.hash},n}(),sb=function(n){return n>="A"&&n<="Z"};function n0(n){for(var e="",t=0;t<n.length;t++){var r=n[t];if(t===1&&r==="-"&&n[0]==="-")return n;sb(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var NS=function(n){return n==null||n===!1||n===""},OS=function(n){var e,t,r=[];for(var i in n){var o=n[i];n.hasOwnProperty(i)&&!NS(o)&&(Array.isArray(o)&&o.isCss||ql(o)?r.push("".concat(n0(i),":"),o,";"):Pc(o)?r.push.apply(r,Ul(Ul(["".concat(i," {")],OS(o),!1),["}"],!1)):r.push("".concat(n0(i),": ").concat((e=i,(t=o)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in Ck||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return r};function uo(n,e,t,r){if(NS(n))return[];if(r_(n))return[".".concat(n.styledComponentId)];if(ql(n)){if(!ql(o=n)||o.prototype&&o.prototype.isReactComponent||!e)return[n];var i=n(e);return uo(i,e,t,r)}var o;return n instanceof xS?t?(n.inject(t,r),[n.getName(r)]):[n]:Pc(n)?OS(n):Array.isArray(n)?Array.prototype.concat.apply(Kf,n.map(function(l){return uo(l,e,t,r)})):[n.toString()]}function VS(n){for(var e=0;e<n.length;e+=1){var t=n[e];if(ql(t)&&!r_(t))return!1}return!0}var ob=SS(Hf),ab=function(){function n(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&VS(e),this.componentId=t,this.baseHash=kl(ob,t),this.baseStyle=r,hf.registerId(t)}return n.prototype.generateAndInjectStyles=function(e,t,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=oa(i,this.staticRulesId);else{var o=uf(uo(this.rules,e,t,r)),l=oy(kl(this.baseHash,o)>>>0);if(!t.hasNameForId(this.componentId,l)){var c=r(o,".".concat(l),void 0,this.componentId);t.insertRules(this.componentId,l,c)}i=oa(i,l),this.staticRulesId=l}else{for(var h=kl(this.baseHash,r.hash),p="",g=0;g<this.rules.length;g++){var v=this.rules[g];if(typeof v=="string")p+=v;else if(v){var E=uf(uo(v,e,t,r));h=kl(h,E+g),p+=E}}if(p){var I=oy(h>>>0);t.hasNameForId(this.componentId,I)||t.insertRules(this.componentId,I,r(p,".".concat(I),void 0,this.componentId)),i=oa(i,I)}}return i},n}(),o_=ze.createContext(void 0);o_.Consumer;var ig={};function lb(n,e,t){var r=r_(n),i=n,o=!rg(n),l=e.attrs,c=l===void 0?Kf:l,h=e.componentId,p=h===void 0?function(H,re){var b=typeof H!="string"?"sc":QE(H);ig[b]=(ig[b]||0)+1;var P="".concat(b,"-").concat(n_(Hf+b+ig[b]));return re?"".concat(re,"-").concat(P):P}(e.displayName,e.parentComponentId):h,g=e.displayName,v=g===void 0?function(H){return rg(H)?"styled.".concat(H):"Styled(".concat(Ok(H),")")}(n):g,E=e.displayName&&e.componentId?"".concat(QE(e.displayName),"-").concat(e.componentId):e.componentId||p,I=r&&i.attrs?i.attrs.concat(c).filter(Boolean):c,D=e.shouldForwardProp;if(r&&i.shouldForwardProp){var x=i.shouldForwardProp;if(e.shouldForwardProp){var V=e.shouldForwardProp;D=function(H,re){return x(H,re)&&V(H,re)}}else D=x}var G=new ab(t,E,r?i.componentStyle:void 0);function $(H,re){return function(b,P,S){var R=b.attrs,k=b.componentStyle,N=b.defaultProps,L=b.foldedComponentIds,C=b.styledComponentId,pe=b.target,st=ze.useContext(o_),yt=df(),Le=b.shouldForwardProp||yt.shouldForwardProp,ce=ES(P,st,N)||$l,_e=function(Ve,Be,je){for(var $e,Ge=Un(Un({},Be),{className:void 0,theme:je}),St=0;St<Ve.length;St+=1){var pt=ql($e=Ve[St])?$e(Ge):$e;for(var Qt in pt)Ge[Qt]=Qt==="className"?oa(Ge[Qt],pt[Qt]):Qt==="style"?Un(Un({},Ge[Qt]),pt[Qt]):pt[Qt]}return Be.className&&(Ge.className=oa(Ge.className,Be.className)),Ge}(R,P,ce),de=_e.as||pe,B={};for(var te in _e)_e[te]===void 0||te[0]==="$"||te==="as"||te==="theme"&&_e.theme===ce||(te==="forwardedAs"?B.as=_e.forwardedAs:Le&&!Le(te,de)||(B[te]=_e[te]));var we=function(Ve,Be){var je=df(),$e=Ve.generateAndInjectStyles(Be,je.styleSheet,je.stylis);return $e}(k,_e),Oe=oa(L,C);return we&&(Oe+=" "+we),_e.className&&(Oe+=" "+_e.className),B[rg(de)&&!TS.has(de)?"class":"className"]=Oe,S&&(B.ref=S),X.createElement(de,B)}(j,H,re)}$.displayName=v;var j=ze.forwardRef($);return j.attrs=I,j.componentStyle=G,j.displayName=v,j.shouldForwardProp=D,j.foldedComponentIds=r?oa(i.foldedComponentIds,i.styledComponentId):"",j.styledComponentId=E,j.target=r?i.target:n,Object.defineProperty(j,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(H){this._foldedDefaultProps=r?function(re){for(var b=[],P=1;P<arguments.length;P++)b[P-1]=arguments[P];for(var S=0,R=b;S<R.length;S++)ay(re,R[S],!0);return re}({},i.defaultProps,H):H}}),i_(j,function(){return".".concat(j.styledComponentId)}),o&&CS(j,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),j}function r0(n,e){for(var t=[n[0]],r=0,i=e.length;r<i;r+=1)t.push(e[r],n[r+1]);return t}var i0=function(n){return Object.assign(n,{isCss:!0})};function a_(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(ql(n)||Pc(n))return i0(uo(r0(Kf,Ul([n],e,!0))));var r=n;return e.length===0&&r.length===1&&typeof r[0]=="string"?uo(r):i0(uo(r0(r,e)))}function uy(n,e,t){if(t===void 0&&(t=$l),!e)throw Qc(1,e);var r=function(i){for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];return n(e,t,a_.apply(void 0,Ul([i],o,!1)))};return r.attrs=function(i){return uy(n,e,Un(Un({},t),{attrs:Array.prototype.concat(t.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return uy(n,e,Un(Un({},t),i))},r}var LS=function(n){return uy(lb,n)},Aa=LS;TS.forEach(function(n){Aa[n]=LS(n)});var ub=function(){function n(e,t){this.rules=e,this.componentId=t,this.isStatic=VS(e),hf.registerId(this.componentId+1)}return n.prototype.createStyles=function(e,t,r,i){var o=i(uf(uo(this.rules,t,r,i)),""),l=this.componentId+e;r.insertRules(l,l,o)},n.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},n.prototype.renderStyles=function(e,t,r,i){e>2&&hf.registerId(this.componentId+e),this.removeStyles(e,r),this.createStyles(e,t,r,i)},n}();function cb(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=a_.apply(void 0,Ul([n],e,!1)),i="sc-global-".concat(n_(JSON.stringify(r))),o=new ub(r,i),l=function(h){var p=df(),g=ze.useContext(o_),v=ze.useRef(p.styleSheet.allocateGSInstance(i)).current;return p.styleSheet.server&&c(v,h,p.styleSheet,g,p.stylis),ze.useLayoutEffect(function(){if(!p.styleSheet.server)return c(v,h,p.styleSheet,g,p.stylis),function(){return o.removeStyles(v,p.styleSheet)}},[v,h,p.styleSheet,g,p.stylis]),null};function c(h,p,g,v,E){if(o.isStatic)o.renderStyles(h,bk,g,E);else{var I=Un(Un({},p),{theme:ES(p,v,l.defaultProps)});o.renderStyles(h,I,g,E)}}return ze.memo(l)}function MS(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=uf(a_.apply(void 0,Ul([n],e,!1))),i=n_(r);return new xS(i,r)}var sg,s0;function hb(){if(s0)return sg;s0=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(o,l){if(o===l)return!0;if(o&&l&&typeof o=="object"&&typeof l=="object"){if(o.constructor!==l.constructor)return!1;var c,h,p;if(Array.isArray(o)){if(c=o.length,c!=l.length)return!1;for(h=c;h--!==0;)if(!i(o[h],l[h]))return!1;return!0}var g;if(e&&o instanceof Map&&l instanceof Map){if(o.size!==l.size)return!1;for(g=o.entries();!(h=g.next()).done;)if(!l.has(h.value[0]))return!1;for(g=o.entries();!(h=g.next()).done;)if(!i(h.value[1],l.get(h.value[0])))return!1;return!0}if(t&&o instanceof Set&&l instanceof Set){if(o.size!==l.size)return!1;for(g=o.entries();!(h=g.next()).done;)if(!l.has(h.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(l)){if(c=o.length,c!=l.length)return!1;for(h=c;h--!==0;)if(o[h]!==l[h])return!1;return!0}if(o.constructor===RegExp)return o.source===l.source&&o.flags===l.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof l.valueOf=="function")return o.valueOf()===l.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof l.toString=="function")return o.toString()===l.toString();if(p=Object.keys(o),c=p.length,c!==Object.keys(l).length)return!1;for(h=c;h--!==0;)if(!Object.prototype.hasOwnProperty.call(l,p[h]))return!1;if(n&&o instanceof Element)return!1;for(h=c;h--!==0;)if(!((p[h]==="_owner"||p[h]==="__v"||p[h]==="__o")&&o.$$typeof)&&!i(o[p[h]],l[p[h]]))return!1;return!0}return o!==o&&l!==l}return sg=function(l,c){try{return i(l,c)}catch(h){if((h.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw h}},sg}var db=hb();const fb=Ra(db);var og,o0;function pb(){if(o0)return og;o0=1;var n=function(e,t,r,i,o,l,c,h){if(!e){var p;if(t===void 0)p=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var g=[r,i,o,l,c,h],v=0;p=new Error(t.replace(/%s/g,function(){return g[v++]})),p.name="Invariant Violation"}throw p.framesToPop=1,p}};return og=n,og}var mb=pb();const a0=Ra(mb);var FS=(n=>(n.BASE="base",n.BODY="body",n.HEAD="head",n.HTML="html",n.LINK="link",n.META="meta",n.NOSCRIPT="noscript",n.SCRIPT="script",n.STYLE="style",n.TITLE="title",n.FRAGMENT="Symbol(react.fragment)",n))(FS||{}),ag={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},l0=Object.values(FS),l_={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},gb=Object.entries(l_).reduce((n,[e,t])=>(n[t]=e,n),{}),oi="data-rh",xl={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Nl=(n,e)=>{for(let t=n.length-1;t>=0;t-=1){const r=n[t];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},yb=n=>{let e=Nl(n,"title");const t=Nl(n,xl.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),t&&e)return t.replace(/%s/g,()=>e);const r=Nl(n,xl.DEFAULT_TITLE);return e||r||void 0},_b=n=>Nl(n,xl.ON_CHANGE_CLIENT_STATE)||(()=>{}),lg=(n,e)=>e.filter(t=>typeof t[n]<"u").map(t=>t[n]).reduce((t,r)=>({...t,...r}),{}),vb=(n,e)=>e.filter(t=>typeof t.base<"u").map(t=>t.base).reverse().reduce((t,r)=>{if(!t.length){const i=Object.keys(r);for(let o=0;o<i.length;o+=1){const c=i[o].toLowerCase();if(n.indexOf(c)!==-1&&r[c])return t.concat(r)}}return t},[]),wb=n=>console&&typeof console.warn=="function"&&console.warn(n),Wu=(n,e,t)=>{const r={};return t.filter(i=>Array.isArray(i[n])?!0:(typeof i[n]<"u"&&wb(`Helmet: ${n} should be of type "Array". Instead found type "${typeof i[n]}"`),!1)).map(i=>i[n]).reverse().reduce((i,o)=>{const l={};o.filter(h=>{let p;const g=Object.keys(h);for(let E=0;E<g.length;E+=1){const I=g[E],D=I.toLowerCase();e.indexOf(D)!==-1&&!(p==="rel"&&h[p].toLowerCase()==="canonical")&&!(D==="rel"&&h[D].toLowerCase()==="stylesheet")&&(p=D),e.indexOf(I)!==-1&&(I==="innerHTML"||I==="cssText"||I==="itemprop")&&(p=I)}if(!p||!h[p])return!1;const v=h[p].toLowerCase();return r[p]||(r[p]={}),l[p]||(l[p]={}),r[p][v]?!1:(l[p][v]=!0,!0)}).reverse().forEach(h=>i.push(h));const c=Object.keys(l);for(let h=0;h<c.length;h+=1){const p=c[h],g={...r[p],...l[p]};r[p]=g}return i},[]).reverse()},Eb=(n,e)=>{if(Array.isArray(n)&&n.length){for(let t=0;t<n.length;t+=1)if(n[t][e])return!0}return!1},Tb=n=>({baseTag:vb(["href"],n),bodyAttributes:lg("bodyAttributes",n),defer:Nl(n,xl.DEFER),encode:Nl(n,xl.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:lg("htmlAttributes",n),linkTags:Wu("link",["rel","href"],n),metaTags:Wu("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:Wu("noscript",["innerHTML"],n),onChangeClientState:_b(n),scriptTags:Wu("script",["src","innerHTML"],n),styleTags:Wu("style",["cssText"],n),title:yb(n),titleAttributes:lg("titleAttributes",n),prioritizeSeoTags:Eb(n,xl.PRIORITIZE_SEO_TAGS)}),US=n=>Array.isArray(n)?n.join(""):n,Ib=(n,e)=>{const t=Object.keys(n);for(let r=0;r<t.length;r+=1)if(e[t[r]]&&e[t[r]].includes(n[t[r]]))return!0;return!1},ug=(n,e)=>Array.isArray(n)?n.reduce((t,r)=>(Ib(r,e)?t.priority.push(r):t.default.push(r),t),{priority:[],default:[]}):{default:n,priority:[]},u0=(n,e)=>({...n,[e]:void 0}),Sb=["noscript","script","style"],cy=(n,e=!0)=>e===!1?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),BS=n=>Object.keys(n).reduce((e,t)=>{const r=typeof n[t]<"u"?`${t}="${n[t]}"`:`${t}`;return e?`${e} ${r}`:r},""),Rb=(n,e,t,r)=>{const i=BS(t),o=US(e);return i?`<${n} ${oi}="true" ${i}>${cy(o,r)}</${n}>`:`<${n} ${oi}="true">${cy(o,r)}</${n}>`},Ab=(n,e,t=!0)=>e.reduce((r,i)=>{const o=i,l=Object.keys(o).filter(p=>!(p==="innerHTML"||p==="cssText")).reduce((p,g)=>{const v=typeof o[g]>"u"?g:`${g}="${cy(o[g],t)}"`;return p?`${p} ${v}`:v},""),c=o.innerHTML||o.cssText||"",h=Sb.indexOf(n)===-1;return`${r}<${n} ${oi}="true" ${l}${h?"/>":`>${c}</${n}>`}`},""),jS=(n,e={})=>Object.keys(n).reduce((t,r)=>{const i=l_[r];return t[i||r]=n[r],t},e),Pb=(n,e,t)=>{const r={key:e,[oi]:!0},i=jS(t,r);return[ze.createElement("title",i,e)]},$d=(n,e)=>e.map((t,r)=>{const i={key:r,[oi]:!0};return Object.keys(t).forEach(o=>{const c=l_[o]||o;if(c==="innerHTML"||c==="cssText"){const h=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:h}}else i[c]=t[o]}),ze.createElement(n,i)}),Br=(n,e,t=!0)=>{switch(n){case"title":return{toComponent:()=>Pb(n,e.title,e.titleAttributes),toString:()=>Rb(n,e.title,e.titleAttributes,t)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>jS(e),toString:()=>BS(e)};default:return{toComponent:()=>$d(n,e),toString:()=>Ab(n,e,t)}}},Cb=({metaTags:n,linkTags:e,scriptTags:t,encode:r})=>{const i=ug(n,ag.meta),o=ug(e,ag.link),l=ug(t,ag.script);return{priorityMethods:{toComponent:()=>[...$d("meta",i.priority),...$d("link",o.priority),...$d("script",l.priority)],toString:()=>`${Br("meta",i.priority,r)} ${Br("link",o.priority,r)} ${Br("script",l.priority,r)}`},metaTags:i.default,linkTags:o.default,scriptTags:l.default}},kb=n=>{const{baseTag:e,bodyAttributes:t,encode:r=!0,htmlAttributes:i,noscriptTags:o,styleTags:l,title:c="",titleAttributes:h,prioritizeSeoTags:p}=n;let{linkTags:g,metaTags:v,scriptTags:E}=n,I={toComponent:()=>{},toString:()=>""};return p&&({priorityMethods:I,linkTags:g,metaTags:v,scriptTags:E}=Cb(n)),{priority:I,base:Br("base",e,r),bodyAttributes:Br("bodyAttributes",t,r),htmlAttributes:Br("htmlAttributes",i,r),link:Br("link",g,r),meta:Br("meta",v,r),noscript:Br("noscript",o,r),script:Br("script",E,r),style:Br("style",l,r),title:Br("title",{title:c,titleAttributes:h},r)}},zS=kb,Ad=[],$S=!!(typeof window<"u"&&window.document&&window.document.createElement),hy=class{constructor(n,e){Ii(this,"instances",[]);Ii(this,"canUseDOM",$S);Ii(this,"context");Ii(this,"value",{setHelmet:n=>{this.context.helmet=n},helmetInstances:{get:()=>this.canUseDOM?Ad:this.instances,add:n=>{(this.canUseDOM?Ad:this.instances).push(n)},remove:n=>{const e=(this.canUseDOM?Ad:this.instances).indexOf(n);(this.canUseDOM?Ad:this.instances).splice(e,1)}}});this.context=n,this.canUseDOM=e||!1,e||(n.helmet=zS({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},bb={},qS=ze.createContext(bb),la,HS=(la=class extends X.Component{constructor(t){super(t);Ii(this,"helmetData");this.helmetData=new hy(this.props.context||{},la.canUseDOM)}render(){return ze.createElement(qS.Provider,{value:this.helmetData.value},this.props.children)}},Ii(la,"canUseDOM",$S),la),ml=(n,e)=>{const t=document.head||document.querySelector("head"),r=t.querySelectorAll(`${n}[${oi}]`),i=[].slice.call(r),o=[];let l;return e&&e.length&&e.forEach(c=>{const h=document.createElement(n);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p))if(p==="innerHTML")h.innerHTML=c.innerHTML;else if(p==="cssText")h.styleSheet?h.styleSheet.cssText=c.cssText:h.appendChild(document.createTextNode(c.cssText));else{const g=p,v=typeof c[g]>"u"?"":c[g];h.setAttribute(p,v)}h.setAttribute(oi,"true"),i.some((p,g)=>(l=g,h.isEqualNode(p)))?i.splice(l,1):o.push(h)}),i.forEach(c=>{var h;return(h=c.parentNode)==null?void 0:h.removeChild(c)}),o.forEach(c=>t.appendChild(c)),{oldTags:i,newTags:o}},dy=(n,e)=>{const t=document.getElementsByTagName(n)[0];if(!t)return;const r=t.getAttribute(oi),i=r?r.split(","):[],o=[...i],l=Object.keys(e);for(const c of l){const h=e[c]||"";t.getAttribute(c)!==h&&t.setAttribute(c,h),i.indexOf(c)===-1&&i.push(c);const p=o.indexOf(c);p!==-1&&o.splice(p,1)}for(let c=o.length-1;c>=0;c-=1)t.removeAttribute(o[c]);i.length===o.length?t.removeAttribute(oi):t.getAttribute(oi)!==l.join(",")&&t.setAttribute(oi,l.join(","))},Db=(n,e)=>{typeof n<"u"&&document.title!==n&&(document.title=US(n)),dy("title",e)},c0=(n,e)=>{const{baseTag:t,bodyAttributes:r,htmlAttributes:i,linkTags:o,metaTags:l,noscriptTags:c,onChangeClientState:h,scriptTags:p,styleTags:g,title:v,titleAttributes:E}=n;dy("body",r),dy("html",i),Db(v,E);const I={baseTag:ml("base",t),linkTags:ml("link",o),metaTags:ml("meta",l),noscriptTags:ml("noscript",c),scriptTags:ml("script",p),styleTags:ml("style",g)},D={},x={};Object.keys(I).forEach(V=>{const{newTags:G,oldTags:$}=I[V];G.length&&(D[V]=G),$.length&&(x[V]=I[V].oldTags)}),e&&e(),h(n,D,x)},Qu=null,xb=n=>{Qu&&cancelAnimationFrame(Qu),n.defer?Qu=requestAnimationFrame(()=>{c0(n,()=>{Qu=null})}):(c0(n),Qu=null)},Nb=xb,h0=class extends X.Component{constructor(){super(...arguments);Ii(this,"rendered",!1)}shouldComponentUpdate(e){return!hS(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let r=null;const i=Tb(e.get().map(o=>{const l={...o.props};return delete l.context,l}));HS.canUseDOM?Nb(i):r=zS(i),t(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},ny,F2=(ny=class extends X.Component{shouldComponentUpdate(n){return!fb(u0(this.props,"helmetData"),u0(n,"helmetData"))}mapNestedChildrenToProps(n,e){if(!e)return null;switch(n.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(n,e,t,r){return{...e,[n.type]:[...e[n.type]||[],{...t,...this.mapNestedChildrenToProps(n,r)}]}}mapObjectTypeChildren(n,e,t,r){switch(n.type){case"title":return{...e,[n.type]:r,titleAttributes:{...t}};case"body":return{...e,bodyAttributes:{...t}};case"html":return{...e,htmlAttributes:{...t}};default:return{...e,[n.type]:{...t}}}}mapArrayTypeChildrenToProps(n,e){let t={...e};return Object.keys(n).forEach(r=>{t={...t,[r]:n[r]}}),t}warnOnInvalidChildren(n,e){return a0(l0.some(t=>n.type===t),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${l0.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`),a0(!e||typeof e=="string"||Array.isArray(e)&&!e.some(t=>typeof t!="string"),`Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(n,e){let t={};return ze.Children.forEach(n,r=>{if(!r||!r.props)return;const{children:i,...o}=r.props,l=Object.keys(o).reduce((h,p)=>(h[gb[p]||p]=o[p],h),{});let{type:c}=r;switch(typeof c=="symbol"?c=c.toString():this.warnOnInvalidChildren(r,i),c){case"Symbol(react.fragment)":e=this.mapChildrenToProps(i,e);break;case"link":case"meta":case"noscript":case"script":case"style":t=this.flattenArrayTypeChildren(r,t,l,i);break;default:e=this.mapObjectTypeChildren(r,e,l,i);break}}),this.mapArrayTypeChildrenToProps(t,e)}render(){const{children:n,...e}=this.props;let t={...e},{helmetData:r}=e;if(n&&(t=this.mapChildrenToProps(n,t)),r&&!(r instanceof hy)){const i=r;r=new hy(i.context,!0),delete t.helmetData}return r?ze.createElement(h0,{...t,context:r.value}):ze.createElement(qS.Consumer,null,i=>ze.createElement(h0,{...t,context:i}))}},Ii(ny,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),ny);const d0=["#FF9A8B","#FF6A88","#FF99AC","#FFB2C1","#FEC8D8","#A9BAD8","#6EC3F4","#B9BEFF","#69D2E7","#A7DBD8","#E0E4CC","#F38630","#FA6900","#FE4365","#FC9D9A"];class Ob{constructor(){Ii(this,"speed",1)}generatePoints(e,t){const r=[];for(let i=0;i<e;i++)r.push({x:Math.random()*t.width,y:Math.random()*t.height,vx:(Math.random()-.5)*this.speed,vy:(Math.random()-.5)*this.speed,color:d0[Math.floor(Math.random()*d0.length)],radius:Math.random()*150+100});return r}updatePointsPosition(e,t){return e.map(r=>{const i={...r};return i.x+=r.vx,i.y+=r.vy,(i.x<0||i.x>t.width)&&(i.vx*=-1),(i.y<0||i.y>t.height)&&(i.vy*=-1),i})}}const Vb=()=>{const n=X.useRef(null),e=new Ob;return X.useEffect(()=>{const t=n.current;if(!t)return;const r=t.getContext("2d");if(!r)return;const i=()=>{t.width=window.innerWidth,t.height=window.innerHeight};i();let o=e.generatePoints(35,{width:t.width,height:t.height});const l=h=>{const p=r.createRadialGradient(h.x,h.y,0,h.x,h.y,h.radius);p.addColorStop(0,h.color),p.addColorStop(1,"rgba(255, 255, 255, 0)"),r.fillStyle=p,r.beginPath(),r.arc(h.x,h.y,h.radius,0,Math.PI*2,!1),r.fill()},c=()=>{r.clearRect(0,0,t.width,t.height),o=e.updatePointsPosition(o,{width:t.width,height:t.height}),o.forEach(l),requestAnimationFrame(c)};return c(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),le.jsx("canvas",{ref:n,style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:-1}})};var f0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Lb=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],c=n[t++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},GS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,c=l?n[i+1]:0,h=i+2<n.length,p=h?n[i+2]:0,g=o>>2,v=(o&3)<<4|c>>4;let E=(c&15)<<2|p>>6,I=p&63;h||(I=64,l||(E=64)),r.push(t[g],t[v],t[E],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(KS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Lb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const v=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||p==null||v==null)throw new Mb;const E=o<<2|c>>4;if(r.push(E),p!==64){const I=c<<4&240|p>>2;if(r.push(I),v!==64){const D=p<<6&192|v;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Mb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fb=function(n){const e=KS(n);return GS.encodeByteArray(e,!0)},ff=function(n){return Fb(n).replace(/\./g,"")},WS=function(n){try{return GS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=()=>Ub().__FIREBASE_DEFAULTS__,jb=()=>{if(typeof process>"u"||typeof f0>"u")return;const n=f0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&WS(n[1]);return e&&JSON.parse(e)},Gf=()=>{try{return Bb()||jb()||zb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},QS=n=>{var e,t;return(t=(e=Gf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},u_=n=>{const e=QS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},YS=()=>{var n;return(n=Gf())===null||n===void 0?void 0:n.config},JS=n=>{var e;return(e=Gf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $b=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ff(JSON.stringify(t)),ff(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function Hb(){var n;const e=(n=Gf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function Kb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Gb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Wb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qb(){const n=fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ZS(){return!Hb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eR(){try{return typeof indexedDB=="object"}catch{return!1}}function Yb(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="FirebaseError";class ci extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Jb,Object.setPrototypeOf(this,ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yc.prototype.create)}}class Yc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?Xb(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new ci(i,c,r)}}function Xb(n,e){return n.replace(Zb,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Zb=/\{\$([^}]+)}/g;function eD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Cc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(p0(o)&&p0(l)){if(!Cc(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function p0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function cc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function tD(n,e){const t=new nD(n,e);return t.subscribe.bind(t)}class nD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");rD(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=cg),i.error===void 0&&(i.error=cg),i.complete===void 0&&(i.complete=cg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function cg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(n){return n&&n._delegate?n._delegate:n}class hs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new $b;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oD(e))try{this.getOrInitializeService({instanceIdentifier:Xo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xo){return this.instances.has(e)}getOptions(e=Xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xo){return this.component?this.component.multipleInstances?e:Xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sD(n){return n===Xo?void 0:n}function oD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new iD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(tt||(tt={}));const lD={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},uD=tt.INFO,cD={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},hD=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=cD[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class c_{constructor(e){this.name=e,this._logLevel=uD,this._logHandler=hD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const dD=(n,e)=>e.some(t=>n instanceof t);let m0,g0;function fD(){return m0||(m0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pD(){return g0||(g0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tR=new WeakMap,fy=new WeakMap,nR=new WeakMap,hg=new WeakMap,h_=new WeakMap;function mD(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(co(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&tR.set(t,n)}).catch(()=>{}),h_.set(e,n),e}function gD(n){if(fy.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});fy.set(n,e)}let py={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return fy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return co(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function yD(n){py=n(py)}function _D(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(dg(this),e,...t);return nR.set(r,e.sort?e.sort():[e]),co(r)}:pD().includes(n)?function(...e){return n.apply(dg(this),e),co(tR.get(this))}:function(...e){return co(n.apply(dg(this),e))}}function vD(n){return typeof n=="function"?_D(n):(n instanceof IDBTransaction&&gD(n),dD(n,fD())?new Proxy(n,py):n)}function co(n){if(n instanceof IDBRequest)return mD(n);if(hg.has(n))return hg.get(n);const e=vD(n);return e!==n&&(hg.set(n,e),h_.set(e,n)),e}const dg=n=>h_.get(n);function wD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),c=co(l);return r&&l.addEventListener("upgradeneeded",h=>{r(co(l.result),h.oldVersion,h.newVersion,co(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const ED=["get","getKey","getAll","getAllKeys","count"],TD=["put","add","delete","clear"],fg=new Map;function y0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(fg.get(e))return fg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=TD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ED.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,i?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),i&&h.done]))[0]};return fg.set(e,o),o}yD(n=>({...n,get:(e,t,r)=>y0(e,t)||n.get(e,t,r),has:(e,t)=>!!y0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(SD(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function SD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const my="@firebase/app",_0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new c_("@firebase/app"),RD="@firebase/app-compat",AD="@firebase/analytics-compat",PD="@firebase/analytics",CD="@firebase/app-check-compat",kD="@firebase/app-check",bD="@firebase/auth",DD="@firebase/auth-compat",xD="@firebase/database",ND="@firebase/data-connect",OD="@firebase/database-compat",VD="@firebase/functions",LD="@firebase/functions-compat",MD="@firebase/installations",FD="@firebase/installations-compat",UD="@firebase/messaging",BD="@firebase/messaging-compat",jD="@firebase/performance",zD="@firebase/performance-compat",$D="@firebase/remote-config",qD="@firebase/remote-config-compat",HD="@firebase/storage",KD="@firebase/storage-compat",GD="@firebase/firestore",WD="@firebase/vertexai-preview",QD="@firebase/firestore-compat",YD="firebase",JD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="[DEFAULT]",XD={[my]:"fire-core",[RD]:"fire-core-compat",[PD]:"fire-analytics",[AD]:"fire-analytics-compat",[kD]:"fire-app-check",[CD]:"fire-app-check-compat",[bD]:"fire-auth",[DD]:"fire-auth-compat",[xD]:"fire-rtdb",[ND]:"fire-data-connect",[OD]:"fire-rtdb-compat",[VD]:"fire-fn",[LD]:"fire-fn-compat",[MD]:"fire-iid",[FD]:"fire-iid-compat",[UD]:"fire-fcm",[BD]:"fire-fcm-compat",[jD]:"fire-perf",[zD]:"fire-perf-compat",[$D]:"fire-rc",[qD]:"fire-rc-compat",[HD]:"fire-gcs",[KD]:"fire-gcs-compat",[GD]:"fire-fst",[QD]:"fire-fst-compat",[WD]:"fire-vertex","fire-js":"fire-js",[YD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new Map,ZD=new Map,yy=new Map;function v0(n,e){try{n.container.addComponent(e)}catch(t){ds.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function mo(n){const e=n.name;if(yy.has(e))return ds.debug(`There were multiple attempts to register component ${e}.`),!1;yy.set(e,n);for(const t of kc.values())v0(t,n);for(const t of ZD.values())v0(t,n);return!0}function ou(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Pi(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ho=new Yc("app","Firebase",ex);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ho.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=JD;function d_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ho.create("bad-app-name",{appName:String(i)});if(t||(t=YS()),!t)throw ho.create("no-options");const o=kc.get(i);if(o){if(Cc(t,o.options)&&Cc(r,o.config))return o;throw ho.create("duplicate-app",{appName:i})}const l=new aD(i);for(const h of yy.values())l.addComponent(h);const c=new tx(t,r,l);return kc.set(i,c),c}function Wf(n=gy){const e=kc.get(n);if(!e&&n===gy&&YS())return d_();if(!e)throw ho.create("no-app",{appName:n});return e}function w0(){return Array.from(kc.values())}function jr(n,e,t){var r;let i=(r=XD[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ds.warn(c.join(" "));return}mo(new hs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="firebase-heartbeat-database",rx=1,bc="firebase-heartbeat-store";let pg=null;function rR(){return pg||(pg=wD(nx,rx,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(bc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ho.create("idb-open",{originalErrorMessage:n.message})})),pg}async function ix(n){try{const t=(await rR()).transaction(bc),r=await t.objectStore(bc).get(iR(n));return await t.done,r}catch(e){if(e instanceof ci)ds.warn(e.message);else{const t=ho.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ds.warn(t.message)}}}async function E0(n,e){try{const r=(await rR()).transaction(bc,"readwrite");await r.objectStore(bc).put(e,iR(n)),await r.done}catch(t){if(t instanceof ci)ds.warn(t.message);else{const r=ho.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ds.warn(r.message)}}}function iR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=1024,ox=30*24*60*60*1e3;class ax{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ux(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=T0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=ox}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ds.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=T0(),{heartbeatsToSend:r,unsentEntries:i}=lx(this._heartbeatsCache.heartbeats),o=ff(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ds.warn(t),""}}}function T0(){return new Date().toISOString().substring(0,10)}function lx(n,e=sx){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),I0(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),I0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ux{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eR()?Yb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ix(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return E0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return E0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function I0(n){return ff(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(n){mo(new hs("platform-logger",e=>new ID(e),"PRIVATE")),mo(new hs("heartbeat",e=>new ax(e),"PRIVATE")),jr(my,_0,n),jr(my,_0,"esm2017"),jr("fire-js","")}cx("");var S0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ca,sR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,S){function R(){}R.prototype=S.prototype,P.D=S.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(k,N,L){for(var C=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)C[pe-2]=arguments[pe];return S.prototype[N].apply(k,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,S,R){R||(R=0);var k=Array(16);if(typeof S=="string")for(var N=0;16>N;++N)k[N]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(N=0;16>N;++N)k[N]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=P.g[0],R=P.g[1],N=P.g[2];var L=P.g[3],C=S+(L^R&(N^L))+k[0]+3614090360&4294967295;S=R+(C<<7&4294967295|C>>>25),C=L+(N^S&(R^N))+k[1]+3905402710&4294967295,L=S+(C<<12&4294967295|C>>>20),C=N+(R^L&(S^R))+k[2]+606105819&4294967295,N=L+(C<<17&4294967295|C>>>15),C=R+(S^N&(L^S))+k[3]+3250441966&4294967295,R=N+(C<<22&4294967295|C>>>10),C=S+(L^R&(N^L))+k[4]+4118548399&4294967295,S=R+(C<<7&4294967295|C>>>25),C=L+(N^S&(R^N))+k[5]+1200080426&4294967295,L=S+(C<<12&4294967295|C>>>20),C=N+(R^L&(S^R))+k[6]+2821735955&4294967295,N=L+(C<<17&4294967295|C>>>15),C=R+(S^N&(L^S))+k[7]+4249261313&4294967295,R=N+(C<<22&4294967295|C>>>10),C=S+(L^R&(N^L))+k[8]+1770035416&4294967295,S=R+(C<<7&4294967295|C>>>25),C=L+(N^S&(R^N))+k[9]+2336552879&4294967295,L=S+(C<<12&4294967295|C>>>20),C=N+(R^L&(S^R))+k[10]+4294925233&4294967295,N=L+(C<<17&4294967295|C>>>15),C=R+(S^N&(L^S))+k[11]+2304563134&4294967295,R=N+(C<<22&4294967295|C>>>10),C=S+(L^R&(N^L))+k[12]+1804603682&4294967295,S=R+(C<<7&4294967295|C>>>25),C=L+(N^S&(R^N))+k[13]+4254626195&4294967295,L=S+(C<<12&4294967295|C>>>20),C=N+(R^L&(S^R))+k[14]+2792965006&4294967295,N=L+(C<<17&4294967295|C>>>15),C=R+(S^N&(L^S))+k[15]+1236535329&4294967295,R=N+(C<<22&4294967295|C>>>10),C=S+(N^L&(R^N))+k[1]+4129170786&4294967295,S=R+(C<<5&4294967295|C>>>27),C=L+(R^N&(S^R))+k[6]+3225465664&4294967295,L=S+(C<<9&4294967295|C>>>23),C=N+(S^R&(L^S))+k[11]+643717713&4294967295,N=L+(C<<14&4294967295|C>>>18),C=R+(L^S&(N^L))+k[0]+3921069994&4294967295,R=N+(C<<20&4294967295|C>>>12),C=S+(N^L&(R^N))+k[5]+3593408605&4294967295,S=R+(C<<5&4294967295|C>>>27),C=L+(R^N&(S^R))+k[10]+38016083&4294967295,L=S+(C<<9&4294967295|C>>>23),C=N+(S^R&(L^S))+k[15]+3634488961&4294967295,N=L+(C<<14&4294967295|C>>>18),C=R+(L^S&(N^L))+k[4]+3889429448&4294967295,R=N+(C<<20&4294967295|C>>>12),C=S+(N^L&(R^N))+k[9]+568446438&4294967295,S=R+(C<<5&4294967295|C>>>27),C=L+(R^N&(S^R))+k[14]+3275163606&4294967295,L=S+(C<<9&4294967295|C>>>23),C=N+(S^R&(L^S))+k[3]+4107603335&4294967295,N=L+(C<<14&4294967295|C>>>18),C=R+(L^S&(N^L))+k[8]+1163531501&4294967295,R=N+(C<<20&4294967295|C>>>12),C=S+(N^L&(R^N))+k[13]+2850285829&4294967295,S=R+(C<<5&4294967295|C>>>27),C=L+(R^N&(S^R))+k[2]+4243563512&4294967295,L=S+(C<<9&4294967295|C>>>23),C=N+(S^R&(L^S))+k[7]+1735328473&4294967295,N=L+(C<<14&4294967295|C>>>18),C=R+(L^S&(N^L))+k[12]+2368359562&4294967295,R=N+(C<<20&4294967295|C>>>12),C=S+(R^N^L)+k[5]+4294588738&4294967295,S=R+(C<<4&4294967295|C>>>28),C=L+(S^R^N)+k[8]+2272392833&4294967295,L=S+(C<<11&4294967295|C>>>21),C=N+(L^S^R)+k[11]+1839030562&4294967295,N=L+(C<<16&4294967295|C>>>16),C=R+(N^L^S)+k[14]+4259657740&4294967295,R=N+(C<<23&4294967295|C>>>9),C=S+(R^N^L)+k[1]+2763975236&4294967295,S=R+(C<<4&4294967295|C>>>28),C=L+(S^R^N)+k[4]+1272893353&4294967295,L=S+(C<<11&4294967295|C>>>21),C=N+(L^S^R)+k[7]+4139469664&4294967295,N=L+(C<<16&4294967295|C>>>16),C=R+(N^L^S)+k[10]+3200236656&4294967295,R=N+(C<<23&4294967295|C>>>9),C=S+(R^N^L)+k[13]+681279174&4294967295,S=R+(C<<4&4294967295|C>>>28),C=L+(S^R^N)+k[0]+3936430074&4294967295,L=S+(C<<11&4294967295|C>>>21),C=N+(L^S^R)+k[3]+3572445317&4294967295,N=L+(C<<16&4294967295|C>>>16),C=R+(N^L^S)+k[6]+76029189&4294967295,R=N+(C<<23&4294967295|C>>>9),C=S+(R^N^L)+k[9]+3654602809&4294967295,S=R+(C<<4&4294967295|C>>>28),C=L+(S^R^N)+k[12]+3873151461&4294967295,L=S+(C<<11&4294967295|C>>>21),C=N+(L^S^R)+k[15]+530742520&4294967295,N=L+(C<<16&4294967295|C>>>16),C=R+(N^L^S)+k[2]+3299628645&4294967295,R=N+(C<<23&4294967295|C>>>9),C=S+(N^(R|~L))+k[0]+4096336452&4294967295,S=R+(C<<6&4294967295|C>>>26),C=L+(R^(S|~N))+k[7]+1126891415&4294967295,L=S+(C<<10&4294967295|C>>>22),C=N+(S^(L|~R))+k[14]+2878612391&4294967295,N=L+(C<<15&4294967295|C>>>17),C=R+(L^(N|~S))+k[5]+4237533241&4294967295,R=N+(C<<21&4294967295|C>>>11),C=S+(N^(R|~L))+k[12]+1700485571&4294967295,S=R+(C<<6&4294967295|C>>>26),C=L+(R^(S|~N))+k[3]+2399980690&4294967295,L=S+(C<<10&4294967295|C>>>22),C=N+(S^(L|~R))+k[10]+4293915773&4294967295,N=L+(C<<15&4294967295|C>>>17),C=R+(L^(N|~S))+k[1]+2240044497&4294967295,R=N+(C<<21&4294967295|C>>>11),C=S+(N^(R|~L))+k[8]+1873313359&4294967295,S=R+(C<<6&4294967295|C>>>26),C=L+(R^(S|~N))+k[15]+4264355552&4294967295,L=S+(C<<10&4294967295|C>>>22),C=N+(S^(L|~R))+k[6]+2734768916&4294967295,N=L+(C<<15&4294967295|C>>>17),C=R+(L^(N|~S))+k[13]+1309151649&4294967295,R=N+(C<<21&4294967295|C>>>11),C=S+(N^(R|~L))+k[4]+4149444226&4294967295,S=R+(C<<6&4294967295|C>>>26),C=L+(R^(S|~N))+k[11]+3174756917&4294967295,L=S+(C<<10&4294967295|C>>>22),C=N+(S^(L|~R))+k[2]+718787259&4294967295,N=L+(C<<15&4294967295|C>>>17),C=R+(L^(N|~S))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+N&4294967295,P.g[3]=P.g[3]+L&4294967295}r.prototype.u=function(P,S){S===void 0&&(S=P.length);for(var R=S-this.blockSize,k=this.B,N=this.h,L=0;L<S;){if(N==0)for(;L<=R;)i(this,P,L),L+=this.blockSize;if(typeof P=="string"){for(;L<S;)if(k[N++]=P.charCodeAt(L++),N==this.blockSize){i(this,k),N=0;break}}else for(;L<S;)if(k[N++]=P[L++],N==this.blockSize){i(this,k),N=0;break}}this.h=N,this.o+=S},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;var R=8*this.o;for(S=P.length-8;S<P.length;++S)P[S]=R&255,R/=256;for(this.u(P),P=Array(16),S=R=0;4>S;++S)for(var k=0;32>k;k+=8)P[R++]=this.g[S]>>>k&255;return P};function o(P,S){var R=c;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=S(P)}function l(P,S){this.h=S;for(var R=[],k=!0,N=P.length-1;0<=N;N--){var L=P[N]|0;k&&L==S||(R[N]=L,k=!1)}this.g=R}var c={};function h(P){return-128<=P&&128>P?o(P,function(S){return new l([S|0],0>S?-1:0)}):new l([P|0],0>P?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return v;if(0>P)return V(p(-P));for(var S=[],R=1,k=0;P>=R;k++)S[k]=P/R|0,R*=4294967296;return new l(S,0)}function g(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return V(g(P.substring(1),S));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=p(Math.pow(S,8)),k=v,N=0;N<P.length;N+=8){var L=Math.min(8,P.length-N),C=parseInt(P.substring(N,N+L),S);8>L?(L=p(Math.pow(S,L)),k=k.j(L).add(p(C))):(k=k.j(R),k=k.add(p(C)))}return k}var v=h(0),E=h(1),I=h(16777216);n=l.prototype,n.m=function(){if(x(this))return-V(this).m();for(var P=0,S=1,R=0;R<this.g.length;R++){var k=this.i(R);P+=(0<=k?k:4294967296+k)*S,S*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(D(this))return"0";if(x(this))return"-"+V(this).toString(P);for(var S=p(Math.pow(P,6)),R=this,k="";;){var N=H(R,S).g;R=G(R,N.j(S));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=N,D(R))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function D(P){if(P.h!=0)return!1;for(var S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function x(P){return P.h==-1}n.l=function(P){return P=G(this,P),x(P)?-1:D(P)?0:1};function V(P){for(var S=P.g.length,R=[],k=0;k<S;k++)R[k]=~P.g[k];return new l(R,~P.h).add(E)}n.abs=function(){return x(this)?V(this):this},n.add=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],k=0,N=0;N<=S;N++){var L=k+(this.i(N)&65535)+(P.i(N)&65535),C=(L>>>16)+(this.i(N)>>>16)+(P.i(N)>>>16);k=C>>>16,L&=65535,C&=65535,R[N]=C<<16|L}return new l(R,R[R.length-1]&-2147483648?-1:0)};function G(P,S){return P.add(V(S))}n.j=function(P){if(D(this)||D(P))return v;if(x(this))return x(P)?V(this).j(V(P)):V(V(this).j(P));if(x(P))return V(this.j(V(P)));if(0>this.l(I)&&0>P.l(I))return p(this.m()*P.m());for(var S=this.g.length+P.g.length,R=[],k=0;k<2*S;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<P.g.length;N++){var L=this.i(k)>>>16,C=this.i(k)&65535,pe=P.i(N)>>>16,st=P.i(N)&65535;R[2*k+2*N]+=C*st,$(R,2*k+2*N),R[2*k+2*N+1]+=L*st,$(R,2*k+2*N+1),R[2*k+2*N+1]+=C*pe,$(R,2*k+2*N+1),R[2*k+2*N+2]+=L*pe,$(R,2*k+2*N+2)}for(k=0;k<S;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=S;k<2*S;k++)R[k]=0;return new l(R,0)};function $(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function j(P,S){this.g=P,this.h=S}function H(P,S){if(D(S))throw Error("division by zero");if(D(P))return new j(v,v);if(x(P))return S=H(V(P),S),new j(V(S.g),V(S.h));if(x(S))return S=H(P,V(S)),new j(V(S.g),S.h);if(30<P.g.length){if(x(P)||x(S))throw Error("slowDivide_ only works with positive integers.");for(var R=E,k=S;0>=k.l(P);)R=re(R),k=re(k);var N=b(R,1),L=b(k,1);for(k=b(k,2),R=b(R,2);!D(k);){var C=L.add(k);0>=C.l(P)&&(N=N.add(R),L=C),k=b(k,1),R=b(R,1)}return S=G(P,N.j(S)),new j(N,S)}for(N=v;0<=P.l(S);){for(R=Math.max(1,Math.floor(P.m()/S.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=p(R),C=L.j(S);x(C)||0<C.l(P);)R-=k,L=p(R),C=L.j(S);D(L)&&(L=E),N=N.add(L),P=G(P,C)}return new j(N,P)}n.A=function(P){return H(this,P).h},n.and=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],k=0;k<S;k++)R[k]=this.i(k)&P.i(k);return new l(R,this.h&P.h)},n.or=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],k=0;k<S;k++)R[k]=this.i(k)|P.i(k);return new l(R,this.h|P.h)},n.xor=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],k=0;k<S;k++)R[k]=this.i(k)^P.i(k);return new l(R,this.h^P.h)};function re(P){for(var S=P.g.length+1,R=[],k=0;k<S;k++)R[k]=P.i(k)<<1|P.i(k-1)>>>31;return new l(R,P.h)}function b(P,S){var R=S>>5;S%=32;for(var k=P.g.length-R,N=[],L=0;L<k;L++)N[L]=0<S?P.i(L+R)>>>S|P.i(L+R+1)<<32-S:P.i(L+R);return new l(N,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sR=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=g,ca=l}).apply(typeof S0<"u"?S0:typeof self<"u"?self:typeof window<"u"?window:{});var Pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oR,hc,aR,qd,_y,lR,uR,cR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,w){return d==Array.prototype||d==Object.prototype||(d[y]=w.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pd=="object"&&Pd];for(var y=0;y<d.length;++y){var w=d[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function i(d,y){if(y)e:{var w=r;d=d.split(".");for(var A=0;A<d.length-1;A++){var q=d[A];if(!(q in w))break e;w=w[q]}d=d[d.length-1],A=w[d],y=y(A),y!=A&&y!=null&&e(w,d,{configurable:!0,writable:!0,value:y})}}function o(d,y){d instanceof String&&(d+="");var w=0,A=!1,q={next:function(){if(!A&&w<d.length){var Z=w++;return{value:y(Z,d[Z]),done:!1}}return A=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}i("Array.prototype.values",function(d){return d||function(){return o(this,function(y,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function p(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function g(d,y,w){return d.call.apply(d.bind,arguments)}function v(d,y,w){if(!d)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,A),d.apply(y,q)}}return function(){return d.apply(y,arguments)}}function E(d,y,w){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,E.apply(null,arguments)}function I(d,y){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function D(d,y){function w(){}w.prototype=y.prototype,d.aa=y.prototype,d.prototype=new w,d.prototype.constructor=d,d.Qb=function(A,q,Z){for(var fe=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)fe[wt-2]=arguments[wt];return y.prototype[q].apply(A,fe)}}function x(d){const y=d.length;if(0<y){const w=Array(y);for(let A=0;A<y;A++)w[A]=d[A];return w}return[]}function V(d,y){for(let w=1;w<arguments.length;w++){const A=arguments[w];if(h(A)){const q=d.length||0,Z=A.length||0;d.length=q+Z;for(let fe=0;fe<Z;fe++)d[q+fe]=A[fe]}else d.push(A)}}class G{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function $(d){return/^[\s\xa0]*$/.test(d)}function j(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function H(d){return H[" "](d),d}H[" "]=function(){};var re=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function b(d,y,w){for(const A in d)y.call(w,d[A],A,d)}function P(d,y){for(const w in d)y.call(void 0,d[w],w,d)}function S(d){const y={};for(const w in d)y[w]=d[w];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(d,y){let w,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(w in A)d[w]=A[w];for(let Z=0;Z<R.length;Z++)w=R[Z],Object.prototype.hasOwnProperty.call(A,w)&&(d[w]=A[w])}}function N(d){var y=1;d=d.split(":");const w=[];for(;0<y&&d.length;)w.push(d.shift()),y--;return d.length&&w.push(d.join(":")),w}function L(d){c.setTimeout(()=>{throw d},0)}function C(){var d=_e;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class pe{constructor(){this.h=this.g=null}add(y,w){const A=st.get();A.set(y,w),this.h?this.h.next=A:this.g=A,this.h=A}}var st=new G(()=>new yt,d=>d.reset());class yt{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,ce=!1,_e=new pe,de=()=>{const d=c.Promise.resolve(void 0);Le=()=>{d.then(B)}};var B=()=>{for(var d;d=C();){try{d.h.call(d.g)}catch(w){L(w)}var y=st;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}ce=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Oe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};c.addEventListener("test",w,y),c.removeEventListener("test",w,y)}catch{}return d}();function Ve(d,y){if(we.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var w=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(re){e:{try{H(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else w=="mouseover"?y=d.fromElement:w=="mouseout"&&(y=d.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Be[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ve.aa.h.call(this)}}D(Ve,we);var Be={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Ge(d,y,w,A,q){this.listener=d,this.proxy=null,this.src=y,this.type=w,this.capture=!!A,this.ha=q,this.key=++$e,this.da=this.fa=!1}function St(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function pt(d){this.src=d,this.g={},this.h=0}pt.prototype.add=function(d,y,w,A,q){var Z=d.toString();d=this.g[Z],d||(d=this.g[Z]=[],this.h++);var fe=$r(d,y,A,q);return-1<fe?(y=d[fe],w||(y.fa=!1)):(y=new Ge(y,this.src,Z,!!A,q),y.fa=w,d.push(y)),y};function Qt(d,y){var w=y.type;if(w in d.g){var A=d.g[w],q=Array.prototype.indexOf.call(A,y,void 0),Z;(Z=0<=q)&&Array.prototype.splice.call(A,q,1),Z&&(St(y),d.g[w].length==0&&(delete d.g[w],d.h--))}}function $r(d,y,w,A){for(var q=0;q<d.length;++q){var Z=d[q];if(!Z.da&&Z.listener==y&&Z.capture==!!w&&Z.ha==A)return q}return-1}var Fi="closure_lm_"+(1e6*Math.random()|0),Kn={};function Po(d,y,w,A,q){if(Array.isArray(y)){for(var Z=0;Z<y.length;Z++)Po(d,y[Z],w,A,q);return null}return w=_s(w),d&&d[je]?d.K(y,w,p(A)?!!A.capture:!!A,q):Co(d,y,w,!1,A,q)}function Co(d,y,w,A,q,Z){if(!y)throw Error("Invalid event type");var fe=p(q)?!!q.capture:!!q,wt=Gn(d);if(wt||(d[Fi]=wt=new pt(d)),w=wt.add(y,w,A,fe,Z),w.proxy)return w;if(A=ko(),w.proxy=A,A.src=d,A.listener=w,d.addEventListener)Oe||(q=fe),q===void 0&&(q=!1),d.addEventListener(y.toString(),A,q);else if(d.attachEvent)d.attachEvent(Hr(y.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ko(){function d(w){return y.call(d.src,d.listener,w)}const y=bo;return d}function ys(d,y,w,A,q){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)ys(d,y[Z],w,A,q);else A=p(A)?!!A.capture:!!A,w=_s(w),d&&d[je]?(d=d.i,y=String(y).toString(),y in d.g&&(Z=d.g[y],w=$r(Z,w,A,q),-1<w&&(St(Z[w]),Array.prototype.splice.call(Z,w,1),Z.length==0&&(delete d.g[y],d.h--)))):d&&(d=Gn(d))&&(y=d.g[y.toString()],d=-1,y&&(d=$r(y,w,A,q)),(w=-1<d?y[d]:null)&&qr(w))}function qr(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[je])Qt(y.i,d);else{var w=d.type,A=d.proxy;y.removeEventListener?y.removeEventListener(w,A,d.capture):y.detachEvent?y.detachEvent(Hr(w),A):y.addListener&&y.removeListener&&y.removeListener(A),(w=Gn(y))?(Qt(w,d),w.h==0&&(w.src=null,y[Fi]=null)):St(d)}}}function Hr(d){return d in Kn?Kn[d]:Kn[d]="on"+d}function bo(d,y){if(d.da)d=!0;else{y=new Ve(y,this);var w=d.listener,A=d.ha||d.src;d.fa&&qr(d),d=w.call(A,y)}return d}function Gn(d){return d=d[Fi],d instanceof pt?d:null}var Pr="__closure_events_fn_"+(1e9*Math.random()>>>0);function _s(d){return typeof d=="function"?d:(d[Pr]||(d[Pr]=function(y){return d.handleEvent(y)}),d[Pr])}function $t(){te.call(this),this.i=new pt(this),this.M=this,this.F=null}D($t,te),$t.prototype[je]=!0,$t.prototype.removeEventListener=function(d,y,w,A){ys(this,d,y,w,A)};function Rt(d,y){var w,A=d.F;if(A)for(w=[];A;A=A.F)w.push(A);if(d=d.M,A=y.type||y,typeof y=="string")y=new we(y,d);else if(y instanceof we)y.target=y.target||d;else{var q=y;y=new we(A,d),k(y,q)}if(q=!0,w)for(var Z=w.length-1;0<=Z;Z--){var fe=y.g=w[Z];q=ln(fe,A,!0,y)&&q}if(fe=y.g=d,q=ln(fe,A,!0,y)&&q,q=ln(fe,A,!1,y)&&q,w)for(Z=0;Z<w.length;Z++)fe=y.g=w[Z],q=ln(fe,A,!1,y)&&q}$t.prototype.N=function(){if($t.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var w=d.g[y],A=0;A<w.length;A++)St(w[A]);delete d.g[y],d.h--}}this.F=null},$t.prototype.K=function(d,y,w,A){return this.i.add(String(d),y,!1,w,A)},$t.prototype.L=function(d,y,w,A){return this.i.add(String(d),y,!0,w,A)};function ln(d,y,w,A){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,Z=0;Z<y.length;++Z){var fe=y[Z];if(fe&&!fe.da&&fe.capture==w){var wt=fe.listener,cn=fe.ha||fe.src;fe.fa&&Qt(d.i,fe),q=wt.call(cn,A)!==!1&&q}}return q&&!A.defaultPrevented}function vs(d,y,w){if(typeof d=="function")w&&(d=E(d,w));else if(d&&typeof d.handleEvent=="function")d=E(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:c.setTimeout(d,y||0)}function cr(d){d.g=vs(()=>{d.g=null,d.i&&(d.i=!1,cr(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class Ui extends te{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:cr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xn(d){te.call(this),this.h=d,this.g={}}D(xn,te);var ws=[];function Es(d){b(d.g,function(y,w){this.g.hasOwnProperty(w)&&qr(y)},d),d.g={}}xn.prototype.N=function(){xn.aa.N.call(this),Es(this)},xn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ts=c.JSON.stringify,Do=c.JSON.parse,Is=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function Cr(){}Cr.prototype.h=null;function Bi(d){return d.h||(d.h=d.i())}function hi(){}var Nn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kr(){we.call(this,"d")}D(kr,we);function ji(){we.call(this,"c")}D(ji,we);var br={},Ss=null;function Dr(){return Ss=Ss||new $t}br.La="serverreachability";function di(d){we.call(this,br.La,d)}D(di,we);function Kr(d){const y=Dr();Rt(y,new di(y))}br.STAT_EVENT="statevent";function xo(d,y){we.call(this,br.STAT_EVENT,d),this.stat=y}D(xo,we);function M(d){const y=Dr();Rt(y,new xo(y,d))}br.Ma="timingevent";function z(d,y){we.call(this,br.Ma,d),this.size=y}D(z,we);function Y(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},y)}function ne(){this.g=!0}ne.prototype.xa=function(){this.g=!1};function ge(d,y,w,A,q,Z){d.info(function(){if(d.g)if(Z)for(var fe="",wt=Z.split("&"),cn=0;cn<wt.length;cn++){var ot=wt[cn].split("=");if(1<ot.length){var mn=ot[0];ot=ot[1];var nn=mn.split("_");fe=2<=nn.length&&nn[1]=="type"?fe+(mn+"="+ot+"&"):fe+(mn+"=redacted&")}}else fe=null;else fe=Z;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+y+`
`+w+`
`+fe})}function Pe(d,y,w,A,q,Z,fe){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+y+`
`+w+`
`+Z+" "+fe})}function Ne(d,y,w,A){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ie(d,w)+(A?" "+A:"")})}function Ee(d,y){d.info(function(){return"TIMEOUT: "+y})}ne.prototype.info=function(){};function Ie(d,y){if(!d.g)return y;if(!y)return null;try{var w=JSON.parse(y);if(w){for(d=0;d<w.length;d++)if(Array.isArray(w[d])){var A=w[d];if(!(2>A.length)){var q=A[1];if(Array.isArray(q)&&!(1>q.length)){var Z=q[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var fe=1;fe<q.length;fe++)q[fe]=""}}}}return Ts(w)}catch{return y}}var ye={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},be={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qe;function We(){}D(We,Cr),We.prototype.g=function(){return new XMLHttpRequest},We.prototype.i=function(){return{}},qe=new We;function _t(d,y,w,A){this.j=d,this.i=y,this.l=w,this.R=A||1,this.U=new xn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ft}function ft(){this.i=null,this.g="",this.h=!1}var et={},vt={};function hr(d,y,w){d.L=1,d.v=ks(fr(y)),d.m=w,d.P=!0,Gr(d,null)}function Gr(d,y){d.F=Date.now(),mt(d),d.A=fr(d.v);var w=d.A,A=d.R;Array.isArray(A)||(A=[String(A)]),Ds(w.i,"t",A),d.C=0,w=d.j.J,d.h=new ft,d.g=Ch(d.j,w?y:null,!d.m),0<d.O&&(d.M=new Ui(E(d.Y,d,d.g),d.O)),y=d.U,w=d.g,A=d.ca;var q="readystatechange";Array.isArray(q)||(q&&(ws[0]=q.toString()),q=ws);for(var Z=0;Z<q.length;Z++){var fe=Po(w,q[Z],A||y.handleEvent,!1,y.h||y);if(!fe)break;y.g[fe.key]=fe}y=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),Kr(),ge(d.i,d.u,d.A,d.l,d.R,d.m)}_t.prototype.ca=function(d){d=d.target;const y=this.M;y&&Xn(d)==3?y.j():this.Y(d)},_t.prototype.Y=function(d){try{if(d==this.g)e:{const nn=Xn(this.g);var y=this.g.Ba();const Nr=this.g.Z();if(!(3>nn)&&(nn!=3||this.g&&(this.h.h||this.g.oa()||wu(this.g)))){this.J||nn!=4||y==7||(y==8||0>=Nr?Kr(3):Kr(2)),Bn(this);var w=this.g.Z();this.X=w;t:if(Wn(this)){var A=wu(this.g);d="";var q=A.length,Z=Xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),dr(this);var fe="";break t}this.h.i=new c.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,d+=this.h.i.decode(A[y],{stream:!(Z&&y==q-1)});A.length=0,this.h.g+=d,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=w==200,Pe(this.i,this.u,this.A,this.l,this.R,nn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var wt,cn=this.g;if((wt=cn.g?cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(wt)){var ot=wt;break t}}ot=null}if(w=ot)Ne(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xe(this,w);else{this.o=!1,this.s=3,M(12),Sn(this),dr(this);break e}}if(this.P){w=!0;let mr;for(;!this.J&&this.C<fe.length;)if(mr=Qn(this,fe),mr==vt){nn==4&&(this.s=4,M(14),w=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}else if(mr==et){this.s=4,M(15),Ne(this.i,this.l,fe,"[Invalid Chunk]"),w=!1;break}else Ne(this.i,this.l,mr,null),Xe(this,mr);if(Wn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nn!=4||fe.length!=0||this.h.h||(this.s=1,M(16),w=!1),this.o=this.o&&w,!w)Ne(this.i,this.l,fe,"[Invalid Chunked Response]"),Sn(this),dr(this);else if(0<fe.length&&!this.W){this.W=!0;var mn=this.j;mn.g==this&&mn.ba&&!mn.M&&(mn.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),Tu(mn),mn.M=!0,M(11))}}else Ne(this.i,this.l,fe,null),Xe(this,fe);nn==4&&Sn(this),this.o&&!this.J&&(nn==4?Ha(this.j,this):(this.o=!1,mt(this)))}else Ba(this.g),w==400&&0<fe.indexOf("Unknown SID")?(this.s=3,M(12)):(this.s=0,M(13)),Sn(this),dr(this)}}}catch{}finally{}};function Wn(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Qn(d,y){var w=d.C,A=y.indexOf(`
`,w);return A==-1?vt:(w=Number(y.substring(w,A)),isNaN(w)?et:(A+=1,A+w>y.length?vt:(y=y.slice(A,A+w),d.C=A+w,y)))}_t.prototype.cancel=function(){this.J=!0,Sn(this)};function mt(d){d.S=Date.now()+d.I,fi(d,d.I)}function fi(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Y(E(d.ba,d),y)}function Bn(d){d.B&&(c.clearTimeout(d.B),d.B=null)}_t.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Ee(this.i,this.A),this.L!=2&&(Kr(),M(17)),Sn(this),this.s=2,dr(this)):fi(this,this.S-d)};function dr(d){d.j.G==0||d.J||Ha(d.j,d)}function Sn(d){Bn(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,Es(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function Xe(d,y){try{var w=d.j;if(w.G!=0&&(w.g==d||Yt(w.h,d))){if(!d.K&&Yt(w.h,d)&&w.G==3){try{var A=w.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<d.F)qa(w),Xr(w);else break e;$a(w),M(18)}}else w.za=q[1],0<w.za-w.T&&37500>q[2]&&w.F&&w.v==0&&!w.C&&(w.C=Y(E(w.Za,w),6e3));if(1>=xt(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Ki(w,11)}else if((d.K||w.g==d)&&qa(w),!$(y))for(q=w.Da.g.parse(y),y=0;y<q.length;y++){let ot=q[y];if(w.T=ot[0],ot=ot[1],w.G==2)if(ot[0]=="c"){w.K=ot[1],w.ia=ot[2];const mn=ot[3];mn!=null&&(w.la=mn,w.j.info("VER="+w.la));const nn=ot[4];nn!=null&&(w.Aa=nn,w.j.info("SVER="+w.Aa));const Nr=ot[5];Nr!=null&&typeof Nr=="number"&&0<Nr&&(A=1.5*Nr,w.L=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const mr=d.g;if(mr){const Fo=mr.g?mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fo){var Z=A.h;Z.g||Fo.indexOf("spdy")==-1&&Fo.indexOf("quic")==-1&&Fo.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Rs(Z,Z.h),Z.h=null))}if(A.D){const Ga=mr.g?mr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ga&&(A.ya=Ga,kt(A.I,A.D,Ga))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-d.F,w.j.info("Handshake RTT: "+w.R+"ms")),A=w;var fe=d;if(A.qa=Ph(A,A.J?A.ia:null,A.W),fe.K){Oa(A.h,fe);var wt=fe,cn=A.L;cn&&(wt.I=cn),wt.B&&(Bn(wt),mt(wt)),A.g=fe}else Mo(A);0<w.i.length&&yi(w)}else ot[0]!="stop"&&ot[0]!="close"||Ki(w,7);else w.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?Ki(w,7):An(w):ot[0]!="noop"&&w.l&&w.l.ta(ot),w.v=0)}}Kr(4)}catch{}}var Ct=class{constructor(d,y){this.g=d,this.map=y}};function Yn(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function un(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function xt(d){return d.h?1:d.g?d.g.size:0}function Yt(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Rs(d,y){d.g?d.g.add(y):d.h=y}function Oa(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Yn.prototype.cancel=function(){if(this.i=gh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function gh(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const w of d.g.values())y=y.concat(w.D);return y}return x(d.i)}function Va(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(h(d)){for(var y=[],w=d.length,A=0;A<w;A++)y.push(d[A]);return y}y=[],w=0;for(A in d)y[w++]=d[A];return y}function La(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(h(d)||typeof d=="string"){var y=[];d=d.length;for(var w=0;w<d;w++)y.push(w);return y}y=[],w=0;for(const A in d)y[w++]=A;return y}}}function As(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(h(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var w=La(d),A=Va(d),q=A.length,Z=0;Z<q;Z++)y.call(void 0,A[Z],w&&w[Z],d)}var No=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rp(d,y){if(d){d=d.split("&");for(var w=0;w<d.length;w++){var A=d[w].indexOf("="),q=null;if(0<=A){var Z=d[w].substring(0,A);q=d[w].substring(A+1)}else Z=d[w];y(Z,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function zi(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof zi){this.h=d.h,Oo(this,d.j),this.o=d.o,this.g=d.g,Ps(this,d.s),this.l=d.l;var y=d.i,w=new pi;w.i=y.i,y.g&&(w.g=new Map(y.g),w.h=y.h),Cs(this,w),this.m=d.m}else d&&(y=String(d).match(No))?(this.h=!1,Oo(this,y[1]||"",!0),this.o=rt(y[2]||""),this.g=rt(y[3]||"",!0),Ps(this,y[4]),this.l=rt(y[5]||"",!0),Cs(this,y[6]||"",!0),this.m=rt(y[7]||"")):(this.h=!1,this.i=new pi(null,this.h))}zi.prototype.toString=function(){var d=[],y=this.j;y&&d.push(bs(y,Ma,!0),":");var w=this.g;return(w||y=="file")&&(d.push("//"),(y=this.o)&&d.push(bs(y,Ma,!0),"@"),d.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&d.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(bs(w,w.charAt(0)=="/"?vh:_h,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",bs(w,yu)),d.join("")};function fr(d){return new zi(d)}function Oo(d,y,w){d.j=w?rt(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Ps(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function Cs(d,y,w){y instanceof pi?(d.i=y,mi(d.i,d.h)):(w||(y=bs(y,wh)),d.i=new pi(y,d.h))}function kt(d,y,w){d.i.set(y,w)}function ks(d){return kt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function rt(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function bs(d,y,w){return typeof d=="string"?(d=encodeURI(d).replace(y,yh),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function yh(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ma=/[#\/\?@]/g,_h=/[#\?:]/g,vh=/[#\?]/g,wh=/[#\?@]/g,yu=/#/g;function pi(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Rn(d){d.g||(d.g=new Map,d.h=0,d.i&&Rp(d.i,function(y,w){d.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}n=pi.prototype,n.add=function(d,y){Rn(this),this.i=null,d=xr(this,d);var w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(y),this.h+=1,this};function Wr(d,y){Rn(d),y=xr(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Qr(d,y){return Rn(d),y=xr(d,y),d.g.has(y)}n.forEach=function(d,y){Rn(this),this.g.forEach(function(w,A){w.forEach(function(q){d.call(y,q,A,this)},this)},this)},n.na=function(){Rn(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),w=[];for(let A=0;A<y.length;A++){const q=d[A];for(let Z=0;Z<q.length;Z++)w.push(y[A])}return w},n.V=function(d){Rn(this);let y=[];if(typeof d=="string")Qr(this,d)&&(y=y.concat(this.g.get(xr(this,d))));else{d=Array.from(this.g.values());for(let w=0;w<d.length;w++)y=y.concat(d[w])}return y},n.set=function(d,y){return Rn(this),this.i=null,d=xr(this,d),Qr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},n.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function Ds(d,y,w){Wr(d,y),0<w.length&&(d.i=null,d.g.set(xr(d,y),x(w)),d.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var w=0;w<y.length;w++){var A=y[w];const Z=encodeURIComponent(String(A)),fe=this.V(A);for(A=0;A<fe.length;A++){var q=Z;fe[A]!==""&&(q+="="+encodeURIComponent(String(fe[A]))),d.push(q)}}return this.i=d.join("&")};function xr(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function mi(d,y){y&&!d.j&&(Rn(d),d.i=null,d.g.forEach(function(w,A){var q=A.toLowerCase();A!=q&&(Wr(this,A),Ds(this,q,w))},d)),d.j=y}function Ap(d,y){const w=new ne;if(c.Image){const A=new Image;A.onload=I(Jn,w,"TestLoadImage: loaded",!0,y,A),A.onerror=I(Jn,w,"TestLoadImage: error",!1,y,A),A.onabort=I(Jn,w,"TestLoadImage: abort",!1,y,A),A.ontimeout=I(Jn,w,"TestLoadImage: timeout",!1,y,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else y(!1)}function Eh(d,y){const w=new ne,A=new AbortController,q=setTimeout(()=>{A.abort(),Jn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:A.signal}).then(Z=>{clearTimeout(q),Z.ok?Jn(w,"TestPingServer: ok",!0,y):Jn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Jn(w,"TestPingServer: error",!1,y)})}function Jn(d,y,w,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(w)}catch{}}function Pp(){this.g=new Is}function Th(d,y,w){const A=w||"";try{As(d,function(q,Z){let fe=q;p(q)&&(fe=Ts(q)),y.push(A+Z+"="+encodeURIComponent(fe))})}catch(q){throw y.push(A+"type="+encodeURIComponent("_badmap")),q}}function $i(d){this.l=d.Ub||null,this.j=d.eb||!1}D($i,Cr),$i.prototype.g=function(){return new Vo(this.l,this.j)},$i.prototype.i=function(d){return function(){return d}}({});function Vo(d,y){$t.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Vo,$t),n=Vo.prototype,n.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,Jr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||c).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Jr(this)),this.g&&(this.readyState=3,Jr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ih(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ih(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Yr(this):Jr(this),this.readyState==3&&Ih(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Yr(this))},n.Qa=function(d){this.g&&(this.response=d,Yr(this))},n.ga=function(){this.g&&Yr(this)};function Yr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Jr(d)}n.setRequestHeader=function(d,y){this.u.append(d,y)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=y.next();return d.join(`\r
`)};function Jr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function qi(d){let y="";return b(d,function(w,A){y+=A,y+=":",y+=w,y+=`\r
`}),y}function xs(d,y,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=qi(w),typeof d=="string"?w!=null&&encodeURIComponent(String(w)):kt(d,y,w))}function Ft(d){$t.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Ft,$t);var Cp=/^https?$/i,_u=["POST","PUT"];n=Ft.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,y,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qe.g(),this.v=this.o?Bi(this.o):Bi(qe),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(Z){Lo(this,Z);return}if(d=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)w.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Z of A.keys())w.set(Z,A.get(Z));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(Z=>Z.toLowerCase()=="content-type"),q=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(_u,y,void 0))||A||q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,fe]of w)this.g.setRequestHeader(Z,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ua(this),this.u=!0,this.g.send(d),this.u=!1}catch(Z){Lo(this,Z)}};function Lo(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,Fa(d),pr(d)}function Fa(d){d.A||(d.A=!0,Rt(d,"complete"),Rt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Rt(this,"complete"),Rt(this,"abort"),pr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pr(this,!0)),Ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?vu(this):this.bb())},n.bb=function(){vu(this)};function vu(d){if(d.h&&typeof l<"u"&&(!d.v[1]||Xn(d)!=4||d.Z()!=2)){if(d.u&&Xn(d)==4)vs(d.Ea,0,d);else if(Rt(d,"readystatechange"),Xn(d)==4){d.h=!1;try{const fe=d.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var A;if(A=fe===0){var q=String(d.D).match(No)[1]||null;!q&&c.self&&c.self.location&&(q=c.self.location.protocol.slice(0,-1)),A=!Cp.test(q?q.toLowerCase():"")}w=A}if(w)Rt(d,"complete"),Rt(d,"success");else{d.m=6;try{var Z=2<Xn(d)?d.g.statusText:""}catch{Z=""}d.l=Z+" ["+d.Z()+"]",Fa(d)}}finally{pr(d)}}}}function pr(d,y){if(d.g){Ua(d);const w=d.g,A=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||Rt(d,"ready");try{w.onreadystatechange=A}catch{}}}function Ua(d){d.I&&(c.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Xn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Do(y)}};function wu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ba(d){const y={};d=(d.g&&2<=Xn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if($(d[A]))continue;var w=N(d[A]);const q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Z=y[q]||[];y[q]=Z,Z.push(w)}P(y,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gi(d,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||y}function Eu(d){this.Aa=0,this.i=[],this.j=new ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gi("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gi("baseRetryDelayMs",5e3,d),this.cb=gi("retryDelaySeedMs",1e4,d),this.Wa=gi("forwardChannelMaxRetries",2,d),this.wa=gi("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Yn(d&&d.concurrentRequestLimit),this.Da=new Pp,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Eu.prototype,n.la=8,n.G=1,n.connect=function(d,y,w,A){M(0),this.W=d,this.H=y||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.I=Ph(this,null,this.W),yi(this)};function An(d){if(ja(d),d.G==3){var y=d.U++,w=fr(d.I);if(kt(w,"SID",d.K),kt(w,"RID",y),kt(w,"TYPE","terminate"),Hi(d,w),y=new _t(d,d.j,y),y.L=2,y.v=ks(fr(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(y.v.toString(),"")}catch{}!w&&c.Image&&(new Image().src=y.v,w=!0),w||(y.g=Ch(y.j,null),y.g.ea(y.v)),y.F=Date.now(),mt(y)}Ah(d)}function Xr(d){d.g&&(Tu(d),d.g.cancel(),d.g=null)}function ja(d){Xr(d),d.u&&(c.clearTimeout(d.u),d.u=null),qa(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function yi(d){if(!un(d.h)&&!d.s){d.s=!0;var y=d.Ga;Le||de(),ce||(Le(),ce=!0),_e.add(y,d),d.B=0}}function kp(d,y){return xt(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Y(E(d.Ga,d,y),Rh(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const q=new _t(this,this.j,d);let Z=this.o;if(this.S&&(Z?(Z=S(Z),k(Z,this.S)):Z=this.S),this.m!==null||this.O||(q.H=Z,Z=null),this.P)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=Ns(this,q,y),w=fr(this.I),kt(w,"RID",d),kt(w,"CVER",22),this.D&&kt(w,"X-HTTP-Session-Id",this.D),Hi(this,w),Z&&(this.O?y="headers="+encodeURIComponent(String(qi(Z)))+"&"+y:this.m&&xs(w,this.m,Z)),Rs(this.h,q),this.Ua&&kt(w,"TYPE","init"),this.P?(kt(w,"$req",y),kt(w,"SID","null"),q.T=!0,hr(q,w,null)):hr(q,w,y),this.G=2}}else this.G==3&&(d?za(this,d):this.i.length==0||un(this.h)||za(this))};function za(d,y){var w;y?w=y.l:w=d.U++;const A=fr(d.I);kt(A,"SID",d.K),kt(A,"RID",w),kt(A,"AID",d.T),Hi(d,A),d.m&&d.o&&xs(A,d.m,d.o),w=new _t(d,d.j,w,d.B+1),d.m===null&&(w.H=d.o),y&&(d.i=y.D.concat(d.i)),y=Ns(d,w,1e3),w.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Rs(d.h,w),hr(w,A,y)}function Hi(d,y){d.H&&b(d.H,function(w,A){kt(y,A,w)}),d.l&&As({},function(w,A){kt(y,A,w)})}function Ns(d,y,w){w=Math.min(d.i.length,w);var A=d.l?E(d.l.Na,d.l,d):null;e:{var q=d.i;let Z=-1;for(;;){const fe=["count="+w];Z==-1?0<w?(Z=q[0].g,fe.push("ofs="+Z)):Z=0:fe.push("ofs="+Z);let wt=!0;for(let cn=0;cn<w;cn++){let ot=q[cn].g;const mn=q[cn].map;if(ot-=Z,0>ot)Z=Math.max(0,q[cn].g-100),wt=!1;else try{Th(mn,fe,"req"+ot+"_")}catch{A&&A(mn)}}if(wt){A=fe.join("&");break e}}}return d=d.i.splice(0,w),y.D=d,A}function Mo(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;Le||de(),ce||(Le(),ce=!0),_e.add(y,d),d.v=0}}function $a(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Y(E(d.Fa,d),Rh(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Sh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Y(E(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,M(10),Xr(this),Sh(this))};function Tu(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function Sh(d){d.g=new _t(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=fr(d.qa);kt(y,"RID","rpc"),kt(y,"SID",d.K),kt(y,"AID",d.T),kt(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&kt(y,"TO",d.ja),kt(y,"TYPE","xmlhttp"),Hi(d,y),d.m&&d.o&&xs(y,d.m,d.o),d.L&&(d.g.I=d.L);var w=d.g;d=d.ia,w.L=1,w.v=ks(fr(y)),w.m=null,w.P=!0,Gr(w,d)}n.Za=function(){this.C!=null&&(this.C=null,Xr(this),$a(this),M(19))};function qa(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function Ha(d,y){var w=null;if(d.g==y){qa(d),Tu(d),d.g=null;var A=2}else if(Yt(d.h,y))w=y.D,Oa(d.h,y),A=1;else return;if(d.G!=0){if(y.o)if(A==1){w=y.m?y.m.length:0,y=Date.now()-y.F;var q=d.B;A=Dr(),Rt(A,new z(A,w)),yi(d)}else Mo(d);else if(q=y.s,q==3||q==0&&0<y.X||!(A==1&&kp(d,y)||A==2&&$a(d)))switch(w&&0<w.length&&(y=d.h,y.i=y.i.concat(w)),q){case 1:Ki(d,5);break;case 4:Ki(d,10);break;case 3:Ki(d,6);break;default:Ki(d,2)}}}function Rh(d,y){let w=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(w*=2),w*y}function Ki(d,y){if(d.j.info("Error code "+y),y==2){var w=E(d.fb,d),A=d.Xa;const q=!A;A=new zi(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Oo(A,"https"),ks(A),q?Ap(A.toString(),w):Eh(A.toString(),w)}else M(2);d.G=0,d.l&&d.l.sa(y),Ah(d),ja(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),M(2)):(this.j.info("Failed to ping google.com"),M(1))};function Ah(d){if(d.G=0,d.ka=[],d.l){const y=gh(d.h);(y.length!=0||d.i.length!=0)&&(V(d.ka,y),V(d.ka,d.i),d.h.i.length=0,x(d.i),d.i.length=0),d.l.ra()}}function Ph(d,y,w){var A=w instanceof zi?fr(w):new zi(w);if(A.g!="")y&&(A.g=y+"."+A.g),Ps(A,A.s);else{var q=c.location;A=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var Z=new zi(null);A&&Oo(Z,A),y&&(Z.g=y),q&&Ps(Z,q),w&&(Z.l=w),A=Z}return w=d.D,y=d.ya,w&&y&&kt(A,w,y),kt(A,"VER",d.la),Hi(d,A),A}function Ch(d,y,w){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new Ft(new $i({eb:w})):new Ft(d.pa),y.Ha(d.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Iu(){}n=Iu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ka(){}Ka.prototype.g=function(d,y){return new jn(d,y)};function jn(d,y){$t.call(this),this.g=new Eu(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!$(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!$(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new _i(this)}D(jn,$t),jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){An(this.g)},jn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.u&&(w={},w.__data__=Ts(d),d=w);y.i.push(new Ct(y.Ya++,d)),y.G==3&&yi(y)},jn.prototype.N=function(){this.g.l=null,delete this.j,An(this.g),delete this.g,jn.aa.N.call(this)};function kh(d){kr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const w in y){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}D(kh,kr);function bh(){ji.call(this),this.status=1}D(bh,ji);function _i(d){this.g=d}D(_i,Iu),_i.prototype.ua=function(){Rt(this.g,"a")},_i.prototype.ta=function(d){Rt(this.g,new kh(d))},_i.prototype.sa=function(d){Rt(this.g,new bh)},_i.prototype.ra=function(){Rt(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,cR=function(){return new Ka},uR=function(){return Dr()},lR=br,_y={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ye.NO_ERROR=0,ye.TIMEOUT=8,ye.HTTP_ERROR=6,qd=ye,be.COMPLETE="complete",aR=be,hi.EventType=Nn,Nn.OPEN="a",Nn.CLOSE="b",Nn.ERROR="c",Nn.MESSAGE="d",$t.prototype.listen=$t.prototype.K,hc=hi,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,oR=Ft}).apply(typeof Pd<"u"?Pd:typeof self<"u"?self:typeof window<"u"?window:{});const R0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new c_("@firebase/firestore");function Sl(){return da.logLevel}function se(n,...e){if(da.logLevel<=tt.DEBUG){const t=e.map(f_);da.debug(`Firestore (${au}): ${n}`,...t)}}function Zt(n,...e){if(da.logLevel<=tt.ERROR){const t=e.map(f_);da.error(`Firestore (${au}): ${n}`,...t)}}function fa(n,...e){if(da.logLevel<=tt.WARN){const t=e.map(f_);da.warn(`Firestore (${au}): ${n}`,...t)}}function f_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n="Unexpected state"){const e=`FIRESTORE (${au}) INTERNAL ASSERTION FAILED: `+n;throw Zt(e),new Error(e)}function ke(n,e){n||Te()}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends ci{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(En.UNAUTHENTICATED))}shutdown(){}}class dx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fx{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ke(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new li;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new li,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new li)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string"),new hR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string"),new En(e)}}class px{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mx{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new px(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ke(this.o===void 0);const r=o=>{o.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ke(typeof t.token=="string"),this.R=t.token,new gx(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=_x(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function Ke(n,e){return n<e?-1:n>e?1:0}function Hl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function fR(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ue(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Gt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Gt(0,0))}static max(){return new xe(new Gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(),r===void 0?r=e.length-t:r>e.length-t&&Te(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Dc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),l=t.get(i);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dt extends Dc{construct(e,t,r){return new dt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new dt(t)}static emptyPath(){return new dt([])}}const vx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends Dc{construct(e,t,r){return new Kt(e,t,r)}static isValidIdentifier(e){return vx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Kt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ue(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new ue(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ue(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new ue(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(t)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(dt.fromString(e))}static fromName(e){return new me(dt.fromString(e).popFirst(5))}static empty(){return new me(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new dt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function vy(n){return n.fields.find(e=>e.kind===2)}function Zo(n){return n.fields.filter(e=>e.kind!==2)}pf.UNKNOWN_ID=-1;class Hd{constructor(e,t){this.fieldPath=e,this.kind=t}}class xc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xc(0,Rr.min())}}function pR(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xe.fromTimestamp(r===1e9?new Gt(t+1,0):new Gt(t,r));return new Rr(i,me.empty(),e)}function mR(n){return new Rr(n.readTime,n.key,-1)}class Rr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Rr(xe.min(),me.empty(),-1)}static max(){return new Rr(xe.max(),me.empty(),-1)}}function p_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:Ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==gR)throw n;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):W.reject(t)}static resolve(e){return new W((t,r)=>{t(e)})}static reject(e){return new W((t,r)=>{r(e)})}static waitFor(e){return new W((t,r)=>{let i=0,o=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++o,l&&o===i&&t()},h=>r(h))}),l=!0,o===i&&t()})}static or(e){let t=W.resolve(!1);for(const r of e)t=t.next(i=>i?W.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new W((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const p=h;t(e[p]).next(g=>{l[p]=g,++c,c===o&&r(l)},g=>i(g))}})}static doWhile(e,t){return new W((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new li,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new _c(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=m_(r.target.error);this.V.reject(new _c(e,i))}}static open(e,t,r,i){try{return new Qf(t,e.transaction(i,r))}catch(o){throw new _c(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(se("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ex(t)}}class fo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,fo.S(fn())===12.2&&Zt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return se("SimpleDb","Removing database:",e),ea(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!eR())return!1;if(fo.v())return!0;const e=fn(),t=fo.S(e),r=0<t&&t<10,i=_R(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(se("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const l=o.target.result;t(l)},i.onblocked=()=>{r(new _c(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const l=o.target.error;l.name==="VersionError"?r(new ue(ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new ue(ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new _c(e,l))},i.onupgradeneeded=o=>{se("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.p.O(l,i.transaction,o.oldVersion,this.version).next(()=>{se("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.M(e);const c=Qf.open(this.db,e,o?"readonly":"readwrite",r),h=i(c).next(p=>(c.g(),p)).catch(p=>(c.abort(p),W.reject(p))).toPromise();return h.catch(()=>{}),await c.m,h}catch(c){const h=c,p=h.name!=="FirebaseError"&&l<3;if(se("SimpleDb","Transaction failed with error:",h.message,"Retrying:",p),this.close(),!p)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _R(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class wx{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ea(this.B.delete())}}class _c extends ue{constructor(e,t){super(ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function wo(n){return n.name==="IndexedDbTransactionError"}class Ex{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(se("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(se("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ea(r)}add(e){return se("SimpleDb","ADD",this.store.name,e,e),ea(this.store.add(e))}get(e){return ea(this.store.get(e)).next(t=>(t===void 0&&(t=null),se("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return se("SimpleDb","DELETE",this.store.name,e),ea(this.store.delete(e))}count(){return se("SimpleDb","COUNT",this.store.name),ea(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new W((l,c)=>{o.onerror=h=>{c(h.target.error)},o.onsuccess=h=>{l(h.target.result)}})}{const o=this.cursor(r),l=[];return this.W(o,(c,h)=>{l.push(h)}).next(()=>l)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new W((i,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}j(e,t){se("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(o,l,c)=>c.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new W((r,i)=>{t.onerror=o=>{const l=m_(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next(c=>{c?l.continue():r()}):r()}})}W(e,t){const r=[];return new W((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void i();const h=new wx(c),p=t(c.primaryKey,c.value,h);if(p instanceof W){const g=p.catch(v=>(h.done(),W.reject(v)));r.push(g)}h.isDone?i():h.K===null?c.continue():c.continue(h.K)}}).next(()=>W.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ea(n){return new W((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=m_(r.target.error);t(i)}})}let A0=!1;function m_(n){const e=fo.S(fn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return A0||(A0=!0,setTimeout(()=>{throw r},0)),r}}return n}class Tx{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){se("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{se("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){wo(t)?se("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await vo(t)}await this.X(6e4)})}}class Ix{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,o=!0;return W.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(l!==null&&!r.has(l))return se("IndexBackfiller",`Processing collection: ${l}`),this.ne(e,l,i).next(c=>{i-=c,r.add(l)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.re(i,o)).next(c=>(se("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>l.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{const l=mR(o);p_(l,r)>0&&(r=l)}),new Rr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}lr.oe=-1;function Xc(n){return n==null}function Nc(n){return n===0&&1/n==-1/0}function vR(n){return typeof n=="number"&&Number.isInteger(n)&&!Nc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=P0(e)),e=Sx(n.get(t),e);return P0(e)}function Sx(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function P0(n){return n+""}function Ci(n){const e=n.length;if(ke(e>=2),e===2)return ke(n.charAt(0)===""&&n.charAt(1)===""),dt.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const l=n.indexOf("",o);switch((l<0||l>t)&&Te(),n.charAt(l+1)){case"":const c=n.substring(o,l);let h;i.length===0?h=c:(i+=c,h=i,i=""),r.push(h);break;case"":i+=n.substring(o,l),i+="\0";break;case"":i+=n.substring(o,l+1);break;default:Te()}o=l+2}return new dt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(n,e){return[n,Hn(e)]}function wR(n,e,t){return[n,Hn(e),t]}const Rx={},Ax=["prefixPath","collectionGroup","readTime","documentId"],Px=["prefixPath","collectionGroup","documentId"],Cx=["collectionGroup","readTime","prefixPath","documentId"],kx=["canonicalId","targetId"],bx=["targetId","path"],Dx=["path","targetId"],xx=["collectionId","parent"],Nx=["indexId","uid"],Ox=["uid","sequenceNumber"],Vx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Lx=["indexId","uid","orderedDocumentKey"],Mx=["userId","collectionPath","documentId"],Fx=["userId","collectionPath","largestBatchId"],Ux=["userId","collectionGroup","largestBatchId"],ER=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Bx=[...ER,"documentOverlays"],TR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IR=TR,g_=[...IR,"indexConfiguration","indexState","indexEntries"],jx=g_,zx=[...g_,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy extends yR{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function pn(n,e){const t=Re(n);return fo.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ca(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,t){this.comparator=e,this.root=t||kn.EMPTY}insert(e,t){return new Dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cd(this.root,e,this.comparator,!0)}}class Cd{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kn{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??kn.RED,this.left=i??kn.EMPTY,this.right=o??kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new kn(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return kn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,t,r,i,o){return this}insert(e,t,r){return new kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b0(this.data.getIterator())}getIteratorFrom(e){return new b0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pt(this.comparator);return t.data=e,t}}class b0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new ur([])}unionWith(e){let t=new Pt(Kt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ur(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new RR("Invalid base64 string: "+o):o}}(e);return new tn(t)}static fromUint8Array(e){const t=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const $x=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fs(n){if(ke(!!n),typeof n=="string"){let e=0;const t=$x.exec(n);if(ke(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jt(n.seconds),nanos:jt(n.nanos)}}function jt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function go(n){return typeof n=="string"?tn.fromBase64String(n):tn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function __(n){const e=n.mapValue.fields.__previous_value__;return y_(e)?__(e):e}function Oc(n){const e=fs(n.mapValue.fields.__local_write_time__.timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,t,r,i,o,l,c,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=p}}class pa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new pa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gd={nullValue:"NULL_VALUE"};function ma(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?y_(n)?4:AR(n)?9007199254740991:Yf(n)?10:11:Te()}function Vi(n,e){if(n===e)return!0;const t=ma(n);if(t!==ma(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Oc(n).isEqual(Oc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=fs(i.timestampValue),c=fs(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return go(i.bytesValue).isEqual(go(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return jt(i.geoPointValue.latitude)===jt(o.geoPointValue.latitude)&&jt(i.geoPointValue.longitude)===jt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return jt(i.integerValue)===jt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=jt(i.doubleValue),c=jt(o.doubleValue);return l===c?Nc(l)===Nc(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return Hl(n.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(k0(l)!==k0(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!Vi(l[h],c[h])))return!1;return!0}(n,e);default:return Te()}}function Vc(n,e){return(n.values||[]).find(t=>Vi(t,e))!==void 0}function yo(n,e){if(n===e)return 0;const t=ma(n),r=ma(e);if(t!==r)return Ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=jt(o.integerValue||o.doubleValue),h=jt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return D0(n.timestampValue,e.timestampValue);case 4:return D0(Oc(n),Oc(e));case 5:return Ke(n.stringValue,e.stringValue);case 6:return function(o,l){const c=go(o),h=go(l);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),h=l.split("/");for(let p=0;p<c.length&&p<h.length;p++){const g=Ke(c[p],h[p]);if(g!==0)return g}return Ke(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=Ke(jt(o.latitude),jt(l.latitude));return c!==0?c:Ke(jt(o.longitude),jt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return x0(n.arrayValue,e.arrayValue);case 10:return function(o,l){var c,h,p,g;const v=o.fields||{},E=l.fields||{},I=(c=v.value)===null||c===void 0?void 0:c.arrayValue,D=(h=E.value)===null||h===void 0?void 0:h.arrayValue,x=Ke(((p=I==null?void 0:I.values)===null||p===void 0?void 0:p.length)||0,((g=D==null?void 0:D.values)===null||g===void 0?void 0:g.length)||0);return x!==0?x:x0(I,D)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===ao.mapValue&&l===ao.mapValue)return 0;if(o===ao.mapValue)return 1;if(l===ao.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),p=l.fields||{},g=Object.keys(p);h.sort(),g.sort();for(let v=0;v<h.length&&v<g.length;++v){const E=Ke(h[v],g[v]);if(E!==0)return E;const I=yo(c[h[v]],p[g[v]]);if(I!==0)return I}return Ke(h.length,g.length)}(n.mapValue,e.mapValue);default:throw Te()}}function D0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ke(n,e);const t=fs(n),r=fs(e),i=Ke(t.seconds,r.seconds);return i!==0?i:Ke(t.nanos,r.nanos)}function x0(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=yo(t[i],r[i]);if(o)return o}return Ke(t.length,r.length)}function Kl(n){return Ey(n)}function Ey(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=fs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return go(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return me.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=Ey(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${Ey(t.fields[l])}`;return i+"}"}(n.mapValue):Te()}function Lc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ty(n){return!!n&&"integerValue"in n}function Mc(n){return!!n&&"arrayValue"in n}function N0(n){return!!n&&"nullValue"in n}function O0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wd(n){return!!n&&"mapValue"in n}function Yf(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function vc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ca(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function AR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const PR={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Hx(n){return"nullValue"in n?Gd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Lc(pa.empty(),me.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Yf(n)?PR:{mapValue:{}}:Te()}function Kx(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Lc(pa.empty(),me.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?PR:"mapValue"in n?Yf(n)?{mapValue:{}}:ao:Te()}function V0(n,e){const t=yo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function L0(n,e){const t=yo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Wd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(t)}setAll(e){let t=Kt.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=vc(l):i.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Wd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Wd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ca(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new bn(vc(this.value))}}function CR(n){const e=[];return Ca(n.fields,(t,r)=>{const i=new Kt([t]);if(Wd(r)){const o=CR(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new ur(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t,r,i,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new zt(e,0,xe.min(),xe.min(),xe.min(),bn.empty(),0)}static newFoundDocument(e,t,r,i){return new zt(e,1,t,xe.min(),r,i,0)}static newNoDocument(e,t){return new zt(e,2,t,xe.min(),xe.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new zt(e,3,t,xe.min(),xe.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,t){this.position=e,this.inclusive=t}}function M0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=me.comparator(me.fromName(l.referenceValue),t.key):r=yo(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function F0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Gx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{}class nt extends kR{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Wx(e,t,r):t==="array-contains"?new Jx(e,r):t==="in"?new VR(e,r):t==="not-in"?new Xx(e,r):t==="array-contains-any"?new Zx(e,r):new nt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Qx(e,r):new Yx(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(yo(t,this.value)):t!==null&&ma(this.value)===ma(t)&&this.matchesComparison(yo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tt extends kR{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Tt(e,t)}matches(e){return Wl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Wl(n){return n.op==="and"}function Iy(n){return n.op==="or"}function v_(n){return bR(n)&&Wl(n)}function bR(n){for(const e of n.filters)if(e instanceof Tt)return!1;return!0}function Sy(n){if(n instanceof nt)return n.field.canonicalString()+n.op.toString()+Kl(n.value);if(v_(n))return n.filters.map(e=>Sy(e)).join(",");{const e=n.filters.map(t=>Sy(t)).join(",");return`${n.op}(${e})`}}function DR(n,e){return n instanceof nt?function(r,i){return i instanceof nt&&r.op===i.op&&r.field.isEqual(i.field)&&Vi(r.value,i.value)}(n,e):n instanceof Tt?function(r,i){return i instanceof Tt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,c)=>o&&DR(l,i.filters[c]),!0):!1}(n,e):void Te()}function xR(n,e){const t=n.filters.concat(e);return Tt.create(t,n.op)}function NR(n){return n instanceof nt?function(t){return`${t.field.canonicalString()} ${t.op} ${Kl(t.value)}`}(n):n instanceof Tt?function(t){return t.op.toString()+" {"+t.getFilters().map(NR).join(" ,")+"}"}(n):"Filter"}class Wx extends nt{constructor(e,t,r){super(e,t,r),this.key=me.fromName(r.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class Qx extends nt{constructor(e,t){super(e,"in",t),this.keys=OR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Yx extends nt{constructor(e,t){super(e,"not-in",t),this.keys=OR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function OR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>me.fromName(r.referenceValue))}class Jx extends nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mc(t)&&Vc(t.arrayValue,this.value)}}class VR extends nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vc(this.value.arrayValue,t)}}class Xx extends nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Vc(this.value.arrayValue,t)}}class Zx extends nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,t=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.ue=null}}function Ry(n,e=null,t=[],r=[],i=null,o=null,l=null){return new eN(n,e,t,r,i,o,l)}function ga(n){const e=Re(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Sy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Xc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Kl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Kl(r)).join(",")),e.ue=t}return e.ue}function Zc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Gx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!DR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!F0(n.startAt,e.startAt)&&F0(n.endAt,e.endAt)}function mf(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function gf(n,e){return n.filters.filter(t=>t instanceof nt&&t.field.isEqual(e))}function U0(n,e,t){let r=Gd,i=!0;for(const o of gf(n,e)){let l=Gd,c=!0;switch(o.op){case"<":case"<=":l=Hx(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,c=!1;break;case"!=":case"not-in":l=Gd}V0({value:r,inclusive:i},{value:l,inclusive:c})<0&&(r=l,i=c)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];V0({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}function B0(n,e,t){let r=ao,i=!0;for(const o of gf(n,e)){let l=ao,c=!0;switch(o.op){case">=":case">":l=Kx(o.value),c=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,c=!1;break;case"!=":case"not-in":l=ao}L0({value:r,inclusive:i},{value:l,inclusive:c})>0&&(r=l,i=c)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];L0({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t=null,r=[],i=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function LR(n,e,t,r,i,o,l,c){return new lu(n,e,t,r,i,o,l,c)}function eh(n){return new lu(n)}function j0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function MR(n){return n.collectionGroup!==null}function wc(n){const e=Re(n);if(e.ce===null){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Pt(Kt.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(p=>{p.isInequality()&&(c=c.add(p.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Fc(o,r))}),t.has(Kt.keyField().canonicalString())||e.ce.push(new Fc(Kt.keyField(),r))}return e.ce}function Sr(n){const e=Re(n);return e.le||(e.le=tN(e,wc(n))),e.le}function tN(n,e){if(n.limitType==="F")return Ry(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Fc(i.field,o)});const t=n.endAt?new Gl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gl(n.startAt.position,n.startAt.inclusive):null;return Ry(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ay(n,e){const t=n.filters.concat([e]);return new lu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Py(n,e,t){return new lu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jf(n,e){return Zc(Sr(n),Sr(e))&&n.limitType===e.limitType}function FR(n){return`${ga(Sr(n))}|lt:${n.limitType}`}function Rl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>NR(i)).join(", ")}]`),Xc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Kl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Kl(i)).join(",")),`Target(${r})`}(Sr(n))}; limitType=${n.limitType})`}function th(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):me.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of wc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(l,c,h){const p=M0(l,c,h);return l.inclusive?p<=0:p<0}(r.startAt,wc(r),i)||r.endAt&&!function(l,c,h){const p=M0(l,c,h);return l.inclusive?p>=0:p>0}(r.endAt,wc(r),i))}(n,e)}function UR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BR(n){return(e,t)=>{let r=!1;for(const i of wc(n)){const o=nN(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function nN(n,e,t){const r=n.field.isKeyField()?me.comparator(e.key,t.key):function(o,l,c){const h=l.data.field(o),p=c.data.field(o);return h!==null&&p!==null?yo(h,p):Te()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ca(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return SR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new Dt(me.comparator);function Tr(){return rN}const jR=new Dt(me.comparator);function dc(...n){let e=jR;for(const t of n)e=e.insert(t.key,t);return e}function zR(n){let e=jR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ki(){return Ec()}function $R(){return Ec()}function Ec(){return new Eo(n=>n.toString(),(n,e)=>n.isEqual(e))}const iN=new Dt(me.comparator),sN=new Pt(me.comparator);function Je(...n){let e=sN;for(const t of n)e=e.add(t);return e}const oN=new Pt(Ke);function w_(){return oN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function qR(n){return{integerValue:""+n}}function aN(n,e){return vR(e)?qR(e):E_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this._=void 0}}function lN(n,e,t){return n instanceof Ql?function(i,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&y_(o)&&(o=__(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof Yl?KR(n,e):n instanceof Jl?GR(n,e):function(i,o){const l=HR(i,o),c=z0(l)+z0(i.Pe);return Ty(l)&&Ty(i.Pe)?qR(c):E_(i.serializer,c)}(n,e)}function uN(n,e,t){return n instanceof Yl?KR(n,e):n instanceof Jl?GR(n,e):t}function HR(n,e){return n instanceof Uc?function(r){return Ty(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Ql extends Xf{}class Yl extends Xf{constructor(e){super(),this.elements=e}}function KR(n,e){const t=WR(e);for(const r of n.elements)t.some(i=>Vi(i,r))||t.push(r);return{arrayValue:{values:t}}}class Jl extends Xf{constructor(e){super(),this.elements=e}}function GR(n,e){let t=WR(e);for(const r of n.elements)t=t.filter(i=>!Vi(i,r));return{arrayValue:{values:t}}}class Uc extends Xf{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function z0(n){return jt(n.integerValue||n.doubleValue)}function WR(n){return Mc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,t){this.field=e,this.transform=t}}function cN(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Yl&&i instanceof Yl||r instanceof Jl&&i instanceof Jl?Hl(r.elements,i.elements,Vi):r instanceof Uc&&i instanceof Uc?Vi(r.Pe,i.Pe):r instanceof Ql&&i instanceof Ql}(n.transform,e.transform)}class hN{constructor(e,t){this.version=e,this.transformResults=t}}class en{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Zf{}function YR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new nh(n.key,en.none()):new uu(n.key,n.data,en.none());{const t=n.data,r=bn.empty();let i=new Pt(Kt.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new ms(n.key,r,new ur(i.toArray()),en.none())}}function dN(n,e,t){n instanceof uu?function(i,o,l){const c=i.value.clone(),h=q0(i.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ms?function(i,o,l){if(!Qd(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=q0(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(JR(i)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Tc(n,e,t,r){return n instanceof uu?function(o,l,c,h){if(!Qd(o.precondition,l))return c;const p=o.value.clone(),g=H0(o.fieldTransforms,h,l);return p.setAll(g),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof ms?function(o,l,c,h){if(!Qd(o.precondition,l))return c;const p=H0(o.fieldTransforms,h,l),g=l.data;return g.setAll(JR(o)),g.setAll(p),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,l,c){return Qd(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function fN(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=HR(r.transform,i||null);o!=null&&(t===null&&(t=bn.empty()),t.set(r.field,o))}return t||null}function $0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Hl(r,i,(o,l)=>cN(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class uu extends Zf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ms extends Zf{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function JR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function q0(n,e,t){const r=new Map;ke(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,uN(l,c,t[i]))}return r}function H0(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,lN(o,l,e))}return r}class nh extends Zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T_ extends Zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&dN(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Tc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=$R();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(i.key)?null:c;const h=YR(l,c);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Je())}isEqual(e){return this.batchId===e.batchId&&Hl(this.mutations,e.mutations,(t,r)=>$0(t,r))&&Hl(this.baseMutations,e.baseMutations,(t,r)=>$0(t,r))}}class S_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ke(e.mutations.length===r.length);let i=function(){return iN}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new S_(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn,at;function XR(n){switch(n){default:return Te();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0}}function ZR(n){if(n===void 0)return Zt("GRPC error has no .code"),ee.UNKNOWN;switch(n){case sn.OK:return ee.OK;case sn.CANCELLED:return ee.CANCELLED;case sn.UNKNOWN:return ee.UNKNOWN;case sn.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case sn.INTERNAL:return ee.INTERNAL;case sn.UNAVAILABLE:return ee.UNAVAILABLE;case sn.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case sn.NOT_FOUND:return ee.NOT_FOUND;case sn.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case sn.ABORTED:return ee.ABORTED;case sn.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case sn.DATA_LOSS:return ee.DATA_LOSS;default:return Te()}}(at=sn||(sn={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=new ca([4294967295,4294967295],0);function K0(n){const e=mN().encode(n),t=new sR;return t.update(e),new Uint8Array(t.digest())}function G0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ca([t,r],0),new ca([i,o],0)]}class A_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fc(`Invalid padding: ${t}`);if(r<0)throw new fc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ca.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ca.fromNumber(r)));return i.compare(gN)===1&&(i=new ca([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=K0(e),[r,i]=G0(t);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,i,o);if(!this.de(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new A_(o,i,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.Ie===0)return;const t=K0(e),[r,i]=G0(t);for(let o=0;o<this.hashCount;o++){const l=this.Ee(r,i,o);this.Ae(l)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,ih.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new rh(xe.min(),i,new Dt(Ke),Tr(),Je())}}class ih{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ih(r,t,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class eA{constructor(e,t){this.targetId=e,this.me=t}}class tA{constructor(e,t,r=tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class W0{constructor(){this.fe=0,this.ge=Y0(),this.pe=tn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Je(),t=Je(),r=Je();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Te()}}),new ih(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Y0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yN{constructor(e){this.Le=e,this.Be=new Map,this.ke=Tr(),this.qe=Q0(),this.Qe=new Dt(Ke)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const o=i.target;if(mf(o))if(r===0){const l=new me(o.path);this.Ue(t,l,zt.newNoDocument(l,xe.min()))}else ke(r===1);else{const l=this.Ye(t);if(l!==r){const c=this.Ze(e),h=c?this.Xe(c,e,l):1;if(h!==0){this.je(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,p)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,c;try{l=go(r).toUint8Array()}catch(h){if(h instanceof RR)return fa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new A_(l,i,o)}catch(h){return fa(h instanceof fc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const l=this.Le.tt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,o,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((o,l)=>{const c=this.Je(l);if(c){if(o.current&&mf(c.target)){const h=new me(c.target.path);this.ke.get(h)!==null||this.it(l,h)||this.Ue(l,h,zt.newNoDocument(h,e))}o.be&&(t.set(l,o.ve()),o.Ce())}});let r=Je();this.qe.forEach((o,l)=>{let c=!0;l.forEachWhile(h=>{const p=this.Je(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const i=new rh(e,t,this.Qe,this.ke,r);return this.ke=Tr(),this.qe=Q0(),this.Qe=new Dt(Ke),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new W0,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Pt(Ke),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new W0),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Q0(){return new Dt(me.comparator)}function Y0(){return new Dt(me.comparator)}const _N={asc:"ASCENDING",desc:"DESCENDING"},vN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wN={and:"AND",or:"OR"};class EN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cy(n,e){return n.useProto3Json||Xc(e)?e:{value:e}}function Xl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function TN(n,e){return Xl(n,e.toTimestamp())}function Tn(n){return ke(!!n),xe.fromTimestamp(function(t){const r=fs(t);return new Gt(r.seconds,r.nanos)}(n))}function P_(n,e){return ky(n,e).canonicalString()}function ky(n,e){const t=function(i){return new dt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function rA(n){const e=dt.fromString(n);return ke(dA(e)),e}function Bc(n,e){return P_(n.databaseId,e.path)}function as(n,e){const t=rA(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(oA(t))}function iA(n,e){return P_(n.databaseId,e)}function sA(n){const e=rA(n);return e.length===4?dt.emptyPath():oA(e)}function by(n){return new dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oA(n){return ke(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function J0(n,e,t){return{name:Bc(n,e),fields:t.value.mapValue.fields}}function IN(n,e,t){const r=as(n,e.name),i=Tn(e.updateTime),o=e.createTime?Tn(e.createTime):xe.min(),l=new bn({mapValue:{fields:e.fields}}),c=zt.newFoundDocument(r,i,o,l);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function SN(n,e){return"found"in e?function(r,i){ke(!!i.found),i.found.name,i.found.updateTime;const o=as(r,i.found.name),l=Tn(i.found.updateTime),c=i.found.createTime?Tn(i.found.createTime):xe.min(),h=new bn({mapValue:{fields:i.found.fields}});return zt.newFoundDocument(o,l,c,h)}(n,e):"missing"in e?function(r,i){ke(!!i.missing),ke(!!i.readTime);const o=as(r,i.missing),l=Tn(i.readTime);return zt.newNoDocument(o,l)}(n,e):Te()}function RN(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(p,g){return p.useProto3Json?(ke(g===void 0||typeof g=="string"),tn.fromBase64String(g||"")):(ke(g===void 0||g instanceof Buffer||g instanceof Uint8Array),tn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(p){const g=p.code===void 0?ee.UNKNOWN:ZR(p.code);return new ue(g,p.message||"")}(l);t=new tA(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=as(n,r.document.name),o=Tn(r.document.updateTime),l=r.document.createTime?Tn(r.document.createTime):xe.min(),c=new bn({mapValue:{fields:r.document.fields}}),h=zt.newFoundDocument(i,o,l,c),p=r.targetIds||[],g=r.removedTargetIds||[];t=new Yd(p,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=as(n,r.document),o=r.readTime?Tn(r.readTime):xe.min(),l=zt.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Yd([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=as(n,r.document),o=r.removedTargetIds||[];t=new Yd([],o,i,null)}else{if(!("filter"in e))return Te();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new pN(i,o),c=r.targetId;t=new eA(c,l)}}return t}function jc(n,e){let t;if(e instanceof uu)t={update:J0(n,e.key,e.value)};else if(e instanceof nh)t={delete:Bc(n,e.key)};else if(e instanceof ms)t={update:J0(n,e.key,e.data),updateMask:DN(e.fieldMask)};else{if(!(e instanceof T_))return Te();t={verify:Bc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof Ql)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Yl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Jl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Uc)return{fieldPath:l.field.canonicalString(),increment:c.Pe};throw Te()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:TN(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Te()}(n,e.precondition)),t}function Dy(n,e){const t=e.currentDocument?function(o){return o.updateTime!==void 0?en.updateTime(Tn(o.updateTime)):o.exists!==void 0?en.exists(o.exists):en.none()}(e.currentDocument):en.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(l,c){let h=null;if("setToServerValue"in c)ke(c.setToServerValue==="REQUEST_TIME"),h=new Ql;else if("appendMissingElements"in c){const g=c.appendMissingElements.values||[];h=new Yl(g)}else if("removeAllFromArray"in c){const g=c.removeAllFromArray.values||[];h=new Jl(g)}else"increment"in c?h=new Uc(l,c.increment):Te();const p=Kt.fromServerFormat(c.fieldPath);return new QR(p,h)}(n,i)):[];if(e.update){e.update.name;const i=as(n,e.update.name),o=new bn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=function(h){const p=h.fieldPaths||[];return new ur(p.map(g=>Kt.fromServerFormat(g)))}(e.updateMask);return new ms(i,o,l,t,r)}return new uu(i,o,t,r)}if(e.delete){const i=as(n,e.delete);return new nh(i,t)}if(e.verify){const i=as(n,e.verify);return new T_(i,t)}return Te()}function AN(n,e){return n&&n.length>0?(ke(e!==void 0),n.map(t=>function(i,o){let l=i.updateTime?Tn(i.updateTime):Tn(o);return l.isEqual(xe.min())&&(l=Tn(o)),new hN(l,i.transformResults||[])}(t,e))):[]}function aA(n,e){return{documents:[iA(n,e.path)]}}function lA(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=iA(n,i);const o=function(p){if(p.length!==0)return hA(Tt.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(p){if(p.length!==0)return p.map(g=>function(E){return{field:Al(E.field),direction:CN(E.dir)}}(g))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Cy(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:t,parent:i}}function uA(n){let e=sA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ke(r===1);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(v){const E=cA(v);return E instanceof Tt&&v_(E)?E.getFilters():[E]}(t.where));let l=[];t.orderBy&&(l=function(v){return v.map(E=>function(D){return new Fc(Pl(D.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(E))}(t.orderBy));let c=null;t.limit&&(c=function(v){let E;return E=typeof v=="object"?v.value:v,Xc(E)?null:E}(t.limit));let h=null;t.startAt&&(h=function(v){const E=!!v.before,I=v.values||[];return new Gl(I,E)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const E=!v.before,I=v.values||[];return new Gl(I,E)}(t.endAt)),LR(e,i,l,o,c,"F",h,p)}function PN(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Pl(t.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Pl(t.unaryFilter.field);return nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Pl(t.unaryFilter.field);return nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Pl(t.unaryFilter.field);return nt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(n):n.fieldFilter!==void 0?function(t){return nt.create(Pl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Tt.create(t.compositeFilter.filters.map(r=>cA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te()}}(t.compositeFilter.op))}(n):Te()}function CN(n){return _N[n]}function kN(n){return vN[n]}function bN(n){return wN[n]}function Al(n){return{fieldPath:n.canonicalString()}}function Pl(n){return Kt.fromServerFormat(n.fieldPath)}function hA(n){return n instanceof nt?function(t){if(t.op==="=="){if(O0(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NAN"}};if(N0(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(O0(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NOT_NAN"}};if(N0(t.value))return{unaryFilter:{field:Al(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Al(t.field),op:kN(t.op),value:t.value}}}(n):n instanceof Tt?function(t){const r=t.getFilters().map(i=>hA(i));return r.length===1?r[0]:{compositeFilter:{op:bN(t.op),filters:r}}}(n):Te()}function DN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,t,r,i,o=xe.min(),l=xe.min(),c=tn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.ct=e}}function xN(n,e){let t;if(e.document)t=IN(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=me.fromSegments(e.noDocument.path),i=_a(e.noDocument.readTime);t=zt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te();{const r=me.fromSegments(e.unknownDocument.path),i=_a(e.unknownDocument.version);t=zt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new Gt(i[0],i[1]);return xe.fromTimestamp(o)}(e.readTime)),t}function X0(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:yf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,l){return{name:Bc(o,l.key),fields:l.data.value.mapValue.fields,updateTime:Xl(o,l.version.toTimestamp()),createTime:Xl(o,l.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ya(e.version)};else{if(!e.isUnknownDocument())return Te();r.unknownDocument={path:t.path.toArray(),version:ya(e.version)}}return r}function yf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ya(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _a(n){const e=new Gt(n.seconds,n.nanoseconds);return xe.fromTimestamp(e)}function ta(n,e){const t=(e.baseMutations||[]).map(o=>Dy(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const c=e.mutations[o+1];l.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>Dy(n.ct,o)),i=Gt.fromMillis(e.localWriteTimeMs);return new I_(e.batchId,i,t,r)}function pc(n){const e=_a(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?_a(n.lastLimboFreeSnapshotVersion):xe.min();let r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return ke(o.documents.length===1),Sr(eh(sA(o.documents[0])))}(n.query):function(o){return Sr(uA(o))}(n.query),new rs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,tn.fromBase64String(n.resumeToken))}function pA(n,e){const t=ya(e.snapshotVersion),r=ya(e.lastLimboFreeSnapshotVersion);let i;i=mf(e.target)?aA(n.ct,e.target):lA(n.ct,e.target)._t;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ga(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function mA(n){const e=uA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Py(e,e.limit,"L"):e}function mg(n,e){return new R_(e.largestBatchId,Dy(n.ct,e.overlayMutation))}function Z0(n,e){const t=e.path.lastSegment();return[n,Hn(e.path.popLast()),t]}function eT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ya(r.readTime),documentKey:Hn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{getBundleMetadata(e,t){return tT(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:_a(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return tT(e).put(function(i){return{bundleId:i.id,createTime:ya(Tn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return nT(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:mA(o.bundledQuery),readTime:_a(o.readTime)}}(r)})}saveNamedQuery(e,t){return nT(e).put(function(i){return{name:i.name,readTime:ya(Tn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function tT(n){return pn(n,"bundles")}function nT(n){return pn(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new ep(e,r)}getOverlay(e,t){return Yu(e).get(Z0(this.userId,t)).next(r=>r?mg(this.serializer,r):null)}getOverlays(e,t){const r=ki();return W.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,l)=>{const c=new R_(t,l);i.push(this.ht(e,c))}),W.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Hn(l.getCollectionPath())));const o=[];return i.forEach(l=>{const c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push(Yu(e).j("collectionPathOverlayIndex",c))}),W.waitFor(o)}getOverlaysForCollection(e,t,r){const i=ki(),o=Hn(t),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Yu(e).U("collectionPathOverlayIndex",l).next(c=>{for(const h of c){const p=mg(this.serializer,h);i.set(p.getKey(),p)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=ki();let l;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Yu(e).J({index:"collectionGroupOverlayIndex",range:c},(h,p,g)=>{const v=mg(this.serializer,p);o.size()<i||v.largestBatchId===l?(o.set(v.getKey(),v),l=v.largestBatchId):g.done()}).next(()=>o)}ht(e,t){return Yu(e).put(function(i,o,l){const[c,h,p]=Z0(o,l.mutation.key);return{userId:o,collectionPath:h,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:jc(i.ct,l.mutation)}}(this.serializer,this.userId,t))}}function Yu(n){return pn(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{Pt(e){return pn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?tn.fromUint8Array(r):tn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(jt(e.integerValue));else if("doubleValue"in e){const r=jt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Nc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=fs(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(go(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?AR(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Yf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Te()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const o=e.fields||{};this.dt(t,53);const l="value",c=((i=(r=o[l].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(jt(c)),this.Vt(l,t),this.Tt(o[l],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),me.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}na.vt=new na;function VN(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function rT(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const l=VN(255&r[o]);if(i+=l,l!==8)break}return i}(n);return Math.ceil(e/8)}class LN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=rT(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=rT(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class MN{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class FN{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Ju{constructor(){this.jt=new LN,this.Ht=new MN(this.jt),this.Jt=new FN(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ra(this.indexId,this.documentKey,this.arrayValue,r)}}function Ws(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=iT(n.arrayValue,e.arrayValue),t!==0?t:(t=iT(n.directionalValue,e.directionalValue),t!==0?t:me.comparator(n.documentKey,e.documentKey)))}function iT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.Xt=new Pt((t,r)=>Kt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ke(e.collectionGroup===this.collectionId),this.nn)return!1;const t=vy(e);if(t!==void 0&&!this.sn(t))return!1;const r=Zo(e);let i=new Set,o=0,l=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!i.has(c.field.canonicalString())){const h=r[o];if(!this.on(c,h)||!this._n(this.en[l++],h))return!1}++o}for(;o<r.length;++o){const c=r[o];if(l>=this.en.length||!this._n(this.en[l++],c))return!1}return!0}an(){if(this.nn)return null;let e=new Pt(Kt.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Hd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Hd(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Hd(r.field,r.dir==="asc"?0:1)));return new pf(pf.UNKNOWN_ID,this.collectionId,t,xc.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(n){var e,t;if(ke(n instanceof nt||n instanceof Tt),n instanceof nt){if(n instanceof VR){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>nt.create(n.field,"==",o)))||[];return Tt.create(i,"or")}return n}const r=n.filters.map(i=>gA(i));return Tt.create(r,n.op)}function UN(n){if(n.getFilters().length===0)return[];const e=Oy(gA(n));return ke(yA(e)),xy(e)||Ny(e)?[e]:e.getFilters()}function xy(n){return n instanceof nt}function Ny(n){return n instanceof Tt&&v_(n)}function yA(n){return xy(n)||Ny(n)||function(t){if(t instanceof Tt&&Iy(t)){for(const r of t.getFilters())if(!xy(r)&&!Ny(r))return!1;return!0}return!1}(n)}function Oy(n){if(ke(n instanceof nt||n instanceof Tt),n instanceof nt)return n;if(n.filters.length===1)return Oy(n.filters[0]);const e=n.filters.map(r=>Oy(r));let t=Tt.create(e,n.op);return t=_f(t),yA(t)?t:(ke(t instanceof Tt),ke(Wl(t)),ke(t.filters.length>1),t.filters.reduce((r,i)=>C_(r,i)))}function C_(n,e){let t;return ke(n instanceof nt||n instanceof Tt),ke(e instanceof nt||e instanceof Tt),t=n instanceof nt?e instanceof nt?function(i,o){return Tt.create([i,o],"and")}(n,e):oT(n,e):e instanceof nt?oT(e,n):function(i,o){if(ke(i.filters.length>0&&o.filters.length>0),Wl(i)&&Wl(o))return xR(i,o.getFilters());const l=Iy(i)?i:o,c=Iy(i)?o:i,h=l.filters.map(p=>C_(p,c));return Tt.create(h,"or")}(n,e),_f(t)}function oT(n,e){if(Wl(e))return xR(e,n.getFilters());{const t=e.filters.map(r=>C_(n,r));return Tt.create(t,"or")}}function _f(n){if(ke(n instanceof nt||n instanceof Tt),n instanceof nt)return n;const e=n.getFilters();if(e.length===1)return _f(e[0]);if(bR(n))return n;const t=e.map(i=>_f(i)),r=[];return t.forEach(i=>{i instanceof nt?r.push(i):i instanceof Tt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Tt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.un=new k_}addToCollectionParentIndex(e,t){return this.un.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Rr.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class k_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pt(dt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new Uint8Array(0);class jN{constructor(e,t){this.databaseId=t,this.cn=new k_,this.ln=new Eo(r=>ga(r),(r,i)=>Zc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const o={collectionId:r,parent:Hn(i)};return aT(e).put(o)}return W.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[fR(t),""],!1,!0);return aT(e).U(i).next(o=>{for(const l of o){if(l.collectionId!==t)break;r.push(Ci(l.parent))}return r})}addFieldIndex(e,t){const r=Xu(e),i=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])}}(t);delete i.indexId;const o=r.add(i);if(t.indexState){const l=_l(e);return o.next(c=>{l.put(eT(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Xu(e),i=_l(e),o=yl(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Xu(e),r=yl(e),i=_l(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return W.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const o=new sT(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=yl(e);let i=!0;const o=new Map;return W.forEach(this.hn(t),l=>this.Pn(e,l).next(c=>{i&&(i=!!c),o.set(l,c)})).next(()=>{if(i){let l=Je();const c=[];return W.forEach(o,(h,p)=>{se("IndexedDbIndexManager",`Using index ${function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`}(h)} to execute ${ga(t)}`);const g=function(j,H){const re=vy(H);if(re===void 0)return null;for(const b of gf(j,re.fieldPath))switch(b.op){case"array-contains-any":return b.value.arrayValue.values||[];case"array-contains":return[b.value]}return null}(p,h),v=function(j,H){const re=new Map;for(const b of Zo(H))for(const P of gf(j,b.fieldPath))switch(P.op){case"==":case"in":re.set(b.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return re.set(b.fieldPath.canonicalString(),P.value),Array.from(re.values())}return null}(p,h),E=function(j,H){const re=[];let b=!0;for(const P of Zo(H)){const S=P.kind===0?U0(j,P.fieldPath,j.startAt):B0(j,P.fieldPath,j.startAt);re.push(S.value),b&&(b=S.inclusive)}return new Gl(re,b)}(p,h),I=function(j,H){const re=[];let b=!0;for(const P of Zo(H)){const S=P.kind===0?B0(j,P.fieldPath,j.endAt):U0(j,P.fieldPath,j.endAt);re.push(S.value),b&&(b=S.inclusive)}return new Gl(re,b)}(p,h),D=this.In(h,p,E),x=this.In(h,p,I),V=this.Tn(h,p,v),G=this.En(h.indexId,g,D,E.inclusive,x,I.inclusive,V);return W.forEach(G,$=>r.G($,t.limit).next(j=>{j.forEach(H=>{const re=me.fromSegments(H.documentKey);l.has(re)||(l=l.add(re),c.push(re))})}))}).next(()=>c)}return W.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=UN(Tt.create(e.filters,"and")).map(r=>Ry(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,l,c){const h=(t!=null?t.length:1)*Math.max(r.length,o.length),p=h/(t!=null?t.length:1),g=[];for(let v=0;v<h;++v){const E=t?this.dn(t[v/p]):kd,I=this.An(e,E,r[v%p],i),D=this.Rn(e,E,o[v%p],l),x=c.map(V=>this.An(e,E,V,!0));g.push(...this.createRange(I,D,x))}return g}An(e,t,r,i){const o=new ra(e,me.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){const o=new ra(e,me.empty(),t,r);return i?o.Zt():o}Pn(e,t){const r=new sT(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let l=null;for(const c of o)r.rn(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l})}getIndexType(e,t){let r=2;const i=this.hn(t);return W.forEach(i,o=>this.Pn(e,o).next(l=>{l?r!==0&&l.fields.length<function(h){let p=new Pt(Kt.comparator),g=!1;for(const v of h.filters)for(const E of v.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?g=!0:p=p.add(E.field));for(const v of h.orderBy)v.field.isKeyField()||(p=p.add(v.field));return p.size+(g?1:0)}(o)&&(r=1):r=0})).next(()=>function(l){return l.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){const r=new Ju;for(const i of Zo(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const l=r.Yt(i.kind);na.vt.It(o,l)}return r.zt()}dn(e){const t=new Ju;return na.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Ju;return na.vt.It(Lc(this.databaseId,t),r.Yt(function(o){const l=Zo(o);return l.length===0?0:l[l.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Ju);let o=0;for(const l of Zo(e)){const c=r[o++];for(const h of i)if(this.fn(t,l.fieldPath)&&Mc(c))i=this.gn(i,l,c);else{const p=h.Yt(l.kind);na.vt.It(c,p)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],o=[];for(const l of r.arrayValue.values||[])for(const c of i){const h=new Ju;h.seed(c.zt()),na.vt.It(l,h.Yt(t.kind)),o.push(h)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof nt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Xu(e),i=_l(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{const l=[];return W.forEach(o,c=>i.get([c.indexId,this.uid]).next(h=>{l.push(function(g,v){const E=v?new xc(v.sequenceNumber,new Rr(_a(v.readTime),new me(Ci(v.documentKey)),v.largestBatchId)):xc.empty(),I=g.fields.map(([D,x])=>new Hd(Kt.fromServerFormat(D),x));return new pf(g.indexId,g.collectionGroup,I,E)}(c,h))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Ke(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Xu(e),o=_l(e);return this.yn(e).next(l=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>W.forEach(c,h=>o.put(eT(h.indexId,this.uid,l,r)))))}updateIndexEntries(e,t){const r=new Map;return W.forEach(t,(i,o)=>{const l=r.get(i.collectionGroup);return(l?W.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),W.forEach(c,h=>this.wn(e,i,h).next(p=>{const g=this.Sn(o,h);return p.isEqual(g)?W.resolve():this.bn(e,o,h,p,g)}))))})}Dn(e,t,r,i){return yl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return yl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=yl(e);let o=new Pt(Ws);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(l,c)=>{o=o.add(new ra(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Pt(Ws);const i=this.Vn(t,e);if(i==null)return r;const o=vy(t);if(o!=null){const l=e.data.field(o.fieldPath);if(Mc(l))for(const c of l.arrayValue.values||[])r=r.add(new ra(t.indexId,e.key,this.dn(c),i))}else r=r.add(new ra(t.indexId,e.key,kd,i));return r}bn(e,t,r,i,o){se("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,p,g,v,E){const I=h.getIterator(),D=p.getIterator();let x=gl(I),V=gl(D);for(;x||V;){let G=!1,$=!1;if(x&&V){const j=g(x,V);j<0?$=!0:j>0&&(G=!0)}else x!=null?$=!0:G=!0;G?(v(V),V=gl(D)):$?(E(x),x=gl(I)):(x=gl(I),V=gl(D))}}(i,o,Ws,c=>{l.push(this.Dn(e,t,r,c))},c=>{l.push(this.vn(e,t,r,c))}),W.waitFor(l)}yn(e){let t=1;return _l(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,c)=>Ws(l,c)).filter((l,c,h)=>!c||Ws(l,h[c-1])!==0);const i=[];i.push(e);for(const l of r){const c=Ws(l,e),h=Ws(l,t);if(c===0)i[0]=e.Zt();else if(c>0&&h<0)i.push(l),i.push(l.Zt());else if(h>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2){if(this.Cn(i[l],i[l+1]))return[];const c=[i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,kd,[]],h=[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,kd,[]];o.push(IDBKeyRange.bound(c,h))}return o}Cn(e,t){return Ws(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(lT)}getMinOffset(e,t){return W.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Te())).next(lT)}}function aT(n){return pn(n,"collectionParents")}function yl(n){return pn(n,"indexEntries")}function Xu(n){return pn(n,"indexConfiguration")}function _l(n){return pn(n,"indexState")}function lT(n){ke(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;p_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Rr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class or{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new or(e,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],l=IDBKeyRange.only(t.batchId);let c=0;const h=r.J({range:l},(g,v,E)=>(c++,E.delete()));o.push(h.next(()=>{ke(c===1)}));const p=[];for(const g of t.mutations){const v=wR(e,g.key.path,t.batchId);o.push(i.delete(v)),p.push(g.key)}return W.waitFor(o).next(()=>p)}function vf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Te();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or.DEFAULT_COLLECTION_PERCENTILE=10,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,or.DEFAULT=new or(41943040,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),or.DISABLED=new or(-1,0,0);class tp{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){ke(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new tp(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qs(e).J({index:"userMutationsIndex",range:r},(i,o,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Cl(e),l=Qs(e);return l.add({}).next(c=>{ke(typeof c=="number");const h=new I_(c,t,r,i),p=function(I,D,x){const V=x.baseMutations.map($=>jc(I.ct,$)),G=x.mutations.map($=>jc(I.ct,$));return{userId:D,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:V,mutations:G}}(this.serializer,this.userId,h),g=[];let v=new Pt((E,I)=>Ke(E.canonicalString(),I.canonicalString()));for(const E of i){const I=wR(this.userId,E.key.path,c);v=v.add(E.key.path.popLast()),g.push(l.put(p)),g.push(o.put(I,Rx))}return v.forEach(E=>{g.push(this.indexManager.addToCollectionParentIndex(e,E))}),e.addOnCommittedListener(()=>{this.Fn[c]=h.keys()}),W.waitFor(g).next(()=>h)})}lookupMutationBatch(e,t){return Qs(e).get(t).next(r=>r?(ke(r.userId===this.userId),ta(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?W.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Qs(e).J({index:"userMutationsIndex",range:i},(l,c,h)=>{c.userId===this.userId&&(ke(c.batchId>=r),o=ta(this.serializer,c)),h.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Qs(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,l)=>{r=o.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qs(e).U("userMutationsIndex",t).next(r=>r.map(i=>ta(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Kd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Cl(e).J({range:i},(l,c,h)=>{const[p,g,v]=l,E=Ci(g);if(p===this.userId&&t.path.isEqual(E))return Qs(e).get(v).next(I=>{if(!I)throw Te();ke(I.userId===this.userId),o.push(ta(this.serializer,I))});h.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pt(Ke);const i=[];return t.forEach(o=>{const l=Kd(this.userId,o.path),c=IDBKeyRange.lowerBound(l),h=Cl(e).J({range:c},(p,g,v)=>{const[E,I,D]=p,x=Ci(I);E===this.userId&&o.path.isEqual(x)?r=r.add(D):v.done()});i.push(h)}),W.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Kd(this.userId,r),l=IDBKeyRange.lowerBound(o);let c=new Pt(Ke);return Cl(e).J({range:l},(h,p,g)=>{const[v,E,I]=h,D=Ci(E);v===this.userId&&r.isPrefixOf(D)?D.length===i&&(c=c.add(I)):g.done()}).next(()=>this.xn(e,c))}xn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(Qs(e).get(o).next(l=>{if(l===null)throw Te();ke(l.userId===this.userId),r.push(ta(this.serializer,l))}))}),W.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return _A(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),W.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return W.resolve();const r=IDBKeyRange.lowerBound(function(l){return[l]}(this.userId)),i=[];return Cl(e).J({range:r},(o,l,c)=>{if(o[0]===this.userId){const h=Ci(o[1]);i.push(h)}else c.done()}).next(()=>{ke(i.length===0)})})}containsKey(e,t){return vA(e,this.userId,t)}Nn(e){return wA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function vA(n,e,t){const r=Kd(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return Cl(n).J({range:o,H:!0},(c,h,p)=>{const[g,v,E]=c;g===e&&v===i&&(l=!0),p.done()}).next(()=>l)}function Qs(n){return pn(n,"mutations")}function Cl(n){return pn(n,"documentMutations")}function wA(n){return pn(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new va(0)}static kn(){return new va(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new va(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>xe.fromTimestamp(new Gt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vl(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(ke(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return vl(e).J((l,c)=>{const h=pc(c);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(i++,o.push(this.removeTargetData(e,h)))}).next(()=>W.waitFor(o)).next(()=>i)}forEachTarget(e,t){return vl(e).J((r,i)=>{const o=pc(i);t(o)})}qn(e){return cT(e).get("targetGlobalKey").next(t=>(ke(t!==null),t))}Qn(e,t){return cT(e).put("targetGlobalKey",t)}Kn(e,t){return vl(e).put(pA(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ga(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return vl(e).J({range:i,index:"queryTargetsIndex"},(l,c,h)=>{const p=pc(c);Zc(t,p.target)&&(o=p,h.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=to(e);return t.forEach(l=>{const c=Hn(l.path);i.push(o.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,l))}),W.waitFor(i)}removeMatchingKeys(e,t,r){const i=to(e);return W.forEach(t,o=>{const l=Hn(o.path);return W.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=to(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=to(e);let o=Je();return i.J({range:r,H:!0},(l,c,h)=>{const p=Ci(l[1]),g=new me(p);o=o.add(g)}).next(()=>o)}containsKey(e,t){const r=Hn(t.path),i=IDBKeyRange.bound([r],[fR(r)],!1,!0);let o=0;return to(e).J({index:"documentTargetsIndex",H:!0,range:i},([l,c],h,p)=>{l!==0&&(o++,p.done())}).next(()=>o>0)}ot(e,t){return vl(e).get(t).next(r=>r?pc(r):null)}}function vl(n){return pn(n,"targets")}function cT(n){return pn(n,"targetGlobal")}function to(n){return pn(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT([n,e],[t,r]){const i=Ke(n,t);return i===0?Ke(e,r):i}class $N{constructor(e){this.Un=e,this.buffer=new Pt(hT),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();hT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wo(t)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await vo(t)}await this.Hn(3e5)})}}class HN{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve(lr.oe);const r=new $N(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(uT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uT):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,l,c,h,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,l=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,c=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(p=Date.now(),Sl()<=tt.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${v} documents in `+(p-h)+`ms
Total Duration: ${p-g}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:v})))}}function KN(n,e){return new HN(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,t){this.db=e,this.garbageCollector=KN(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return bd(e,r)}removeReference(e,t,r){return bd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return bd(e,t)}nr(e,t){return function(i,o){let l=!1;return wA(i).Y(c=>vA(i,c,o).next(h=>(h&&(l=!0),W.resolve(!h)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.tr(e,(l,c)=>{if(c<=t){const h=this.nr(e,l).next(p=>{if(!p)return o++,r.getEntry(e,l).next(()=>(r.removeEntry(l,xe.min()),to(e).delete(function(v){return[0,Hn(v.path)]}(l))))});i.push(h)}}).next(()=>W.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return bd(e,t)}tr(e,t){const r=to(e);let i,o=lr.oe;return r.J({index:"documentTargetsIndex"},([l,c],{path:h,sequenceNumber:p})=>{l===0?(o!==lr.oe&&t(new me(Ci(i)),o),o=p,i=h):o=lr.oe}).next(()=>{o!==lr.oe&&t(new me(Ci(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bd(n,e){return to(n).put(function(r,i){return{targetId:0,path:Hn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this.changes=new Eo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Jo(e).put(r)}removeEntry(e,t,r){return Jo(e).delete(function(o,l){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],yf(l),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=zt.newInvalidDocument(t);return Jo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zu(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:zt.newInvalidDocument(t)};return Jo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zu(t))},(i,o)=>{r={document:this.ir(t,o),size:vf(o)}}).next(()=>r)}getEntries(e,t){let r=Tr();return this._r(e,t,(i,o)=>{const l=this.ir(i,o);r=r.insert(i,l)}).next(()=>r)}ar(e,t){let r=Tr(),i=new Dt(me.comparator);return this._r(e,t,(o,l)=>{const c=this.ir(o,l);r=r.insert(o,c),i=i.insert(o,vf(l))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return W.resolve();let i=new Pt(pT);t.forEach(h=>i=i.add(h));const o=IDBKeyRange.bound(Zu(i.first()),Zu(i.last())),l=i.getIterator();let c=l.getNext();return Jo(e).J({index:"documentKeyIndex",range:o},(h,p,g)=>{const v=me.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;c&&pT(c,v)<0;)r(c,null),c=l.getNext();c&&c.isEqual(v)&&(r(c,p),c=l.hasNext()?l.getNext():null),c?g.$(Zu(c)):g.done()}).next(()=>{for(;c;)r(c,null),c=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const l=t.path,c=[l.popLast().toArray(),l.lastSegment(),yf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jo(e).U(IDBKeyRange.bound(c,h,!0)).next(p=>{o==null||o.incrementDocumentReadCount(p.length);let g=Tr();for(const v of p){const E=this.ir(me.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);E.isFoundDocument()&&(th(t,E)||i.has(E.key))&&(g=g.insert(E.key,E))}return g})}getAllFromCollectionGroup(e,t,r,i){let o=Tr();const l=fT(t,r),c=fT(t,Rr.max());return Jo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,c,!0)},(h,p,g)=>{const v=this.ir(me.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);o=o.insert(v.key,v),o.size===i&&g.done()}).next(()=>o)}newChangeBuffer(e){return new QN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dT(e).get("remoteDocumentGlobalKey").next(t=>(ke(!!t),t))}rr(e,t){return dT(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=xN(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(xe.min())))return r}return zt.newInvalidDocument(e)}}function TA(n){return new WN(n)}class QN extends EA{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Eo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Pt((o,l)=>Ke(o.canonicalString(),l.canonicalString()));return this.changes.forEach((o,l)=>{const c=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,c.readTime)),l.isValidDocument()){const h=X0(this.cr.serializer,l);i=i.add(o.path.popLast());const p=vf(h);r+=p-c.size,t.push(this.cr.addEntry(e,o,h))}else if(r-=c.size,this.trackRemovals){const h=X0(this.cr.serializer,l.convertToNoDocument(xe.min()));t.push(this.cr.addEntry(e,o,h))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),W.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,l)=>{this.lr.set(o,{size:l,readTime:r.get(o).readTime})}),r))}}function dT(n){return pn(n,"remoteDocumentGlobal")}function Jo(n){return pn(n,"remoteDocumentsV14")}function Zu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fT(n,e){const t=e.documentKey.path.toArray();return[n,yf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function pT(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Ke(t[o],r[o]),i)return i;return i=Ke(t.length,r.length),i||(i=Ke(t[t.length-2],r[r.length-2]),i||Ke(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Tc(r.mutation,i,ur.empty(),Gt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Je()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Je()){const i=ki();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=dc();return o.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ki();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Je()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,i){let o=Tr();const l=Ec(),c=function(){return Ec()}();return t.forEach((h,p)=>{const g=r.get(p.key);i.has(p.key)&&(g===void 0||g.mutation instanceof ms)?o=o.insert(p.key,p):g!==void 0?(l.set(p.key,g.mutation.getFieldMask()),Tc(g.mutation,p,g.mutation.getFieldMask(),Gt.now())):l.set(p.key,ur.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((p,g)=>l.set(p,g)),t.forEach((p,g)=>{var v;return c.set(p,new YN(g,(v=l.get(p))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,t){const r=Ec();let i=new Dt((l,c)=>l-c),o=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(h=>{const p=t.get(h);if(p===null)return;let g=r.get(h)||ur.empty();g=c.applyToLocalView(p,g),r.set(h,g);const v=(i.get(c.batchId)||Je()).add(h);i=i.insert(c.batchId,v)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),p=h.key,g=h.value,v=$R();g.forEach(E=>{if(!o.has(E)){const I=YR(t.get(E),r.get(E));I!==null&&v.set(E,I),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,v))}return W.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(l){return me.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):MR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):W.resolve(ki());let c=-1,h=o;return l.next(p=>W.forEach(p,(g,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(g)?W.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{h=h.insert(g,E)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,h,p,Je())).next(g=>({batchId:c,changes:zR(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next(r=>{let i=dc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=dc();return this.indexManager.getCollectionParents(e,o).next(c=>W.forEach(c,h=>{const p=function(v,E){return new lu(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(g=>{g.forEach((v,E)=>{l=l.insert(v,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(l=>{o.forEach((h,p)=>{const g=p.getKey();l.get(g)===null&&(l=l.insert(g,zt.newInvalidDocument(g)))});let c=dc();return l.forEach((h,p)=>{const g=o.get(h);g!==void 0&&Tc(g.mutation,p,ur.empty(),Gt.now()),th(t,p)&&(c=c.insert(h,p))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return W.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Tn(i.createTime)}}(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:mA(i.bundledQuery),readTime:Tn(i.readTime)}}(t)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(){this.overlays=new Dt(me.comparator),this.Ir=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ki();return W.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),W.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){const i=ki(),o=t.length+1,l=new me(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Dt((p,g)=>p-g);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let g=o.get(p.largestBatchId);g===null&&(g=ki(),o=o.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const c=ki(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((p,g)=>c.set(p,g)),!(c.size()>=i)););return W.resolve(c)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new R_(t,r));let o=this.Ir.get(t);o===void 0&&(o=Je(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(){this.Tr=new Pt(vn.Er),this.dr=new Pt(vn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new vn(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new vn(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new me(new dt([])),r=new vn(t,e),i=new vn(t,e+1),o=[];return this.dr.forEachInRange([r,i],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new me(new dt([])),r=new vn(t,e),i=new vn(t,e+1);let o=Je();return this.dr.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new vn(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class vn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return me.comparator(e.key,t.key)||Ke(e.wr,t.wr)}static Ar(e,t){return Ke(e.wr,t.wr)||me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Pt(vn.Er)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new I_(o,t,r,i);this.mutationQueue.push(l);for(const c of i)this.br=this.br.add(new vn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return W.resolve(l)}lookupMutationBatch(e,t){return W.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),o=i<0?0:i;return W.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vn(t,0),i=new vn(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],l=>{const c=this.Dr(l.wr);o.push(c)}),W.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pt(Ke);return t.forEach(i=>{const o=new vn(i,0),l=new vn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],c=>{r=r.add(c.wr)})}),W.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;me.isDocumentKey(o)||(o=o.child(""));const l=new vn(new me(o),0);let c=new Pt(Ke);return this.br.forEachWhile(h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(c=c.add(h.wr)),!0)},l),W.resolve(this.Cr(c))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ke(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return W.forEach(t.mutations,i=>{const o=new vn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new vn(t,0),i=this.br.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.Mr=e,this.docs=function(){return new Dt(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(t))}getEntries(e,t){let r=Tr();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():zt.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Tr();const l=t.path,c=new me(l.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:g}}=h.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||p_(mR(g),r)<=0||(i.has(g.key)||th(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return W.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Te()}Or(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new nO(this)}getSize(e){return W.resolve(this.size)}}class nO extends EA{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.persistence=e,this.Nr=new Eo(t=>ga(t),Zc),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new b_,this.targetCount=0,this.kr=va.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),W.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new va(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Kn(t),W.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Nr.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),W.waitFor(o).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),W.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t){this.qr={},this.overlays={},this.Qr=new lr(0),this.Kr=!1,this.Kr=!0,this.$r=new ZN,this.referenceDelegate=e(this),this.Ur=new rO(this),this.indexManager=new BN,this.remoteDocumentCache=function(i){return new tO(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new fA(t),this.Gr=new JN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new XN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new eO(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){se("MemoryPersistence","Starting transaction:",e);const i=new iO(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return W.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class iO extends yR{constructor(e){super(),this.currentSequenceNumber=e}}class np{constructor(e){this.persistence=e,this.Jr=new b_,this.Yr=null}static Zr(e){return new np(e)}get Xr(){if(this.Yr)return this.Yr;throw Te()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),W.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Xr,r=>{const i=me.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,xe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return W.or([()=>W.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.serializer=e}O(e,t,r,i){const o=new Qf("createOrUpgrade",t);r<1&&i>=1&&(function(h){h.createObjectStore("owner")}(e),function(h){h.createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",C0,{unique:!0}),h.createObjectStore("documentMutations")}(e),mT(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=W.resolve();return r<3&&i>=3&&(r!==0&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),mT(e)),l=l.next(()=>function(h){const p=h.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xe.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",g)}(o))),r<4&&i>=4&&(r!==0&&(l=l.next(()=>function(h,p){return p.store("mutations").U().next(g=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",C0,{unique:!0});const v=p.store("mutations"),E=g.map(I=>v.put(I));return W.waitFor(E)})}(e,o))),l=l.next(()=>{(function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(l=l.next(()=>this.ni(o))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(l=l.next(()=>this.ii(o))),r<8&&i>=8&&(l=l.next(()=>this.si(e,o))),r<9&&i>=9&&(l=l.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(l=l.next(()=>this.oi(o))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{(function(h){const p=h.createObjectStore("documentOverlays",{keyPath:Mx});p.createIndex("collectionPathOverlayIndex",Fx,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",Ux,{unique:!1})})(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:Ax});p.createIndex("documentKeyIndex",Px),p.createIndex("collectionGroupIndex",Cx)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.ai(e,o))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:Nx}).createIndex("sequenceNumberIndex",Ox,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:Vx}).createIndex("documentKeyIndex",Lx,{unique:!1})}(e))),r<16&&i>=16&&(l=l.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(l=l.next(()=>{(function(h){h.createObjectStore("globals",{keyPath:"name"})})(e)})),l}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=vf(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>W.forEach(i,o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",l).next(c=>W.forEach(c,h=>{ke(h.userId===o.userId);const p=ta(this.serializer,h);return _A(e,o.userId,p).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((l,c)=>{const h=new dt(l),p=function(v){return[0,Hn(v)]}(h);o.push(t.get(p).next(g=>g?W.resolve():(v=>t.put({targetId:0,path:Hn(v),sequenceNumber:i.highestListenSequenceNumber}))(h)))}).next(()=>W.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:xx});const r=t.store("collectionParents"),i=new k_,o=l=>{if(i.add(l)){const c=l.lastSegment(),h=l.popLast();return r.put({collectionId:c,parent:Hn(h)})}};return t.store("remoteDocuments").J({H:!0},(l,c)=>{const h=new dt(l);return o(h.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,c,h],p)=>{const g=Ci(c);return o(g.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const o=pc(i),l=pA(this.serializer,o);return t.put(l)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((o,l)=>{const c=t.store("remoteDocumentsV14"),h=function(v){return v.document?new me(dt.fromString(v.document.name).popFirst(5)):v.noDocument?me.fromSegments(v.noDocument.path):v.unknownDocument?me.fromSegments(v.unknownDocument.path):Te()}(l).path.toArray(),p={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(c.put(p))}).next(()=>W.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=TA(this.serializer),o=new SA(np.Zr,this.serializer.ct);return r.U().next(l=>{const c=new Map;return l.forEach(h=>{var p;let g=(p=c.get(h.userId))!==null&&p!==void 0?p:Je();ta(this.serializer,h).keys().forEach(v=>g=g.add(v)),c.set(h.userId,g)}),W.forEach(c,(h,p)=>{const g=new En(p),v=ep.lt(this.serializer,g),E=o.getIndexManager(g),I=tp.lt(g,this.serializer,E,o.referenceDelegate);return new IA(i,I,v,E).recalculateAndSaveOverlaysForDocumentKeys(new wy(t,lr.oe),h).next()})})}}function mT(n){n.createObjectStore("targetDocuments",{keyPath:bx}).createIndex("documentTargetsIndex",Dx,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kx,{unique:!0}),n.createObjectStore("targetGlobal")}const gg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class D_{constructor(e,t,r,i,o,l,c,h,p,g,v=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=l,this.document=c,this.ci=p,this.li=g,this.hi=v,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=E=>Promise.resolve(),!D_.D())throw new ue(ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new GN(this,i),this.Ai=t+"main",this.serializer=new fA(h),this.Ri=new fo(this.Ai,this.hi,new sO(this.serializer)),this.$r=new ON,this.Ur=new zN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=TA(this.serializer),this.Gr=new NN,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,g===!1&&Zt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ue(ee.FAILED_PRECONDITION,gg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new lr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Dd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(wo(e))return se("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ec(e).get("owner").next(t=>W.resolve(this.vi(t)))}Ci(e){return Dd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=pn(t,"clientMetadata");return r.U().next(i=>{const o=this.xi(i,18e5),l=i.filter(c=>o.indexOf(c)===-1);return W.forEach(l,c=>r.delete(c.clientId)).next(()=>l)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?W.resolve(!0):ec(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ue(ee.FAILED_PRECONDITION,gg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(o||l&&c)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&se("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new wy(e,lr.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Dd(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return tp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jN(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ep.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){se("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=function(h){return h===17?zx:h===16?jx:h===15?g_:h===14?IR:h===13?TR:h===12?Bx:h===11?ER:void Te()}(this.hi);let l;return this.Ri.runTransaction(e,i,o,c=>(l=new wy(c,this.Qr?this.Qr.next():lr.oe),t==="readwrite-primary"?this.wi(l).next(h=>!!h||this.Si(l)).next(h=>{if(!h)throw Zt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ue(ee.FAILED_PRECONDITION,gR);return r(l)}).next(h=>this.Di(l).next(()=>h)):this.Ki(l).next(()=>r(l)))).then(c=>(l.raiseOnCommittedEvent(),c))}Ki(e){return ec(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ue(ee.FAILED_PRECONDITION,gg)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ec(e).put("owner",t)}static D(){return fo.D()}bi(e){const t=ec(e);return t.get("owner").next(r=>this.vi(r)?(se("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):W.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Zt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;ZS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return se("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Zt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Zt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ec(n){return pn(n,"owner")}function Dd(n){return pn(n,"clientMetadata")}function RA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Je(),i=Je();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new x_(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ZS()?8:_R(fn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.Yi(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new oO;return this.Xi(e,t,l).next(c=>{if(o.result=c,this.zi)return this.es(e,t,l,c.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Sl()<=tt.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),W.resolve()):(Sl()<=tt.DEBUG&&se("QueryEngine","Query:",Rl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Sl()<=tt.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sr(t))):W.resolve())}Yi(e,t){if(j0(t))return W.resolve(null);let r=Sr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Py(t,null,"F"),r=Sr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Je(...o);return this.Ji.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const p=this.ts(t,c);return this.ns(t,p,l,h.readTime)?this.Yi(e,Py(t,null,"F")):this.rs(e,p,t,h)}))})))}Zi(e,t,r,i){return j0(t)||i.isEqual(xe.min())?W.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const l=this.ts(t,o);return this.ns(t,l,r,i)?W.resolve(null):(Sl()<=tt.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rl(t)),this.rs(e,l,t,pR(i,-1)).next(c=>c))})}ts(e,t){let r=new Pt(BR(e));return t.forEach((i,o)=>{th(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Sl()<=tt.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Rl(t)),this.Ji.getDocumentsMatchingQuery(e,t,Rr.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Dt(Ke),this._s=new Eo(o=>ga(o),Zc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function PA(n,e,t,r){return new aO(n,e,t,r)}async function CA(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let h=Je();for(const p of i){l.push(p.batchId);for(const g of p.mutations)h=h.add(g.key)}for(const p of o){c.push(p.batchId);for(const g of p.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next(p=>({hs:p,removedBatchIds:l,addedBatchIds:c}))})})}function lO(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,h,p,g){const v=p.batch,E=v.keys();let I=W.resolve();return E.forEach(D=>{I=I.next(()=>g.getEntry(h,D)).next(x=>{const V=p.docVersions.get(D);ke(V!==null),x.version.compareTo(V)<0&&(v.applyToRemoteDocument(x,p),x.isValidDocument()&&(x.setReadTime(p.commitVersion),g.addEntry(x)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(h,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Je();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function kA(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function uO(n,e){const t=Re(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const c=[];e.targetChanges.forEach((g,v)=>{const E=i.get(v);if(!E)return;c.push(t.Ur.removeMatchingKeys(o,g.removedDocuments,v).next(()=>t.Ur.addMatchingKeys(o,g.addedDocuments,v)));let I=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?I=I.withResumeToken(tn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):g.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(g.resumeToken,r)),i=i.insert(v,I),function(x,V,G){return x.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(E,I,g)&&c.push(t.Ur.updateTargetData(o,I))});let h=Tr(),p=Je();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),c.push(cO(o,l,e.documentUpdates).next(g=>{h=g.Ps,p=g.Is})),!r.isEqual(xe.min())){const g=t.Ur.getLastRemoteSnapshotVersion(o).next(v=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(g)}return W.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,p)).next(()=>h)}).then(o=>(t.os=i,o))}function cO(n,e,t){let r=Je(),i=Je();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Tr();return t.forEach((c,h)=>{const p=o.get(c);h.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(xe.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):se("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)}),{Ps:l,Is:i}})}function hO(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wf(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,W.resolve(i)):t.Ur.allocateTargetId(r).next(l=>(i=new rs(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function Zl(n,e,t){const r=Re(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!wo(l))throw l;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Vy(n,e,t){const r=Re(n);let i=xe.min(),o=Je();return r.persistence.runTransaction("Execute query","readwrite",l=>function(h,p,g){const v=Re(h),E=v._s.get(g);return E!==void 0?W.resolve(v.os.get(E)):v.Ur.getTargetData(p,g)}(r,l,Sr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(l,c.targetId).next(h=>{o=h})}).next(()=>r.ss.getDocumentsMatchingQuery(l,e,t?i:xe.min(),t?o:Je())).next(c=>(xA(r,UR(e),c),{documents:c,Ts:o})))}function bA(n,e){const t=Re(n),r=Re(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(l=>l?l.target:null))}function DA(n,e){const t=Re(n),r=t.us.get(e)||xe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,pR(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(xA(t,e,i),i))}function xA(n,e,t){let r=n.us.get(e)||xe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function gT(n,e){return`firestore_clients_${n}_${e}`}function yT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function yg(n,e){return`firestore_targets_${n}_${e}`}class Ef{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let o,l=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(o=new ue(i.error.code,i.error.message))),l?new Ef(e,t,i.state,o):(Zt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ic{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new ue(r.error.code,r.error.message))),o?new Ic(e,r.state,i):(Zt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Tf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=w_();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=vR(r.activeTargetIds[l]),o=o.add(r.activeTargetIds[l]);return i?new Tf(e,o):(Zt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class N_{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new N_(t.clientId,t.onlineState):(Zt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ly{constructor(){this.activeTargetIds=w_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _g{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Dt(Ke),this.started=!1,this.bs=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=gT(this.persistenceKey,this.ps),this.vs=function(h){return`firestore_sequence_number_${h}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Ly),this.Cs=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.xs=function(h){return`firestore_online_state_${h}`}(this.persistenceKey),this.Os=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(gT(this.persistenceKey,r));if(i){const o=Tf.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(yg(this.persistenceKey,e));if(i){const o=Ic.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yg(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return se("SharedClientState","READ",e,t),t}setItem(e,t){se("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){se("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(se("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Zt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=function(o){let l=lr.oe;if(o!=null)try{const c=JSON.parse(o);ke(typeof c=="number"),l=c}catch(c){Zt("SharedClientState","Failed to read sequence number from WebStorage",c)}return l}(t.newValue);r!==lr.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new Ef(this.currentUser,e,t,r),o=yT(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){const t=yT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const i=yg(this.persistenceKey,e),o=new Ic(e,t,r);this.setItem(i,o.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return Tf.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Ef.Rs(new En(o),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return Ic.Rs(i,t)}Ls(e){return N_.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);se("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),l=[],c=[];return o.forEach(h=>{i.has(h)||l.push(h)}),i.forEach(h=>{o.has(h)||c.push(h)}),this.syncEngine.io(l,c).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=w_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class NA{constructor(){this.so=new Ly,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ly,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd=null;function vg(){return xd===null?xd=function(){return 268435456+Math.round(2147483648*Math.random())}():xd++,"0x"+xd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="WebChannelConnection";class mO extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,l){const c=vg(),h=this.xo(t,r.toUriEncodedString());se("RestConnection",`Sending RPC '${t}' ${c}:`,h,i);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,o,l),this.No(t,h,p,i).then(g=>(se("RestConnection",`Received RPC '${t}' ${c}: `,g),g),g=>{throw fa("RestConnection",`RPC '${t}' ${c} failed with error: `,g,"url: ",h,"request:",i),g})}Lo(t,r,i,o,l,c){return this.Mo(t,r,i,o,l)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+au}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,l)=>t[l]=o),i&&i.headers.forEach((o,l)=>t[l]=o)}xo(t,r){const i=fO[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const o=vg();return new Promise((l,c)=>{const h=new oR;h.setWithCredentials(!0),h.listenOnce(aR.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case qd.NO_ERROR:const g=h.getResponseJson();se(Fn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),l(g);break;case qd.TIMEOUT:se(Fn,`RPC '${e}' ${o} timed out`),c(new ue(ee.DEADLINE_EXCEEDED,"Request time out"));break;case qd.HTTP_ERROR:const v=h.getStatus();if(se(Fn,`RPC '${e}' ${o} failed with status:`,v,"response text:",h.getResponseText()),v>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const I=E==null?void 0:E.error;if(I&&I.status&&I.message){const D=function(V){const G=V.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(G)>=0?G:ee.UNKNOWN}(I.status);c(new ue(D,I.message))}else c(new ue(ee.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new ue(ee.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{se(Fn,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);se(Fn,`RPC '${e}' ${o} sending request:`,i),h.send(t,"POST",p,r,15)})}Bo(e,t,r){const i=vg(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=cR(),c=uR(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=o.join("");se(Fn,`Creating RPC '${e}' stream ${i}: ${g}`,h);const v=l.createWebChannel(g,h);let E=!1,I=!1;const D=new pO({Io:V=>{I?se(Fn,`Not sending because RPC '${e}' stream ${i} is closed:`,V):(E||(se(Fn,`Opening RPC '${e}' stream ${i} transport.`),v.open(),E=!0),se(Fn,`RPC '${e}' stream ${i} sending:`,V),v.send(V))},To:()=>v.close()}),x=(V,G,$)=>{V.listen(G,j=>{try{$(j)}catch(H){setTimeout(()=>{throw H},0)}})};return x(v,hc.EventType.OPEN,()=>{I||(se(Fn,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),x(v,hc.EventType.CLOSE,()=>{I||(I=!0,se(Fn,`RPC '${e}' stream ${i} transport closed`),D.So())}),x(v,hc.EventType.ERROR,V=>{I||(I=!0,fa(Fn,`RPC '${e}' stream ${i} transport errored:`,V),D.So(new ue(ee.UNAVAILABLE,"The operation could not be completed")))}),x(v,hc.EventType.MESSAGE,V=>{var G;if(!I){const $=V.data[0];ke(!!$);const j=$,H=j.error||((G=j[0])===null||G===void 0?void 0:G.error);if(H){se(Fn,`RPC '${e}' stream ${i} received error:`,H);const re=H.status;let b=function(R){const k=sn[R];if(k!==void 0)return ZR(k)}(re),P=H.message;b===void 0&&(b=ee.INTERNAL,P="Unknown error status: "+re+" with message "+H.message),I=!0,D.So(new ue(b,P)),v.close()}else se(Fn,`RPC '${e}' stream ${i} received:`,$),D.bo($)}}),x(c,lR.STAT_EVENT,V=>{V.stat===_y.PROXY?se(Fn,`RPC '${e}' stream ${i} detected buffering proxy`):V.stat===_y.NOPROXY&&se(Fn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(){return typeof window<"u"?window:null}function Jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(n){return new EN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,t,r,i,o,l,c,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new O_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Zt(t.toString()),Zt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ue(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gO extends VA{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=RN(this.serializer,e),r=function(o){if(!("targetChange"in o))return xe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?xe.min():l.readTime?Tn(l.readTime):xe.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=by(this.serializer),t.addTarget=function(o,l){let c;const h=l.target;if(c=mf(h)?{documents:aA(o,h)}:{query:lA(o,h)._t},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=nA(o,l.resumeToken);const p=Cy(o,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(xe.min())>0){c.readTime=Xl(o,l.snapshotVersion.toTimestamp());const p=Cy(o,l.expectedCount);p!==null&&(c.expectedCount=p)}return c}(this.serializer,e);const r=PN(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=by(this.serializer),t.removeTarget=e,this.a_(t)}}class yO extends VA{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ke(!!e.streamToken),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=AN(e.writeResults,e.commitTime),r=Tn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=by(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>jc(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ue(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,ky(t,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(ee.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Lo(e,ky(t,r),i,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ue(ee.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class vO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Zt(t),this.D_=!1):se("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{r.enqueueAndForget(async()=>{ka(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(h){const p=Re(h);p.L_.add(4),await cu(p),p.q_.set("Unknown"),p.L_.delete(4),await sh(p)}(this))})}),this.q_=new vO(r,i)}}async function sh(n){if(ka(n))for(const e of n.B_)await e(!0)}async function cu(n){for(const e of n.B_)await e(!1)}function ip(n,e){const t=Re(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),M_(t)?L_(t):du(t).r_()&&V_(t,e))}function eu(n,e){const t=Re(n),r=du(t);t.N_.delete(e),r.r_()&&LA(t,e),t.N_.size===0&&(r.r_()?r.o_():ka(t)&&t.q_.set("Unknown"))}function V_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}du(n).A_(e)}function LA(n,e){n.Q_.xe(e),du(n).R_(e)}function L_(n){n.Q_=new yN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),du(n).start(),n.q_.v_()}function M_(n){return ka(n)&&!du(n).n_()&&n.N_.size>0}function ka(n){return Re(n).L_.size===0}function MA(n){n.Q_=void 0}async function EO(n){n.q_.set("Online")}async function TO(n){n.N_.forEach((e,t)=>{V_(n,e)})}async function IO(n,e){MA(n),M_(n)?(n.q_.M_(e),L_(n)):n.q_.set("Unknown")}async function SO(n,e,t){if(n.q_.set("Online"),e instanceof tA&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const c of o.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.N_.delete(c),i.Q_.removeTarget(c))}(n,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await If(n,r)}else if(e instanceof Yd?n.Q_.Ke(e):e instanceof eA?n.Q_.He(e):n.Q_.We(e),!t.isEqual(xe.min()))try{const r=await kA(n.localStore);t.compareTo(r)>=0&&await function(o,l){const c=o.Q_.rt(l);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.N_.get(p);g&&o.N_.set(p,g.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,p)=>{const g=o.N_.get(h);if(!g)return;o.N_.set(h,g.withResumeToken(tn.EMPTY_BYTE_STRING,g.snapshotVersion)),LA(o,h);const v=new rs(g.target,h,p,g.sequenceNumber);V_(o,v)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await If(n,r)}}async function If(n,e,t){if(!wo(e))throw e;n.L_.add(1),await cu(n),n.q_.set("Offline"),t||(t=()=>kA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await sh(n)})}function FA(n,e){return e().catch(t=>If(n,t,e))}async function hu(n){const e=Re(n),t=_o(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;RO(e);)try{const i=await hO(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,AO(e,i)}catch(i){await If(e,i)}UA(e)&&BA(e)}function RO(n){return ka(n)&&n.O_.length<10}function AO(n,e){n.O_.push(e);const t=_o(n);t.r_()&&t.V_&&t.m_(e.mutations)}function UA(n){return ka(n)&&!_o(n).n_()&&n.O_.length>0}function BA(n){_o(n).start()}async function PO(n){_o(n).p_()}async function CO(n){const e=_o(n);for(const t of n.O_)e.m_(t.mutations)}async function kO(n,e,t){const r=n.O_.shift(),i=S_.from(r,e,t);await FA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await hu(n)}async function bO(n,e){e&&_o(n).V_&&await async function(r,i){if(function(l){return XR(l)&&l!==ee.ABORTED}(i.code)){const o=r.O_.shift();_o(r).s_(),await FA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await hu(r)}}(n,e),UA(n)&&BA(n)}async function vT(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=ka(t);t.L_.add(3),await cu(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await sh(t)}async function My(n,e){const t=Re(n);e?(t.L_.delete(2),await sh(t)):e||(t.L_.add(2),await cu(t),t.q_.set("Unknown"))}function du(n){return n.K_||(n.K_=function(t,r,i){const o=Re(t);return o.w_(),new gO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:EO.bind(null,n),Ro:TO.bind(null,n),mo:IO.bind(null,n),d_:SO.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),M_(n)?L_(n):n.q_.set("Unknown")):(await n.K_.stop(),MA(n))})),n.K_}function _o(n){return n.U_||(n.U_=function(t,r,i){const o=Re(t);return o.w_(),new yO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:PO.bind(null,n),mo:bO.bind(null,n),f_:CO.bind(null,n),g_:kO.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await hu(n)):(await n.U_.stop(),n.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,c=new F_(e,t,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function U_(n,e){if(Zt("AsyncQueue",`${e}: ${n}`),wo(n))return new ue(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this.comparator=e?(t,r)=>e(t,r)||me.comparator(t.key,r.key):(t,r)=>me.comparator(t.key,r.key),this.keyedMap=dc(),this.sortedSet=new Dt(this.comparator)}static emptySet(e){return new Ol(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ol)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ol;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(){this.W_=new Dt(me.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Te():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class tu{constructor(e,t,r,i,o,l,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new tu(e,t,Ol.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class xO{constructor(){this.queries=ET(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=Re(t),o=i.queries;i.queries=ET(),o.forEach((l,c)=>{for(const h of c.j_)h.onError(r)})})(this,new ue(ee.ABORTED,"Firestore shutting down"))}}function ET(){return new Eo(n=>FR(n),Jf)}async function B_(n,e){const t=Re(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new DO,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await t.onListen(i,!0);break;case 1:o.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=U_(l,`Initialization of query '${Rl(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&z_(t)}async function j_(n,e){const t=Re(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function NO(n,e){const t=Re(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const c of l.j_)c.X_(i)&&(r=!0);l.z_=i}}r&&z_(t)}function OO(n,e,t){const r=Re(n),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(t);r.queries.delete(e)}function z_(n){n.Y_.forEach(e=>{e.next()})}var Fy,TT;(TT=Fy||(Fy={})).ea="default",TT.Cache="cache";class $_{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new tu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.key=e}}class zA{constructor(e){this.key=e}}class VO{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Je(),this.mutatedKeys=Je(),this.Aa=BR(e),this.Ra=new Ol(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new wT,i=t?t.Ra:this.Ra;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,v)=>{const E=i.get(g),I=th(this.query,v)?v:null,D=!!E&&this.mutatedKeys.has(E.key),x=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let V=!1;E&&I?E.data.isEqual(I.data)?D!==x&&(r.track({type:3,doc:I}),V=!0):this.ga(E,I)||(r.track({type:2,doc:I}),V=!0,(h&&this.Aa(I,h)>0||p&&this.Aa(I,p)<0)&&(c=!0)):!E&&I?(r.track({type:0,doc:I}),V=!0):E&&!I&&(r.track({type:1,doc:E}),V=!0,(h||p)&&(c=!0)),V&&(I?(l=l.add(I),o=x?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{Ra:l,fa:r,ns:c,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((g,v)=>function(I,D){const x=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return x(I)-x(D)}(g.type,v.type)||this.Aa(g.doc,v.doc)),this.pa(r),i=i!=null&&i;const c=t&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,p=h!==this.Ea;return this.Ea=h,l.length!==0||p?{snapshot:new tu(this.query,e.Ra,o,l,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new wT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Je(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new zA(r))}),this.da.forEach(r=>{e.has(r)||t.push(new jA(r))}),t}ba(e){this.Ta=e.Ts,this.da=Je();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return tu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class LO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class MO{constructor(e){this.key=e,this.va=!1}}class FO{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Eo(c=>FR(c),Jf),this.Ma=new Map,this.xa=new Set,this.Oa=new Dt(me.comparator),this.Na=new Map,this.La=new b_,this.Ba={},this.ka=new Map,this.qa=va.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function UO(n,e,t=!0){const r=sp(n);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await $A(r,e,t,!0),i}async function BO(n,e){const t=sp(n);await $A(t,e,!0,!1)}async function $A(n,e,t,r){const i=await wf(n.localStore,Sr(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await q_(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&ip(n.remoteStore,i),c}async function q_(n,e,t,r,i){n.Ka=(v,E,I)=>async function(x,V,G,$){let j=V.view.ma(G);j.ns&&(j=await Vy(x.localStore,V.query,!1).then(({documents:P})=>V.view.ma(P,j)));const H=$&&$.targetChanges.get(V.targetId),re=$&&$.targetMismatches.get(V.targetId)!=null,b=V.view.applyChanges(j,x.isPrimaryClient,H,re);return Uy(x,V.targetId,b.wa),b.snapshot}(n,v,E,I);const o=await Vy(n.localStore,e,!0),l=new VO(e,o.Ts),c=l.ma(o.documents),h=ih.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),p=l.applyChanges(c,n.isPrimaryClient,h);Uy(n,t,p.wa);const g=new LO(e,t,l);return n.Fa.set(e,g),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),p.snapshot}async function jO(n,e,t){const r=Re(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(l=>!Jf(l,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Zl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&eu(r.remoteStore,i.targetId),nu(r,i.targetId)}).catch(vo)):(nu(r,i.targetId),await Zl(r.localStore,i.targetId,!0))}async function zO(n,e){const t=Re(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),eu(t.remoteStore,r.targetId))}async function $O(n,e,t){const r=W_(n);try{const i=await function(l,c){const h=Re(l),p=Gt.now(),g=c.reduce((I,D)=>I.add(D.key),Je());let v,E;return h.persistence.runTransaction("Locally write mutations","readwrite",I=>{let D=Tr(),x=Je();return h.cs.getEntries(I,g).next(V=>{D=V,D.forEach((G,$)=>{$.isValidDocument()||(x=x.add(G))})}).next(()=>h.localDocuments.getOverlayedDocuments(I,D)).next(V=>{v=V;const G=[];for(const $ of c){const j=fN($,v.get($.key).overlayedDocument);j!=null&&G.push(new ms($.key,j,CR(j.value.mapValue),en.exists(!0)))}return h.mutationQueue.addMutationBatch(I,p,G,c)}).next(V=>{E=V;const G=V.applyToLocalDocumentSet(v,x);return h.documentOverlayCache.saveOverlays(I,V.batchId,G)})}).then(()=>({batchId:E.batchId,changes:zR(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,h){let p=l.Ba[l.currentUser.toKey()];p||(p=new Dt(Ke)),p=p.insert(c,h),l.Ba[l.currentUser.toKey()]=p}(r,i.batchId,t),await To(r,i.changes),await hu(r.remoteStore)}catch(i){const o=U_(i,"Failed to persist write");t.reject(o)}}async function qA(n,e){const t=Re(n);try{const r=await uO(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.Na.get(o);l&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.va=!0:i.modifiedDocuments.size>0?ke(l.va):i.removedDocuments.size>0&&(ke(l.va),l.va=!1))}),await To(t,r,e)}catch(r){await vo(r)}}function IT(n,e,t){const r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((o,l)=>{const c=l.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const h=Re(l);h.onlineState=c;let p=!1;h.queries.forEach((g,v)=>{for(const E of v.j_)E.Z_(c)&&(p=!0)}),p&&z_(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qO(n,e,t){const r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),o=i&&i.key;if(o){let l=new Dt(me.comparator);l=l.insert(o,zt.newNoDocument(o,xe.min()));const c=Je().add(o),h=new rh(xe.min(),new Map,new Dt(Ke),l,c);await qA(r,h),r.Oa=r.Oa.remove(o),r.Na.delete(e),G_(r)}else await Zl(r.localStore,e,!1).then(()=>nu(r,e,t)).catch(vo)}async function HO(n,e){const t=Re(n),r=e.batch.batchId;try{const i=await lO(t.localStore,e);K_(t,r,null),H_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await To(t,i)}catch(i){await vo(i)}}async function KO(n,e,t){const r=Re(n);try{const i=await function(l,c){const h=Re(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return h.mutationQueue.lookupMutationBatch(p,c).next(v=>(ke(v!==null),g=v.keys(),h.mutationQueue.removeMutationBatch(p,v))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,g,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>h.localDocuments.getDocuments(p,g))})}(r.localStore,e);K_(r,e,t),H_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await To(r,i)}catch(i){await vo(i)}}function H_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function K_(n,e,t){const r=Re(n);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function nu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||HA(n,r)})}function HA(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(eu(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),G_(n))}function Uy(n,e,t){for(const r of t)r instanceof jA?(n.La.addReference(r.key,e),GO(n,r)):r instanceof zA?(se("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||HA(n,r.key)):Te()}function GO(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(se("SyncEngine","New document in limbo: "+t),n.xa.add(r),G_(n))}function G_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new me(dt.fromString(e)),r=n.qa.next();n.Na.set(r,new MO(t)),n.Oa=n.Oa.insert(t,r),ip(n.remoteStore,new rs(Sr(eh(t.path)),r,"TargetPurposeLimboResolution",lr.oe))}}async function To(n,e,t){const r=Re(n),i=[],o=[],l=[];r.Fa.isEmpty()||(r.Fa.forEach((c,h)=>{l.push(r.Ka(h,e,t).then(p=>{var g;if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,v?"current":"not-current")}if(p){i.push(p);const v=x_.Wi(h.targetId,p);o.push(v)}}))}),await Promise.all(l),r.Ca.d_(i),await async function(h,p){const g=Re(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>W.forEach(p,E=>W.forEach(E.$i,I=>g.persistence.referenceDelegate.addReference(v,E.targetId,I)).next(()=>W.forEach(E.Ui,I=>g.persistence.referenceDelegate.removeReference(v,E.targetId,I)))))}catch(v){if(!wo(v))throw v;se("LocalStore","Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const I=g.os.get(E),D=I.snapshotVersion,x=I.withLastLimboFreeSnapshotVersion(D);g.os=g.os.insert(E,x)}}}(r.localStore,o))}async function WO(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await CA(t.localStore,e);t.currentUser=e,function(o,l){o.ka.forEach(c=>{c.forEach(h=>{h.reject(new ue(ee.CANCELLED,l))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await To(t,r.hs)}}function QO(n,e){const t=Re(n),r=t.Na.get(e);if(r&&r.va)return Je().add(r.key);{let i=Je();const o=t.Ma.get(e);if(!o)return i;for(const l of o){const c=t.Fa.get(l);i=i.unionWith(c.view.Va)}return i}}async function YO(n,e){const t=Re(n),r=await Vy(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Uy(t,e.targetId,i.wa),i}async function JO(n,e){const t=Re(n);return DA(t.localStore,e).then(r=>To(t,r))}async function XO(n,e,t,r){const i=Re(n),o=await function(c,h){const p=Re(c),g=Re(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",v=>g.Mn(v,h).next(E=>E?p.localDocuments.getDocuments(v,E):W.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?await hu(i.remoteStore):t==="acknowledged"||t==="rejected"?(K_(i,e,r||null),H_(i,e),function(c,h){Re(Re(c).mutationQueue).On(h)}(i.localStore,e)):Te(),await To(i,o)):se("SyncEngine","Cannot apply mutation batch with id: "+e)}async function ZO(n,e){const t=Re(n);if(sp(t),W_(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await ST(t,r.toArray());t.Qa=!0,await My(t.remoteStore,!0);for(const o of i)ip(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){const r=[];let i=Promise.resolve();t.Ma.forEach((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(nu(t,l),Zl(t.localStore,l,!0))),eu(t.remoteStore,l)}),await i,await ST(t,r),function(l){const c=Re(l);c.Na.forEach((h,p)=>{eu(c.remoteStore,p)}),c.La.pr(),c.Na=new Map,c.Oa=new Dt(me.comparator)}(t),t.Qa=!1,await My(t.remoteStore,!1)}}async function ST(n,e,t){const r=Re(n),i=[],o=[];for(const l of e){let c;const h=r.Ma.get(l);if(h&&h.length!==0){c=await wf(r.localStore,Sr(h[0]));for(const p of h){const g=r.Fa.get(p),v=await YO(r,g);v.snapshot&&o.push(v.snapshot)}}else{const p=await bA(r.localStore,l);c=await wf(r.localStore,p),await q_(r,KA(p),l,!1,c.resumeToken)}i.push(c)}return r.Ca.d_(o),i}function KA(n){return LR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function eV(n){return function(t){return Re(Re(t).persistence).Qi()}(Re(n).localStore)}async function tV(n,e,t,r){const i=Re(n);if(i.Qa)return void se("SyncEngine","Ignoring unexpected query state notification.");const o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=await DA(i.localStore,UR(o[0])),c=rh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",tn.EMPTY_BYTE_STRING);await To(i,l,c);break}case"rejected":await Zl(i.localStore,e,!0),nu(i,e,r);break;default:Te()}}async function nV(n,e,t){const r=sp(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){se("SyncEngine","Adding an already active target "+i);continue}const o=await bA(r.localStore,i),l=await wf(r.localStore,o);await q_(r,KA(o),l.targetId,!1,l.resumeToken),ip(r.remoteStore,l)}for(const i of t)r.Ma.has(i)&&await Zl(r.localStore,i,!1).then(()=>{eu(r.remoteStore,i),nu(r,i)}).catch(vo)}}function sp(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qO.bind(null,e),e.Ca.d_=NO.bind(null,e.eventManager),e.Ca.$a=OO.bind(null,e.eventManager),e}function W_(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KO.bind(null,e),e}class zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return PA(this.persistence,new AA,e.initialUser,this.serializer)}Ga(e){return new SA(np.Zr,this.serializer)}Wa(e){return new NA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zc.provider={build:()=>new zc};class GA extends zc{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await W_(this.Ja.syncEngine),await hu(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return PA(this.persistence,new AA,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new qN(r,e.asyncQueue,t)}Ha(e,t){const r=new Ix(t,this.persistence);return new Tx(e.asyncQueue,r)}Ga(e){const t=RA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?or.withCacheSize(this.cacheSizeBytes):or.DEFAULT;return new D_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,OA(),Jd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new NA}}class rV extends GA{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof _g&&(this.sharedClientState.syncEngine={no:XO.bind(null,t),ro:tV.bind(null,t),io:nV.bind(null,t),Qi:eV.bind(null,t),eo:JO.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await ZO(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const t=OA();if(!_g.D(t))throw new ue(ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=RA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _g(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class $c{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>IT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WO.bind(null,this.syncEngine),await My(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xO}()}createDatastore(e){const t=rp(e.databaseInfo.databaseId),r=function(o){return new mO(o)}(e.databaseInfo);return function(o,l,c,h){return new _O(o,l,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,l,c){return new wO(r,i,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>IT(this.syncEngine,t,0),function(){return _T.D()?new _T:new dO}())}createSyncEngine(e,t){return function(i,o,l,c,h,p,g){const v=new FO(i,o,l,c,h,p);return g&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=Re(i);se("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await cu(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}$c.provider={build:()=>new $c};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Zt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ue(ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,o){const l=Re(i),c={documents:o.map(v=>Bc(l.serializer,v))},h=await l.Lo("BatchGetDocuments",l.serializer.databaseId,dt.emptyPath(),c,o.length),p=new Map;h.forEach(v=>{const E=SN(l.serializer,v);p.set(E.key.toString(),E)});const g=[];return o.forEach(v=>{const E=p.get(v.toString());ke(!!E),g.push(E)}),g}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new nh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=me.fromPath(r);this.mutations.push(new T_(i,this.precondition(i)))}),await async function(r,i){const o=Re(r),l={writes:i.map(c=>jc(o.serializer,c))};await o.Mo("Commit",o.serializer.databaseId,dt.emptyPath(),l)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Te();t=xe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ue(ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(xe.min())?en.exists(!1):en.updateTime(t):en.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xe.min()))throw new ue(ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return en.updateTime(t)}return en.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new O_(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new iV(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const t=this.updateFunction(e);return!Xc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!XR(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=En.UNAUTHENTICATED,this.clientId=dR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{se("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(se("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=U_(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wg(n,e){n.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await CA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function RT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await WA(n);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>vT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>vT(e.remoteStore,i)),n._onlineComponents=e}async function WA(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await wg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ee.FAILED_PRECONDITION||i.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;fa("Error using user provided cache. Falling back to memory cache: "+t),await wg(n,new zc)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await wg(n,new zc);return n._offlineComponents}async function op(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await RT(n,n._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await RT(n,new $c))),n._onlineComponents}function QA(n){return WA(n).then(e=>e.persistence)}function YA(n){return op(n).then(e=>e.remoteStore)}function aV(n){return op(n).then(e=>e.syncEngine)}function lV(n){return op(n).then(e=>e.datastore)}async function Sf(n){const e=await op(n),t=e.eventManager;return t.onListen=UO.bind(null,e.syncEngine),t.onUnlisten=jO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zO.bind(null,e.syncEngine),t}function uV(n){return n.asyncQueue.enqueue(async()=>{const e=await QA(n),t=await YA(n);return e.setNetworkEnabled(!0),function(i){const o=Re(i);return o.L_.delete(0),sh(o)}(t)})}function cV(n){return n.asyncQueue.enqueue(async()=>{const e=await QA(n),t=await YA(n);return e.setNetworkEnabled(!1),async function(i){const o=Re(i);o.L_.add(0),await cu(o),o.q_.set("Offline")}(t)})}function hV(n,e,t={}){const r=new li;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,p){const g=new Q_({next:E=>{g.Za(),l.enqueueAndForget(()=>j_(o,v));const I=E.docs.has(c);!I&&E.fromCache?p.reject(new ue(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&E.fromCache&&h&&h.source==="server"?p.reject(new ue(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new $_(eh(c.path),g,{includeMetadataChanges:!0,_a:!0});return B_(o,v)}(await Sf(n),n.asyncQueue,e,t,r)),r.promise}function dV(n,e,t={}){const r=new li;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,p){const g=new Q_({next:E=>{g.Za(),l.enqueueAndForget(()=>j_(o,v)),E.fromCache&&h.source==="server"?p.reject(new ue(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new $_(c,g,{includeMetadataChanges:!0,_a:!0});return B_(o,v)}(await Sf(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(n,e,t){if(!t)throw new ue(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fV(n,e,t,r){if(e===!0&&r===!0)throw new ue(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PT(n){if(!me.isDocumentKey(n))throw new ue(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CT(n){if(me.isDocumentKey(n))throw new ue(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ap(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te()}function In(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ap(n);throw new ue(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ue(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hx;switch(r.type){case"firstParty":return new mx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=AT.get(t);r&&(se("ComponentProvider","Removing Datastore"),AT.delete(t),r.terminate())}(this),Promise.resolve()}}function pV(n,e,t,r={}){var i;const o=(n=In(n,lp))._getSettings(),l=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let c,h;if(typeof r.mockUserToken=="string")c=r.mockUserToken,h=En.MOCK_USER;else{c=XS(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ue(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new En(p)}n._authCredentials=new dx(new hR(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Io(this.firestore,e,this._query)}}class Dn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new po(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dn(this.firestore,e,this._key)}}class po extends Io{constructor(e,t,r){super(e,t,eh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new me(e))}withConverter(e){return new po(this.firestore,e,this._path)}}function Di(n,e,...t){if(n=lt(n),XA("collection","path",e),n instanceof lp){const r=dt.fromString(e,...t);return CT(r),new po(n,null,r)}{if(!(n instanceof Dn||n instanceof po))throw new ue(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dt.fromString(e,...t));return CT(r),new po(n.firestore,null,r)}}function Lt(n,e,...t){if(n=lt(n),arguments.length===1&&(e=dR.newId()),XA("doc","path",e),n instanceof lp){const r=dt.fromString(e,...t);return PT(r),new Dn(n,null,new me(r))}{if(!(n instanceof Dn||n instanceof po))throw new ue(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dt.fromString(e,...t));return PT(r),new Dn(n.firestore,n instanceof po?n.converter:null,new me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new O_(this,"async_queue_retry"),this.Vu=()=>{const r=Jd();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Jd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Jd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new li;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!wo(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw Zt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=F_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function DT(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Ar extends lp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new bT,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bT(e),this._firestoreClient=void 0,await e}}}function mV(n,e,t){t||(t="(default)");const r=ou(n,"firestore");if(r.isInitialized(t)){const i=r.getImmediate({identifier:t}),o=r.getOptions(t);if(Cc(o,e))return i;throw new ue(ee.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ue(ee.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:t})}function ZA(n,e){const t=typeof n=="object"?n:Wf(),r=typeof n=="string"?n:"(default)",i=ou(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=u_("firestore");o&&pV(i,...o)}return i}function ba(n){if(n._terminated)throw new ue(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||e1(n),n._firestoreClient}function e1(n){var e,t,r;const i=n._freezeSettings(),o=function(c,h,p,g){return new qx(c,h,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,JA(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new oV(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(n._componentsProvider))}async function gV(n){fa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();yV(n,$c.provider,{build:t=>new rV(t,e.cacheSizeBytes)})}function yV(n,e,t){if((n=In(n,Ar))._firestoreClient||n._terminated)throw new ue(ee.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ue(ee.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},e1(n)}function _V(n){return uV(ba(n=In(n,Ar)))}function vV(n){return cV(ba(n=In(n,Ar)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wa(tn.fromBase64String(e))}catch(t){throw new ue(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wa(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=/^__.*__$/;class EV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ms(e,this.data,this.fieldMask,t,this.fieldTransforms):new uu(e,this.data,t,this.fieldTransforms)}}class t1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ms(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function n1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class X_{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new X_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Rf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(n1(this.Cu)&&wV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class TV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||rp(e)}Qu(e,t,r,i=!1){return new X_({Cu:e,methodName:t,qu:r,path:Kt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ah(n){const e=n._freezeSettings(),t=rp(n._databaseId);return new TV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Z_(n,e,t,r,i,o={}){const l=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);tv("Data must be an object, but it was:",l,r);const c=s1(r,l);let h,p;if(o.merge)h=new ur(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const E=By(e,v,t);if(!l.contains(E))throw new ue(ee.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);a1(g,E)||g.push(E)}h=new ur(g),p=l.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,p=l.fieldTransforms;return new EV(new bn(c),h,p)}class cp extends up{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cp}}class ev extends up{_toFieldTransform(e){return new QR(e.path,new Ql)}isEqual(e){return e instanceof ev}}function r1(n,e,t,r){const i=n.Qu(1,e,t);tv("Data must be an object, but it was:",i,r);const o=[],l=bn.empty();Ca(r,(h,p)=>{const g=nv(e,h,t);p=lt(p);const v=i.Nu(g);if(p instanceof cp)o.push(g);else{const E=lh(p,v);E!=null&&(o.push(g),l.set(g,E))}});const c=new ur(o);return new t1(l,c,i.fieldTransforms)}function i1(n,e,t,r,i,o){const l=n.Qu(1,e,t),c=[By(e,r,t)],h=[i];if(o.length%2!=0)throw new ue(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)c.push(By(e,o[E])),h.push(o[E+1]);const p=[],g=bn.empty();for(let E=c.length-1;E>=0;--E)if(!a1(p,c[E])){const I=c[E];let D=h[E];D=lt(D);const x=l.Nu(I);if(D instanceof cp)p.push(I);else{const V=lh(D,x);V!=null&&(p.push(I),g.set(I,V))}}const v=new ur(p);return new t1(g,v,l.fieldTransforms)}function IV(n,e,t,r=!1){return lh(t,n.Qu(r?4:3,e))}function lh(n,e){if(o1(n=lt(n)))return tv("Unsupported field value:",e,n),s1(n,e);if(n instanceof up)return function(r,i){if(!n1(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const c of r){let h=lh(c,i.Lu(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Gt.fromDate(r);return{timestampValue:Xl(i.serializer,o)}}if(r instanceof Gt){const o=new Gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xl(i.serializer,o)}}if(r instanceof Y_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wa)return{bytesValue:nA(i.serializer,r._byteString)};if(r instanceof Dn){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:P_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof J_)return function(l,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw c.Bu("VectorValues must only contain numeric values.");return E_(c.serializer,h)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ap(r)}`)}(n,e)}function s1(n,e){const t={};return SR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ca(n,(r,i)=>{const o=lh(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function o1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Gt||n instanceof Y_||n instanceof wa||n instanceof Dn||n instanceof up||n instanceof J_)}function tv(n,e,t){if(!o1(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=ap(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function By(n,e,t){if((e=lt(e))instanceof oh)return e._internalPath;if(typeof e=="string")return nv(n,e);throw Rf("Field path arguments must be of type string or ",n,!1,void 0,t)}const SV=new RegExp("[~\\*/\\[\\]]");function nv(n,e,t){if(e.search(SV)>=0)throw Rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new oh(...e.split("."))._internalPath}catch{throw Rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rf(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new ue(ee.INVALID_ARGUMENT,c+n+h)}function a1(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class RV extends Af{data(){return super.data()}}function hp(n,e){return typeof e=="string"?nv(n,e):e instanceof oh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rv{}class u1 extends rv{}function jy(n,e,...t){let r=[];e instanceof rv&&r.push(e),r=r.concat(t),function(o){const l=o.filter(h=>h instanceof iv).length,c=o.filter(h=>h instanceof dp).length;if(l>1||l>0&&c>0)throw new ue(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class dp extends u1{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new dp(e,t,r)}_apply(e){const t=this._parse(e);return h1(e._query,t),new Io(e.firestore,e.converter,Ay(e._query,t))}_parse(e){const t=ah(e.firestore);return function(o,l,c,h,p,g,v){let E;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ue(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){NT(v,g);const I=[];for(const D of v)I.push(xT(h,o,D));E={arrayValue:{values:I}}}else E=xT(h,o,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||NT(v,g),E=IV(c,l,v,g==="in"||g==="not-in");return nt.create(p,g,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function c1(n,e,t){const r=e,i=hp("where",n);return dp._create(i,r,t)}class iv extends rv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new iv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Tt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let l=i;const c=o.getFlattenedFilters();for(const h of c)h1(l,h),l=Ay(l,h)}(e._query,t),new Io(e.firestore,e.converter,Ay(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sv extends u1{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sv(e,t)}_apply(e){const t=function(i,o,l){if(i.startAt!==null)throw new ue(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ue(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fc(o,l)}(e._query,this._field,this._direction);return new Io(e.firestore,e.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new lu(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function $2(n,e="asc"){const t=e,r=hp("orderBy",n);return sv._create(r,t)}function xT(n,e,t){if(typeof(t=lt(t))=="string"){if(t==="")throw new ue(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MR(e)&&t.indexOf("/")!==-1)throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dt.fromString(t));if(!me.isDocumentKey(r))throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lc(n,new me(r))}if(t instanceof Dn)return Lc(n,t._key);throw new ue(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ap(t)}.`)}function NT(n,e){if(!Array.isArray(n)||n.length===0)throw new ue(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function h1(n,e){const t=function(i,o){for(const l of i)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ue(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class d1{convertValue(e,t="none"){switch(ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ca(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>jt(l.doubleValue));return new J_(o)}convertGeoPoint(e){return new Y_(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=__(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Oc(e));default:return null}}convertTimestamp(e){const t=fs(e);return new Gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dt.fromString(e);ke(dA(r));const i=new pa(r.get(1),r.get(3)),o=new me(r.popFirst(5));return i.isEqual(t)||Zt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class AV extends d1{constructor(e){super(),this.firestore=e}convertBytes(e){return new wa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class av extends Af{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Xd extends av{data(e={}){return super.data(e)}}class f1{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Xd(this._firestore,this._userDataWriter,r.key,r,new bl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const h=new Xd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new bl(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const h=new Xd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new bl(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,g=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),g=l.indexOf(c.doc.key)),{type:PV(c.type),doc:h,oldIndex:p,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function PV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(n){n=In(n,Dn);const e=In(n.firestore,Ar);return hV(ba(e),n._key).then(t=>g1(e,n,t))}class fp extends d1{constructor(e){super(),this.firestore=e}convertBytes(e){return new wa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,t)}}function qc(n){n=In(n,Io);const e=In(n.firestore,Ar),t=ba(e),r=new fp(e);return l1(n._query),dV(t,n._query).then(i=>new f1(e,r,n,i))}function Pf(n,e,t){n=In(n,Dn);const r=In(n.firestore,Ar),i=ov(n.converter,e,t);return pp(r,[Z_(ah(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,en.none())])}function Sc(n,e,t,...r){n=In(n,Dn);const i=In(n.firestore,Ar),o=ah(i);let l;return l=typeof(e=lt(e))=="string"||e instanceof oh?i1(o,"updateDoc",n._key,e,t,r):r1(o,"updateDoc",n._key,e),pp(i,[l.toMutation(n._key,en.exists(!0))])}function Zd(n){return pp(In(n.firestore,Ar),[new nh(n._key,en.none())])}function p1(n,e){const t=In(n.firestore,Ar),r=Lt(n),i=ov(n.converter,e);return pp(t,[Z_(ah(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,en.exists(!1))]).then(()=>r)}function m1(n,...e){var t,r,i;n=lt(n);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||DT(e[l])||(o=e[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(DT(e[l])){const v=e[l];e[l]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[l+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[l+2]=(i=v.complete)===null||i===void 0?void 0:i.bind(v)}let h,p,g;if(n instanceof Dn)p=In(n.firestore,Ar),g=eh(n._key.path),h={next:v=>{e[l]&&e[l](g1(p,n,v))},error:e[l+1],complete:e[l+2]};else{const v=In(n,Io);p=In(v.firestore,Ar),g=v._query;const E=new fp(p);h={next:I=>{e[l]&&e[l](new f1(p,E,v,I))},error:e[l+1],complete:e[l+2]},l1(n._query)}return function(E,I,D,x){const V=new Q_(x),G=new $_(I,V,D);return E.asyncQueue.enqueueAndForget(async()=>B_(await Sf(E),G)),()=>{V.Za(),E.asyncQueue.enqueueAndForget(async()=>j_(await Sf(E),G))}}(ba(p),g,c,h)}function pp(n,e){return function(r,i){const o=new li;return r.asyncQueue.enqueueAndForget(async()=>$O(await aV(r),i,o)),o.promise}(ba(n),e)}function g1(n,e,t){const r=t.docs.get(e._key),i=new fp(n);return new av(n,i,e._key,r,new bl(t.hasPendingWrites,t.fromCache),e.converter)}class CV{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=y1(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function kV(n){return new CV(n)}class bV{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=$c.provider,this._offlineComponentProvider={build:t=>new GA(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function y1(n){return new bV(void 0)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV={maxAttempts:5};function tc(n,e){if((n=lt(n)).firestore!==e)throw new ue(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ah(t)}get(t){const r=tc(t,this._firestore),i=new AV(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return Te();const l=o[0];if(l.isFoundDocument())return new Af(this._firestore,i,l.key,l,r.converter);if(l.isNoDocument())return new Af(this._firestore,i,r._key,null,r.converter);throw Te()})}set(t,r,i){const o=tc(t,this._firestore),l=ov(o.converter,r,i),c=Z_(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,i);return this._transaction.set(o._key,c),this}update(t,r,i,...o){const l=tc(t,this._firestore);let c;return c=typeof(r=lt(r))=="string"||r instanceof oh?i1(this._dataReader,"Transaction.update",l._key,r,i,o):r1(this._dataReader,"Transaction.update",l._key,r),this._transaction.update(l._key,c),this}delete(t){const r=tc(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tc(e,this._firestore),r=new fp(this._firestore);return super.get(e).then(i=>new av(this._firestore,r,t._key,i._document,new bl(!1,!1),t.converter))}}function ef(n,e,t){n=In(n,Ar);const r=Object.assign(Object.assign({},DV),t);return function(o){if(o.maxAttempts<1)throw new ue(ee.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,l,c){const h=new li;return o.asyncQueue.enqueueAndForget(async()=>{const p=await lV(o);new sV(o.asyncQueue,p,c,l,h).au()}),h.promise}(ba(n),i=>e(new xV(n,i)),r)}function mc(){return new ev("serverTimestamp")}(function(e,t=!0){(function(i){au=i})(Pa),mo(new hs("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new Ar(new fx(r.getProvider("auth-internal")),new yx(r.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ue(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pa(p.options.projectId,g)}(l,i),l);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),jr(R0,"4.7.3",e),jr(R0,"4.7.3","esm2017")})();var NV="firebase",OV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(NV,OV,"app");function lv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function _1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VV=_1,v1=new Yc("auth","Firebase",_1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf=new c_("@firebase/auth");function LV(n,...e){Cf.logLevel<=tt.WARN&&Cf.warn(`Auth (${Pa}): ${n}`,...e)}function tf(n,...e){Cf.logLevel<=tt.ERROR&&Cf.error(`Auth (${Pa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(n,...e){throw uv(n,...e)}function Ni(n,...e){return uv(n,...e)}function w1(n,e,t){const r=Object.assign(Object.assign({},VV()),{[e]:t});return new Yc("auth","Firebase",r).create(e,{appName:n.name})}function ls(n){return w1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return v1.create(n,...e)}function Ue(n,e,...t){if(!n)throw uv(e,...t)}function is(n){const e="INTERNAL ASSERTION FAILED: "+n;throw tf(e),new Error(e)}function ps(n,e){n||is(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function MV(){return OT()==="http:"||OT()==="https:"}function OT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MV()||Gb()||"connection"in navigator)?navigator.onLine:!0}function UV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t){this.shortDelay=e,this.longDelay=t,ps(t>e,"Short delay should be less than long delay!"),this.isMobile=qb()||Wb()}get(){return FV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n,e){ps(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=new uh(3e4,6e4);function gs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Li(n,e,t,r,i={}){return T1(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Jc(Object.assign({key:n.config.apiKey},l)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:h},o);return Kb()||(p.referrerPolicy="no-referrer"),E1.fetch()(I1(n,n.config.apiHost,t,c),p)})}async function T1(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},BV),e);try{const i=new $V(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Nd(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,p]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nd(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Nd(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw Nd(n,"user-disabled",l);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw w1(n,g,p);ui(n,g)}}catch(i){if(i instanceof ci)throw i;ui(n,"network-request-failed",{message:String(i)})}}async function ch(n,e,t,r,i={}){const o=await Li(n,e,t,r,i);return"mfaPendingCredential"in o&&ui(n,"multi-factor-auth-required",{_serverResponse:o}),o}function I1(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?cv(n.config,i):`${n.config.apiScheme}://${i}`}function zV(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $V{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ni(this.auth,"network-request-failed")),jV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ni(n,e,r);return i.customData._tokenResponse=t,i}function VT(n){return n!==void 0&&n.enterprise!==void 0}class qV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zV(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function HV(n,e){return Li(n,"GET","/v2/recaptchaConfig",gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KV(n,e){return Li(n,"POST","/v1/accounts:delete",e)}async function S1(n,e){return Li(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GV(n,e=!1){const t=lt(n),r=await t.getIdToken(e),i=hv(r);Ue(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Rc(Eg(i.auth_time)),issuedAtTime:Rc(Eg(i.iat)),expirationTime:Rc(Eg(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Eg(n){return Number(n)*1e3}function hv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return tf("JWT malformed, contained fewer than 3 sections"),null;try{const i=WS(t);return i?JSON.parse(i):(tf("Failed to decode base64 JWT payload"),null)}catch(i){return tf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function LT(n){const e=hv(n);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ci&&WV(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function WV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rc(this.lastLoginAt),this.creationTime=Rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kf(n){var e;const t=n.auth,r=await n.getIdToken(),i=await ru(n,S1(t,{idToken:r}));Ue(i==null?void 0:i.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?R1(o.providerUserInfo):[],c=JV(n.providerData,l),h=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),g=h?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new $y(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function YV(n){const e=lt(n);await kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JV(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function R1(n){return n.map(e=>{var{providerId:t}=e,r=lv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XV(n,e){const t=await T1(n,{},async()=>{const r=Jc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=I1(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",E1.fetch()(l,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZV(n,e){return Li(n,"POST","/v2/accounts:revokeToken",gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=LT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await XV(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new Vl;return r&&(Ue(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Ue(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Ue(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vl,this.toJSON())}_performRefresh(){return is("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(n,e){Ue(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ss{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=lv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new $y(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ru(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return GV(this,e)}reload(){return YV(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ss(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await kf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pi(this.auth.app))return Promise.reject(ls(this.auth));const e=await this.getIdToken();return await ru(this,KV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,l,c,h,p,g;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,I=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,D=(l=t.photoURL)!==null&&l!==void 0?l:void 0,x=(c=t.tenantId)!==null&&c!==void 0?c:void 0,V=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,G=(p=t.createdAt)!==null&&p!==void 0?p:void 0,$=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:j,emailVerified:H,isAnonymous:re,providerData:b,stsTokenManager:P}=t;Ue(j&&P,e,"internal-error");const S=Vl.fromJSON(this.name,P);Ue(typeof j=="string",e,"internal-error"),Ys(v,e.name),Ys(E,e.name),Ue(typeof H=="boolean",e,"internal-error"),Ue(typeof re=="boolean",e,"internal-error"),Ys(I,e.name),Ys(D,e.name),Ys(x,e.name),Ys(V,e.name),Ys(G,e.name),Ys($,e.name);const R=new ss({uid:j,auth:e,email:E,emailVerified:H,displayName:v,isAnonymous:re,photoURL:D,phoneNumber:I,tenantId:x,stsTokenManager:S,createdAt:G,lastLoginAt:$});return b&&Array.isArray(b)&&(R.providerData=b.map(k=>Object.assign({},k))),V&&(R._redirectEventId=V),R}static async _fromIdTokenResponse(e,t,r=!1){const i=new Vl;i.updateFromServerResponse(t);const o=new ss({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await kf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ue(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?R1(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),c=new Vl;c.updateFromIdToken(r);const h=new ss({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new $y(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=new Map;function os(n){ps(n instanceof Function,"Expected a class definition");let e=MT.get(n);return e?(ps(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,MT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}A1.type="NONE";const FT=A1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(n,e,t){return`firebase:${n}:${e}:${t}`}class Ll{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=nf(this.userKey,i.apiKey,o),this.fullPersistenceKey=nf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ss._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ll(os(FT),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||os(FT);const l=nf(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const g=await p._get(l);if(g){const v=ss._fromJSON(e,g);p!==o&&(c=v),o=p;break}}catch{}const h=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ll(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Ll(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(b1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(P1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(x1(e))return"Blackberry";if(N1(e))return"Webos";if(C1(e))return"Safari";if((e.includes("chrome/")||k1(e))&&!e.includes("edge/"))return"Chrome";if(D1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function P1(n=fn()){return/firefox\//i.test(n)}function C1(n=fn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function k1(n=fn()){return/crios\//i.test(n)}function b1(n=fn()){return/iemobile/i.test(n)}function D1(n=fn()){return/android/i.test(n)}function x1(n=fn()){return/blackberry/i.test(n)}function N1(n=fn()){return/webos/i.test(n)}function dv(n=fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function eL(n=fn()){var e;return dv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tL(){return Qb()&&document.documentMode===10}function O1(n=fn()){return dv(n)||D1(n)||N1(n)||x1(n)||/windows phone/i.test(n)||b1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(n,e=[]){let t;switch(n){case"Browser":t=UT(fn());break;case"Worker":t=`${UT(fn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(n,e={}){return Li(n,"GET","/v2/passwordPolicy",gs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=6;class sL{constructor(e){var t,r,i,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:iL,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,l,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new BT(this),this.idTokenSubscription=new BT(this),this.beforeStateQueue=new nL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=os(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ll.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await S1(this,{idToken:e}),r=await ss._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Pi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pi(this.app))return Promise.reject(ls(this));const t=e?lt(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pi(this.app)?Promise.reject(ls(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pi(this.app)?Promise.reject(ls(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rL(this),t=new sL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&os(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await Ll.create(this,[os(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=V1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&LV(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function So(n){return lt(n)}class BT{constructor(e){this.auth=e,this.observer=null,this.addObserver=tD(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aL(n){mp=n}function L1(n){return mp.loadJS(n)}function lL(){return mp.recaptchaEnterpriseScript}function uL(){return mp.gapiScript}function cL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const hL="recaptcha-enterprise",dL="NO_RECAPTCHA";class fL{constructor(e){this.type=hL,this.auth=So(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{HV(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new qV(h);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(h=>{c(h)})})}function i(o,l,c){const h=window.grecaptcha;VT(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(dL)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&VT(window.grecaptcha))i(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=lL();h.length!==0&&(h+=c),L1(h).then(()=>{i(c,o,l)}).catch(p=>{l(p)})}}).catch(c=>{l(c)})})}}async function jT(n,e,t,r=!1){const i=new fL(n);let o;try{o=await i.verify(t)}catch{o=await i.verify(t,!0)}const l=Object.assign({},e);return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function bf(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await jT(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await jT(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(n,e){const t=ou(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Cc(o,e??{}))return i;ui(i,"already-initialized")}return t.initialize({options:e})}function mL(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(os);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function gL(n,e,t){const r=So(n);Ue(r._canInitEmulator,r,"emulator-config-failed"),Ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=M1(e),{host:l,port:c}=yL(e),h=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${l}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),_L()}function M1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function yL(n){const e=M1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:zT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:zT(l)}}}function zT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function _L(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return is("not implemented")}_getIdTokenResponse(e){return is("not implemented")}_linkToIdToken(e,t){return is("not implemented")}_getReauthenticationResolver(e){return is("not implemented")}}async function vL(n,e){return Li(n,"POST","/v1/accounts:update",e)}async function wL(n,e){return Li(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EL(n,e){return ch(n,"POST","/v1/accounts:signInWithPassword",gs(n,e))}async function F1(n,e){return Li(n,"POST","/v1/accounts:sendOobCode",gs(n,e))}async function TL(n,e){return F1(n,e)}async function IL(n,e){return F1(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL(n,e){return ch(n,"POST","/v1/accounts:signInWithEmailLink",gs(n,e))}async function RL(n,e){return ch(n,"POST","/v1/accounts:signInWithEmailLink",gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends fv{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Hc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Hc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bf(e,t,"signInWithPassword",EL);case"emailLink":return SL(e,{email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bf(e,r,"signUpPassword",wL);case"emailLink":return RL(e,{idToken:t,email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(n,e){return ch(n,"POST","/v1/accounts:signInWithIdp",gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL="http://localhost";class Ea extends fv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ui("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=lv(t,["providerId","signInMethod"]);if(!r||!i)return null;const l=new Ea(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ml(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ml(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ml(e,t)}buildRequest(){const e={requestUri:AL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CL(n){const e=uc(cc(n)).link,t=e?uc(cc(e)).deep_link_id:null,r=uc(cc(n)).deep_link_id;return(r?uc(cc(r)).link:null)||r||t||e||n}class pv{constructor(e){var t,r,i,o,l,c;const h=uc(cc(e)),p=(t=h.apiKey)!==null&&t!==void 0?t:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,v=PL((i=h.mode)!==null&&i!==void 0?i:null);Ue(p&&g&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=g,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=h.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=CL(e);try{return new pv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(){this.providerId=fu.PROVIDER_ID}static credential(e,t){return Hc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=pv.parseLink(t);return Ue(r,"argument-error"),Hc._fromEmailAndCode(e,r.code,r.tenantId)}}fu.PROVIDER_ID="password";fu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends U1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends hh{constructor(){super("facebook.com")}static credential(e){return Ea._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return no.credential(e.oauthAccessToken)}catch{return null}}}no.FACEBOOK_SIGN_IN_METHOD="facebook.com";no.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends hh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ea._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ro.credential(t,r)}catch{return null}}}ro.GOOGLE_SIGN_IN_METHOD="google.com";ro.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends hh{constructor(){super("github.com")}static credential(e){return Ea._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.GITHUB_SIGN_IN_METHOD="github.com";io.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends hh{constructor(){super("twitter.com")}static credential(e,t){return Ea._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return so.credential(t,r)}catch{return null}}}so.TWITTER_SIGN_IN_METHOD="twitter.com";so.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kL(n,e){return ch(n,"POST","/v1/accounts:signUp",gs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await ss._fromIdTokenResponse(e,r,i),l=$T(r);return new Ta({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=$T(r);return new Ta({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function $T(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends ci{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Df.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Df(e,t,r,i)}}function B1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Df._fromErrorAndOperation(n,o,e,r):o})}async function bL(n,e,t=!1){const r=await ru(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ta._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(n,e,t=!1){const{auth:r}=n;if(Pi(r.app))return Promise.reject(ls(r));const i="reauthenticate";try{const o=await ru(n,B1(r,i,e,n),t);Ue(o.idToken,r,"internal-error");const l=hv(o.idToken);Ue(l,r,"internal-error");const{sub:c}=l;return Ue(n.uid===c,r,"user-mismatch"),Ta._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ui(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z1(n,e,t=!1){if(Pi(n.app))return Promise.reject(ls(n));const r="signIn",i=await B1(n,r,e),o=await Ta._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function DL(n,e){return z1(So(n),e)}async function H2(n,e){return j1(lt(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(n,e,t){var r;Ue(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),Ue(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Ue(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Ue(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $1(n){const e=So(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NL(n,e,t){const r=So(n);await bf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",IL)}async function K2(n,e,t){if(Pi(n.app))return Promise.reject(ls(n));const r=So(n),l=await bf(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kL).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&$1(n),h}),c=await Ta._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function G2(n,e,t){return Pi(n.app)?Promise.reject(ls(n)):DL(lt(n),fu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&$1(n),r})}async function W2(n,e){const t=lt(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};xL(t.auth,i,e);const{email:o}=await TL(t.auth,i);o!==n.email&&await n.reload()}function Q2(n,e){return OL(lt(n),null,e)}async function OL(n,e,t){const{auth:r}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(o.password=t);const l=await ru(n,vL(r,o));await n._updateTokensIfNecessary(l,!0)}function VL(n,e,t,r){return lt(n).onIdTokenChanged(e,t,r)}function LL(n,e,t){return lt(n).beforeAuthStateChanged(e,t)}function ML(n,e,t,r){return lt(n).onAuthStateChanged(e,t,r)}function Y2(n){return lt(n).signOut()}async function J2(n){return lt(n).delete()}const xf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xf,"1"),this.storage.removeItem(xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=1e3,UL=10;class H1 extends q1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);tL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,UL):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},FL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}H1.type="LOCAL";const BL=H1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1 extends q1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}K1.type="SESSION";const G1=K1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new gp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async p=>p(t.origin,o)),h=await jL(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const p=mv("",20);i.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(E.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function $L(n){Oi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function qL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HL(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function KL(){return W1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="firebaseLocalStorageDb",GL=1,Nf="firebaseLocalStorage",Y1="fbase_key";class dh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function yp(n,e){return n.transaction([Nf],e?"readwrite":"readonly").objectStore(Nf)}function WL(){const n=indexedDB.deleteDatabase(Q1);return new dh(n).toPromise()}function qy(){const n=indexedDB.open(Q1,GL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Nf,{keyPath:Y1})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Nf)?e(r):(r.close(),await WL(),e(await qy()))})})}async function qT(n,e,t){const r=yp(n,!0).put({[Y1]:e,value:t});return new dh(r).toPromise()}async function QL(n,e){const t=yp(n,!1).get(e),r=await new dh(t).toPromise();return r===void 0?null:r.value}function HT(n,e){const t=yp(n,!0).delete(e);return new dh(t).toPromise()}const YL=800,JL=3;class J1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>JL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return W1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gp._getInstance(KL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await qL(),!this.activeServiceWorker)return;this.sender=new zL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qy();return await qT(e,xf,"1"),await HT(e,xf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>qT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>QL(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>HT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=yp(i,!1).getAll();return new dh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J1.type="LOCAL";const XL=J1;new uh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(n,e){return e?os(e):(Ue(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv extends fv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ml(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ml(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eM(n){return z1(n.auth,new gv(n),n.bypassAuthState)}function tM(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),j1(t,new gv(n),n.bypassAuthState)}async function nM(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),bL(t,new gv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eM;case"linkViaPopup":case"linkViaRedirect":return nM;case"reauthViaPopup":case"reauthViaRedirect":return tM;default:ui(this.auth,"internal-error")}}resolve(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=new uh(2e3,1e4);class Dl extends X1{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Dl.currentPopupAction&&Dl.currentPopupAction.cancel(),Dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){ps(this.filter.length===1,"Popup operations only handle one event");const e=mv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rM.get())};e()}}Dl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="pendingRedirect",rf=new Map;class sM extends X1{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=rf.get(this.auth._key());if(!e){try{const r=await oM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}rf.set(this.auth._key(),e)}return this.bypassAuthState||rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oM(n,e){const t=uM(e),r=lM(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function aM(n,e){rf.set(n._key(),e)}function lM(n){return os(n._redirectPersistence)}function uM(n){return nf(iM,n.config.apiKey,n.name)}async function cM(n,e,t=!1){if(Pi(n.app))return Promise.reject(ls(n));const r=So(n),i=ZL(r,e),l=await new sM(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=10*60*1e3;class dM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Z1(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ni(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hM&&this.cachedEventUids.clear(),this.cachedEventUids.has(KT(e))}saveEventToCache(e){this.cachedEventUids.add(KT(e)),this.lastProcessedEventTime=Date.now()}}function KT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Z1({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Z1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(n,e={}){return Li(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gM=/^https?/;async function yM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await pM(n);for(const t of e)try{if(_M(t))return}catch{}ui(n,"unauthorized-domain")}function _M(n){const e=zy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!gM.test(t))return!1;if(mM.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=new uh(3e4,6e4);function GT(){const n=Oi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function wM(n){return new Promise((e,t)=>{var r,i,o;function l(){GT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{GT(),t(Ni(n,"network-request-failed"))},timeout:vM.get()})}if(!((i=(r=Oi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Oi().gapi)===null||o===void 0)&&o.load)l();else{const c=cL("iframefcb");return Oi()[c]=()=>{gapi.load?l():t(Ni(n,"network-request-failed"))},L1(`${uL()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw sf=null,e})}let sf=null;function EM(n){return sf=sf||wM(n),sf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=new uh(5e3,15e3),IM="__/auth/iframe",SM="emulator/auth/iframe",RM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PM(n){const e=n.config;Ue(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?cv(e,SM):`https://${n.config.authDomain}/${IM}`,r={apiKey:e.apiKey,appName:n.name,v:Pa},i=AM.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Jc(r).slice(1)}`}async function CM(n){const e=await EM(n),t=Oi().gapi;return Ue(t,n,"internal-error"),e.open({where:document.body,url:PM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RM,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Ni(n,"network-request-failed"),c=Oi().setTimeout(()=>{o(l)},TM.get());function h(){Oi().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bM=500,DM=600,xM="_blank",NM="http://localhost";class WT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OM(n,e,t,r=bM,i=DM){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},kM),{width:r.toString(),height:i.toString(),top:o,left:l}),p=fn().toLowerCase();t&&(c=k1(p)?xM:t),P1(p)&&(e=e||NM,h.scrollbars="yes");const g=Object.entries(h).reduce((E,[I,D])=>`${E}${I}=${D},`,"");if(eL(p)&&c!=="_self")return VM(e||"",c),new WT(null);const v=window.open(e||"",c,g);Ue(v,n,"popup-blocked");try{v.focus()}catch{}return new WT(v)}function VM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM="__/auth/handler",MM="emulator/auth/handler",FM=encodeURIComponent("fac");async function QT(n,e,t,r,i,o){Ue(n.config.authDomain,n,"auth-domain-config-required"),Ue(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Pa,eventId:i};if(e instanceof U1){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",eD(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof hh){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const h=await n._getAppCheckToken(),p=h?`#${FM}=${encodeURIComponent(h)}`:"";return`${UM(n)}?${Jc(c).slice(1)}${p}`}function UM({config:n}){return n.emulator?cv(n,MM):`https://${n.authDomain}/${LM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="webStorageSupport";class BM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G1,this._completeRedirectFn=cM,this._overrideRedirectResult=aM}async _openPopup(e,t,r,i){var o;ps((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await QT(e,t,r,zy(),i);return OM(e,l,mv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await QT(e,t,r,zy(),i);return $L(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(ps(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await CM(e),r=new dM(e);return t.register("authEvent",i=>(Ue(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tg,{type:Tg},i=>{var o;const l=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Tg];l!==void 0&&t(!!l),ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return O1()||C1()||dv()}}const jM=BM;var YT="@firebase/auth",JT="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qM(n){mo(new hs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ue(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:V1(n)},p=new oL(r,i,o,h);return mL(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),mo(new hs("auth-internal",e=>{const t=So(e.getProvider("auth").getImmediate());return(r=>new zM(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(YT,JT,$M(n)),jr(YT,JT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=5*60,KM=JS("authIdTokenMaxAge")||HM;let XT=null;const GM=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>KM)return;const i=t==null?void 0:t.token;XT!==i&&(XT=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function eP(n=Wf()){const e=ou(n,"auth");if(e.isInitialized())return e.getImmediate();const t=pL(n,{popupRedirectResolver:jM,persistence:[XL,BL,G1]}),r=JS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=GM(o.toString());LL(t,l,()=>l(t.currentUser)),VL(t,c=>l(c))}}const i=QS("auth");return i&&gL(t,`http://${i}`),t}function WM(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}aL({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Ni("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",WM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qM("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="firebasestorage.googleapis.com",nP="storageBucket",QM=2*60*1e3,YM=10*60*1e3,JM=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt extends ci{constructor(e,t,r=0){super(Ig(e),`Firebase Storage: ${t} (${Ig(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ig(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Mt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Mt||(Mt={}));function Ig(n){return"storage/"+n}function yv(){const n="An unknown error occurred, please check the error payload for server response.";return new Wt(Mt.UNKNOWN,n)}function XM(n){return new Wt(Mt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function ZM(n){return new Wt(Mt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function eF(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Wt(Mt.UNAUTHENTICATED,n)}function tF(){return new Wt(Mt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function nF(n){return new Wt(Mt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function rP(){return new Wt(Mt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iP(){return new Wt(Mt.CANCELED,"User canceled the upload/download.")}function rF(n){return new Wt(Mt.INVALID_URL,"Invalid URL '"+n+"'.")}function iF(n){return new Wt(Mt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function sF(){return new Wt(Mt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nP+"' property when initializing the app?")}function sP(){return new Wt(Mt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function oF(){return new Wt(Mt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function aF(){return new Wt(Mt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function lF(n){return new Wt(Mt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Hy(n){return new Wt(Mt.INVALID_ARGUMENT,n)}function oP(){return new Wt(Mt.APP_DELETED,"The Firebase app was deleted.")}function uF(n){return new Wt(Mt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ac(n,e){return new Wt(Mt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function nc(n){throw new Wt(Mt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ir.makeFromUrl(e,t)}catch{return new Ir(e,"")}if(r.path==="")return r;throw iF(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),h={bucket:1,path:3};function p(H){H.path_=decodeURIComponent(H.path)}const g="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",I=new RegExp(`^https?://${v}/${g}/b/${i}/o${E}`,"i"),D={bucket:1,path:3},x=t===tP?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",G=new RegExp(`^https?://${x}/${i}/${V}`,"i"),j=[{regex:c,indices:h,postModify:o},{regex:I,indices:D,postModify:p},{regex:G,indices:{bucket:1,path:2},postModify:p}];for(let H=0;H<j.length;H++){const re=j[H],b=re.regex.exec(e);if(b){const P=b[re.indices.bucket];let S=b[re.indices.path];S||(S=""),r=new Ir(P,S),re.postModify(r);break}}if(r==null)throw rF(e);return r}}class cF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(n,e,t){let r=1,i=null,o=null,l=!1,c=0;function h(){return c===2}let p=!1;function g(...V){p||(p=!0,e.apply(null,V))}function v(V){i=setTimeout(()=>{i=null,n(I,h())},V)}function E(){o&&clearTimeout(o)}function I(V,...G){if(p){E();return}if(V){E(),g.call(null,V,...G);return}if(h()||l){E(),g.call(null,V,...G);return}r<64&&(r*=2);let j;c===1?(c=2,j=0):j=(r+Math.random())*1e3,v(j)}let D=!1;function x(V){D||(D=!0,E(),!p&&(i!==null?(V||(c=2),clearTimeout(i),v(0)):V||(c=1)))}return v(0),o=setTimeout(()=>{l=!0,x(!0)},t),x}function dF(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(n){return n!==void 0}function pF(n){return typeof n=="function"}function mF(n){return typeof n=="object"&&!Array.isArray(n)}function _p(n){return typeof n=="string"||n instanceof String}function ZT(n){return _v()&&n instanceof Blob}function _v(){return typeof Blob<"u"}function eI(n,e,t,r){if(r<e)throw Hy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Hy(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function aP(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var ha;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ha||(ha={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e,t,r,i,o,l,c,h,p,g,v,E=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=g,this.connectionFactory_=v,this.retry=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,D)=>{this.resolve_=I,this.reject_=D,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Od(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const h=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===ha.NO_ERROR,h=o.getStatus();if(!c||lP(h,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===ha.ABORT;r(!1,new Od(!1,null,g));return}const p=this.successCodes_.indexOf(h)!==-1;r(!0,new Od(p,o))})},t=(r,i)=>{const o=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());fF(h)?o(h):o()}catch(h){l(h)}else if(c!==null){const h=yv();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(i.canceled){const h=this.appDelete_?oP():iP();l(h)}else{const h=rP();l(h)}};this.canceled_?t(!1,new Od(!1,null,!0)):this.backoffId_=hF(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Od{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function yF(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function _F(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function vF(n,e){e&&(n["X-Firebase-GMPID"]=e)}function wF(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function EF(n,e,t,r,i,o,l=!0){const c=aP(n.urlParams),h=n.url+c,p=Object.assign({},n.headers);return vF(p,e),yF(p,t),_F(p,o),wF(p,r),new gF(h,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function IF(...n){const e=TF();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(_v())return new Blob(n);throw new Wt(Mt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function SF(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(n){if(typeof atob>"u")throw lF("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Sg{constructor(e,t){this.data=e,this.contentType=t||null}}function AF(n,e){switch(n){case bi.RAW:return new Sg(uP(e));case bi.BASE64:case bi.BASE64URL:return new Sg(cP(n,e));case bi.DATA_URL:return new Sg(CF(e),kF(e))}throw yv()}function uP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function PF(n){let e;try{e=decodeURIComponent(n)}catch{throw Ac(bi.DATA_URL,"Malformed data URL.")}return uP(e)}function cP(n,e){switch(n){case bi.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Ac(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case bi.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Ac(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=RF(e)}catch(i){throw i.message.includes("polyfill")?i:Ac(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class hP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ac(bi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=bF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function CF(n){const e=new hP(n);return e.base64?cP(bi.BASE64,e.rest):PF(e.rest)}function kF(n){return new hP(n).contentType}function bF(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,t){let r=0,i="";ZT(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(ZT(this.data_)){const r=this.data_,i=SF(r,e,t);return i===null?null:new ns(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ns(r,!0)}}static getBlob(...e){if(_v()){const t=e.map(r=>r instanceof ns?r.data_:r);return new ns(IF.apply(null,t))}else{const t=e.map(l=>_p(l)?AF(bi.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)i[o++]=l[c]}),new ns(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(n){let e;try{e=JSON.parse(n)}catch{return null}return mF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function xF(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function fP(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(n,e){return e}class qn{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||NF}}let Vd=null;function OF(n){return!_p(n)||n.length<2?n:fP(n)}function vv(){if(Vd)return Vd;const n=[];n.push(new qn("bucket")),n.push(new qn("generation")),n.push(new qn("metageneration")),n.push(new qn("name","fullPath",!0));function e(o,l){return OF(l)}const t=new qn("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const i=new qn("size");return i.xform=r,n.push(i),n.push(new qn("timeCreated")),n.push(new qn("updated")),n.push(new qn("md5Hash",null,!0)),n.push(new qn("cacheControl",null,!0)),n.push(new qn("contentDisposition",null,!0)),n.push(new qn("contentEncoding",null,!0)),n.push(new qn("contentLanguage",null,!0)),n.push(new qn("contentType",null,!0)),n.push(new qn("metadata","customMetadata",!0)),Vd=n,Vd}function VF(n,e){function t(){const r=n.bucket,i=n.fullPath,o=new Ir(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function LF(n,e,t){const r={};r.type="file";const i=t.length;for(let o=0;o<i;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return VF(r,n),r}function pP(n,e,t){const r=dP(e);return r===null?null:LF(n,r,t)}function MF(n,e,t,r){const i=dP(e);if(i===null||!_p(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(p=>{const g=n.bucket,v=n.fullPath,E="/b/"+l(g)+"/o/"+l(v),I=pu(E,t,r),D=aP({alt:"media",token:p});return I+D})[0]}function mP(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class Da{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(n){if(!n)throw yv()}function wv(n,e){function t(r,i){const o=pP(n,i,e);return us(o!==null),o}return t}function FF(n,e){function t(r,i){const o=pP(n,i,e);return us(o!==null),MF(o,i,n.host,n._protocol)}return t}function fh(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=tF():i=eF():t.getStatus()===402?i=ZM(n.bucket):t.getStatus()===403?i=nF(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Ev(n){const e=fh(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=XM(n.path)),o.serverResponse=i.serverResponse,o}return t}function UF(n,e,t){const r=e.fullServerUrl(),i=pu(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,c=new Da(i,o,wv(n,t),l);return c.errorHandler=Ev(e),c}function BF(n,e,t){const r=e.fullServerUrl(),i=pu(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,c=new Da(i,o,FF(n,t),l);return c.errorHandler=Ev(e),c}function jF(n,e){const t=e.fullServerUrl(),r=pu(t,n.host,n._protocol),i="DELETE",o=n.maxOperationRetryTime;function l(h,p){}const c=new Da(r,i,l,o);return c.successCodes=[200,204],c.errorHandler=Ev(e),c}function zF(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function gP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=zF(null,e)),r}function yP(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let j="";for(let H=0;H<2;H++)j=j+Math.random().toString().slice(2);return j}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const p=gP(e,r,i),g=mP(p,t),v="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+h+`\r
Content-Type: `+p.contentType+`\r
\r
`,E=`\r
--`+h+"--",I=ns.getBlob(v,r,E);if(I===null)throw sP();const D={name:p.fullPath},x=pu(o,n.host,n._protocol),V="POST",G=n.maxUploadRetryTime,$=new Da(x,V,wv(n,t),G);return $.urlParams=D,$.headers=l,$.body=I.uploadData(),$.errorHandler=fh(e),$}class Of{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Tv(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{us(!1)}return us(!!t&&(e||["active"]).indexOf(t)!==-1),t}function $F(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l=gP(e,r,i),c={name:l.fullPath},h=pu(o,n.host,n._protocol),p="POST",g={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},v=mP(l,t),E=n.maxUploadRetryTime;function I(x){Tv(x);let V;try{V=x.getResponseHeader("X-Goog-Upload-URL")}catch{us(!1)}return us(_p(V)),V}const D=new Da(h,p,I,E);return D.urlParams=c,D.headers=g,D.body=v,D.errorHandler=fh(e),D}function qF(n,e,t,r){const i={"X-Goog-Upload-Command":"query"};function o(p){const g=Tv(p,["active","final"]);let v=null;try{v=p.getResponseHeader("X-Goog-Upload-Size-Received")}catch{us(!1)}v||us(!1);const E=Number(v);return us(!isNaN(E)),new Of(E,r.size(),g==="final")}const l="POST",c=n.maxUploadRetryTime,h=new Da(t,l,o,c);return h.headers=i,h.errorHandler=fh(e),h}const tI=256*1024;function HF(n,e,t,r,i,o,l,c){const h=new Of(0,0);if(l?(h.current=l.current,h.total=l.total):(h.current=0,h.total=r.size()),r.size()!==h.total)throw oF();const p=h.total-h.current;let g=p;i>0&&(g=Math.min(g,i));const v=h.current,E=v+g;let I="";g===0?I="finalize":p===g?I="upload, finalize":I="upload";const D={"X-Goog-Upload-Command":I,"X-Goog-Upload-Offset":`${h.current}`},x=r.slice(v,E);if(x===null)throw sP();function V(H,re){const b=Tv(H,["active","final"]),P=h.current+g,S=r.size();let R;return b==="final"?R=wv(e,o)(H,re):R=null,new Of(P,S,b==="final",R)}const G="POST",$=e.maxUploadRetryTime,j=new Da(t,G,V,$);return j.headers=D,j.body=x.uploadData(),j.progressCallback=c||null,j.errorHandler=fh(n),j}const ar={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Rg(n){switch(n){case"running":case"pausing":case"canceling":return ar.RUNNING;case"paused":return ar.PAUSED;case"success":return ar.SUCCESS;case"canceled":return ar.CANCELED;case"error":return ar.ERROR;default:return ar.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,t,r){if(pF(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class GF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ha.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ha.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ha.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw nc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class WF extends GF{initXhr(){this.xhr_.responseType="text"}}function oo(){return new WF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=vv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Mt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(lP(i.status,[]))if(o)i=rP();else{this.sleepTime=Math.max(this.sleepTime*2,JM),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Mt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const r=$F(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,oo,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=qF(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,oo,t,r);this._request=o,o.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=tI*this._chunkMultiplier,t=new Of(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let l;try{l=HF(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(h){this._error=h,this._transition("error");return}const c=this._ref.storage._makeRequest(l,oo,i,o,!1);this._request=c,c.getPromise().then(h=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(h.current),h.finalized?(this._metadata=h.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){tI*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=UF(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,oo,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=yP(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,oo,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=iP(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Rg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new KF(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Rg(this._state)){case ar.SUCCESS:wl(this._resolve.bind(null,this.snapshot))();break;case ar.CANCELED:case ar.ERROR:const t=this._reject;wl(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Rg(this._state)){case ar.RUNNING:case ar.PAUSED:e.next&&wl(e.next.bind(e,this.snapshot))();break;case ar.SUCCESS:e.complete&&wl(e.complete.bind(e))();break;case ar.CANCELED:case ar.ERROR:e.error&&wl(e.error.bind(e,this._error))();break;default:e.error&&wl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t){this._service=e,t instanceof Ir?this._location=t:this._location=Ir.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ia(e,t)}get root(){const e=new Ir(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fP(this._location.path)}get storage(){return this._service}get parent(){const e=DF(this._location.path);if(e===null)return null;const t=new Ir(this._location.bucket,e);return new Ia(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw uF(e)}}function YF(n,e,t){n._throwIfRoot("uploadBytes");const r=yP(n.storage,n._location,vv(),new ns(e,!0),t);return n.storage.makeRequestWithTokens(r,oo).then(i=>({metadata:i,ref:n}))}function JF(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new QF(n,new ns(e),t)}function XF(n){n._throwIfRoot("getDownloadURL");const e=BF(n.storage,n._location,vv());return n.storage.makeRequestWithTokens(e,oo).then(t=>{if(t===null)throw aF();return t})}function ZF(n){n._throwIfRoot("deleteObject");const e=jF(n.storage,n._location);return n.storage.makeRequestWithTokens(e,oo)}function eU(n,e){const t=xF(n._location.path,e),r=new Ir(n._location.bucket,t);return new Ia(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(n){return/^[A-Za-z]+:\/\//.test(n)}function nU(n,e){return new Ia(n,e)}function _P(n,e){if(n instanceof Iv){const t=n;if(t._bucket==null)throw sF();const r=new Ia(t,t._bucket);return e!=null?_P(r,e):r}else return e!==void 0?eU(n,e):n}function rU(n,e){if(e&&tU(e)){if(n instanceof Iv)return nU(n,e);throw Hy("To use ref(service, url), the first argument must be a Storage instance.")}else return _P(n,e)}function nI(n,e){const t=e==null?void 0:e[nP];return t==null?null:Ir.makeFromBucketSpec(t,n)}function iU(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:XS(i,n.app.options.projectId))}class Iv{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=tP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=QM,this._maxUploadRetryTime=YM,this._requests=new Set,i!=null?this._bucket=Ir.makeFromBucketSpec(i,this._host):this._bucket=nI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ir.makeFromBucketSpec(this._url,e):this._bucket=nI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ia(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new cF(oP());{const l=EF(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const rI="@firebase/storage",iI="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="storage";function X2(n,e,t){return n=lt(n),YF(n,e,t)}function Z2(n,e,t){return n=lt(n),JF(n,e,t)}function ej(n){return n=lt(n),XF(n)}function sU(n){return n=lt(n),ZF(n)}function oU(n,e){return n=lt(n),rU(n,e)}function wP(n=Wf(),e){n=lt(n);const r=ou(n,vP).getImmediate({identifier:e}),i=u_("storage");return i&&aU(r,...i),r}function aU(n,e,t,r={}){iU(n,e,t,r)}function lU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Iv(t,r,i,e,Pa)}function uU(){mo(new hs(vP,lU,"PUBLIC").setMultipleInstances(!0)),jr(rI,iI,""),jr(rI,iI,"esm2017")}uU();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU="type.googleapis.com/google.protobuf.Int64Value",hU="type.googleapis.com/google.protobuf.UInt64Value";function EP(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Ky(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Ky(e));if(typeof n=="function"||typeof n=="object")return EP(n,e=>Ky(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Vf(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case cU:case hU:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Vf(e)):typeof n=="function"||typeof n=="object"?EP(n,e=>Vf(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fl extends ci{constructor(e,t,r){super(`${Sv}/${e}`,t||""),this.details=r}}function dU(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function fU(n,e){let t=dU(n),r=t,i;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!sI[l])return new Fl("internal","internal");t=sI[l],r=l}const c=o.message;typeof c=="string"&&(r=c),i=o.details,i!==void 0&&(i=Vf(i))}}catch{}return t==="ok"?null:new Fl(t,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="us-central1";function mU(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Fl("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class gU{constructor(e,t,r,i,o=Gy,l){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new pU(t,r,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Gy}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function yU(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function _U(n,e,t){return r=>wU(n,e,r,{})}async function vU(n,e,t,r){t["Content-Type"]="application/json";let i;try{i=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}function wU(n,e,t,r){const i=n._url(e);return EU(n,i,t,r)}async function EU(n,e,t,r){t=Ky(t);const i={data:t},o={},l=await n.contextProvider.getContext(r.limitedUseAppCheckTokens);l.authToken&&(o.Authorization="Bearer "+l.authToken),l.messagingToken&&(o["Firebase-Instance-ID-Token"]=l.messagingToken),l.appCheckToken!==null&&(o["X-Firebase-AppCheck"]=l.appCheckToken);const c=r.timeout||7e4,h=mU(c),p=await Promise.race([vU(e,i,o,n.fetchImpl),h.promise,n.cancelAllRequests]);if(h.cancel(),!p)throw new Fl("cancelled","Firebase Functions instance was deleted.");const g=fU(p.status,p.json);if(g)throw g;if(!p.json)throw new Fl("internal","Response is not valid JSON object.");let v=p.json.data;if(typeof v>"u"&&(v=p.json.result),typeof v>"u")throw new Fl("internal","Response is missing data field.");return{data:Vf(v)}}const oI="@firebase/functions",aI="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU="auth-internal",IU="app-check-internal",SU="messaging-internal";function RU(n,e){const t=(r,{instanceIdentifier:i})=>{const o=r.getProvider("app").getImmediate(),l=r.getProvider(TU),c=r.getProvider(SU),h=r.getProvider(IU);return new gU(o,l,c,h,i,n)};mo(new hs(Sv,t,"PUBLIC").setMultipleInstances(!0)),jr(oI,aI,e),jr(oI,aI,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(n=Wf(),e=Gy){const r=ou(lt(n),Sv).getImmediate({identifier:e}),i=u_("functions");return i&&PU(r,...i),r}function PU(n,e,t){yU(lt(n),e,t)}function CU(n,e,t){return _U(lt(n),e)}RU(fetch.bind(self));const kU={apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""},vp=d_(kU),Lf=eP(vp),Et=mV(vp,{localCache:kV({cacheSizeBytes:1e8,tabManager:y1()}),experimentalForceLongPolling:!0});Di(Et,"messages");const lI=Di(Et,"events");Di(Et,"conversations");Di(Et,"users");const bU=AU(vp),DU=wP(vp),xU={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"",VITE_FIREBASE_APP_ID:"",VITE_FIREBASE_AUTH_DOMAIN:"",VITE_FIREBASE_MESSAGING_SENDER_ID:"",VITE_FIREBASE_PROJECT_ID:"",VITE_FIREBASE_STORAGE_BUCKET:"",VITE_GOOGLE_API_KEY:"AIzaSyDy4LMuyBVh3Ui52BX3SH4jdz0s9rrmoyE",VITE_RAZORPAY_KEY:"rzp_test_KJSqoIIfYu0tq5",VITE_RAZORPAY_SECRET:"obwbXj3STDX1xhSzRoQKE1bp",VITE_USE_FIREBASE_EMULATOR:"false"},NU=()=>{const e=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID"].filter(t=>!xU[t]);if(e.length>0)throw new Error(`Missing required environment variables: ${e.join(", ")}`)};NU();const OU={apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""};let Kc;try{w0().length?Kc=w0()[0]:Kc=d_(OU)}catch(n){throw console.error("Error initializing Firebase:",n),new Error("Failed to initialize Firebase. Please check your configuration.")}eP(Kc);const vr=ZA(Kc);wP(Kc);Di(vr,"tickets");gV(vr).catch(n=>{n.code==="failed-precondition"?console.warn("Firebase persistence failed: Multiple tabs open"):n.code==="unimplemented"&&console.warn("Firebase persistence not supported in this browser")});var El={},Ag,uI;function VU(){return uI||(uI=1,Ag=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Ag}var Pg={},Js={},cI;function xa(){if(cI)return Js;cI=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Js.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},Js.getSymbolTotalCodewords=function(r){return e[r]},Js.getBCHDigit=function(t){let r=0;for(;t!==0;)r++,t>>>=1;return r},Js.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');n=r},Js.isKanjiModeEnabled=function(){return typeof n<"u"},Js.toSJIS=function(r){return n(r)},Js}var Cg={},hI;function Rv(){return hI||(hI=1,function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,i){if(n.isValid(r))return r;try{return e(r)}catch{return i}}}(Cg)),Cg}var kg,dI;function LU(){if(dI)return kg;dI=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},kg=n,kg}var bg,fI;function MU(){if(fI)return bg;fI=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,r,i){const o=e*this.size+t;this.data[o]=r,i&&(this.reservedBit[o]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},bg=n,bg}var Dg={},pI;function FU(){return pI||(pI=1,function(n){const e=xa().getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,o=e(r),l=o===145?26:Math.ceil((o-13)/(2*i-2))*2,c=[o-7];for(let h=1;h<i-1;h++)c[h]=c[h-1]-l;return c.push(6),c.reverse()},n.getPositions=function(r){const i=[],o=n.getRowColCoords(r),l=o.length;for(let c=0;c<l;c++)for(let h=0;h<l;h++)c===0&&h===0||c===0&&h===l-1||c===l-1&&h===0||i.push([o[c],o[h]]);return i}}(Dg)),Dg}var xg={},mI;function UU(){if(mI)return xg;mI=1;const n=xa().getSymbolSize,e=7;return xg.getPositions=function(r){const i=n(r);return[[0,0],[i-e,0],[0,i-e]]},xg}var Ng={},gI;function BU(){return gI||(gI=1,function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},n.from=function(i){return n.isValid(i)?parseInt(i,10):void 0},n.getPenaltyN1=function(i){const o=i.size;let l=0,c=0,h=0,p=null,g=null;for(let v=0;v<o;v++){c=h=0,p=g=null;for(let E=0;E<o;E++){let I=i.get(v,E);I===p?c++:(c>=5&&(l+=e.N1+(c-5)),p=I,c=1),I=i.get(E,v),I===g?h++:(h>=5&&(l+=e.N1+(h-5)),g=I,h=1)}c>=5&&(l+=e.N1+(c-5)),h>=5&&(l+=e.N1+(h-5))}return l},n.getPenaltyN2=function(i){const o=i.size;let l=0;for(let c=0;c<o-1;c++)for(let h=0;h<o-1;h++){const p=i.get(c,h)+i.get(c,h+1)+i.get(c+1,h)+i.get(c+1,h+1);(p===4||p===0)&&l++}return l*e.N2},n.getPenaltyN3=function(i){const o=i.size;let l=0,c=0,h=0;for(let p=0;p<o;p++){c=h=0;for(let g=0;g<o;g++)c=c<<1&2047|i.get(p,g),g>=10&&(c===1488||c===93)&&l++,h=h<<1&2047|i.get(g,p),g>=10&&(h===1488||h===93)&&l++}return l*e.N3},n.getPenaltyN4=function(i){let o=0;const l=i.data.length;for(let h=0;h<l;h++)o+=i.data[h];return Math.abs(Math.ceil(o*100/l/5)-10)*e.N4};function t(r,i,o){switch(r){case n.Patterns.PATTERN000:return(i+o)%2===0;case n.Patterns.PATTERN001:return i%2===0;case n.Patterns.PATTERN010:return o%3===0;case n.Patterns.PATTERN011:return(i+o)%3===0;case n.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case n.Patterns.PATTERN101:return i*o%2+i*o%3===0;case n.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case n.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(i,o){const l=o.size;for(let c=0;c<l;c++)for(let h=0;h<l;h++)o.isReserved(h,c)||o.xor(h,c,t(i,h,c))},n.getBestMask=function(i,o){const l=Object.keys(n.Patterns).length;let c=0,h=1/0;for(let p=0;p<l;p++){o(p),n.applyMask(p,i);const g=n.getPenaltyN1(i)+n.getPenaltyN2(i)+n.getPenaltyN3(i)+n.getPenaltyN4(i);n.applyMask(p,i),g<h&&(h=g,c=p)}return c}}(Ng)),Ng}var Ld={},yI;function TP(){if(yI)return Ld;yI=1;const n=Rv(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Ld.getBlocksCount=function(i,o){switch(o){case n.L:return e[(i-1)*4+0];case n.M:return e[(i-1)*4+1];case n.Q:return e[(i-1)*4+2];case n.H:return e[(i-1)*4+3];default:return}},Ld.getTotalCodewordsCount=function(i,o){switch(o){case n.L:return t[(i-1)*4+0];case n.M:return t[(i-1)*4+1];case n.Q:return t[(i-1)*4+2];case n.H:return t[(i-1)*4+3];default:return}},Ld}var Og={},rc={},_I;function jU(){if(_I)return rc;_I=1;const n=new Uint8Array(512),e=new Uint8Array(256);return function(){let r=1;for(let i=0;i<255;i++)n[i]=r,e[r]=i,r<<=1,r&256&&(r^=285);for(let i=255;i<512;i++)n[i]=n[i-255]}(),rc.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},rc.exp=function(r){return n[r]},rc.mul=function(r,i){return r===0||i===0?0:n[e[r]+e[i]]},rc}var vI;function zU(){return vI||(vI=1,function(n){const e=jU();n.mul=function(r,i){const o=new Uint8Array(r.length+i.length-1);for(let l=0;l<r.length;l++)for(let c=0;c<i.length;c++)o[l+c]^=e.mul(r[l],i[c]);return o},n.mod=function(r,i){let o=new Uint8Array(r);for(;o.length-i.length>=0;){const l=o[0];for(let h=0;h<i.length;h++)o[h]^=e.mul(i[h],l);let c=0;for(;c<o.length&&o[c]===0;)c++;o=o.slice(c)}return o},n.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let o=0;o<r;o++)i=n.mul(i,new Uint8Array([1,e.exp(o)]));return i}}(Og)),Og}var Vg,wI;function $U(){if(wI)return Vg;wI=1;const n=zU();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(r.length+this.degree);i.set(r);const o=n.mod(i,this.genPoly),l=this.degree-o.length;if(l>0){const c=new Uint8Array(this.degree);return c.set(o,l),c}return o},Vg=e,Vg}var Lg={},Mg={},Fg={},EI;function IP(){return EI||(EI=1,Fg.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Fg}var Si={},TI;function SP(){if(TI)return Si;TI=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;Si.KANJI=new RegExp(t,"g"),Si.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Si.BYTE=new RegExp(r,"g"),Si.NUMERIC=new RegExp(n,"g"),Si.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+t+"$"),o=new RegExp("^"+n+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Si.testKanji=function(h){return i.test(h)},Si.testNumeric=function(h){return o.test(h)},Si.testAlphanumeric=function(h){return l.test(h)},Si}var II;function Na(){return II||(II=1,function(n){const e=IP(),t=SP();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(o,l){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!e.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?o.ccBits[0]:l<27?o.ccBits[1]:o.ccBits[2]},n.getBestModeForData=function(o){return t.testNumeric(o)?n.NUMERIC:t.testAlphanumeric(o)?n.ALPHANUMERIC:t.testKanji(o)?n.KANJI:n.BYTE},n.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},n.isValid=function(o){return o&&o.bit&&o.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+i)}}n.from=function(o,l){if(n.isValid(o))return o;try{return r(o)}catch{return l}}}(Mg)),Mg}var SI;function qU(){return SI||(SI=1,function(n){const e=xa(),t=TP(),r=Rv(),i=Na(),o=IP(),l=7973,c=e.getBCHDigit(l);function h(E,I,D){for(let x=1;x<=40;x++)if(I<=n.getCapacity(x,D,E))return x}function p(E,I){return i.getCharCountIndicator(E,I)+4}function g(E,I){let D=0;return E.forEach(function(x){const V=p(x.mode,I);D+=V+x.getBitsLength()}),D}function v(E,I){for(let D=1;D<=40;D++)if(g(E,D)<=n.getCapacity(D,I,i.MIXED))return D}n.from=function(I,D){return o.isValid(I)?parseInt(I,10):D},n.getCapacity=function(I,D,x){if(!o.isValid(I))throw new Error("Invalid QR Code version");typeof x>"u"&&(x=i.BYTE);const V=e.getSymbolTotalCodewords(I),G=t.getTotalCodewordsCount(I,D),$=(V-G)*8;if(x===i.MIXED)return $;const j=$-p(x,I);switch(x){case i.NUMERIC:return Math.floor(j/10*3);case i.ALPHANUMERIC:return Math.floor(j/11*2);case i.KANJI:return Math.floor(j/13);case i.BYTE:default:return Math.floor(j/8)}},n.getBestVersionForData=function(I,D){let x;const V=r.from(D,r.M);if(Array.isArray(I)){if(I.length>1)return v(I,V);if(I.length===0)return 1;x=I[0]}else x=I;return h(x.mode,x.getLength(),V)},n.getEncodedBits=function(I){if(!o.isValid(I)||I<7)throw new Error("Invalid QR Code version");let D=I<<12;for(;e.getBCHDigit(D)-c>=0;)D^=l<<e.getBCHDigit(D)-c;return I<<12|D}}(Lg)),Lg}var Ug={},RI;function HU(){if(RI)return Ug;RI=1;const n=xa(),e=1335,t=21522,r=n.getBCHDigit(e);return Ug.getEncodedBits=function(o,l){const c=o.bit<<3|l;let h=c<<10;for(;n.getBCHDigit(h)-r>=0;)h^=e<<n.getBCHDigit(h)-r;return(c<<10|h)^t},Ug}var Bg={},jg,AI;function KU(){if(AI)return jg;AI=1;const n=Na();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let i,o,l;for(i=0;i+3<=this.data.length;i+=3)o=this.data.substr(i,3),l=parseInt(o,10),r.put(l,10);const c=this.data.length-i;c>0&&(o=this.data.substr(i),l=parseInt(o,10),r.put(l,c*3+1))},jg=e,jg}var zg,PI;function GU(){if(PI)return zg;PI=1;const n=Na(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(r){this.mode=n.ALPHANUMERIC,this.data=r}return t.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let o;for(o=0;o+2<=this.data.length;o+=2){let l=e.indexOf(this.data[o])*45;l+=e.indexOf(this.data[o+1]),i.put(l,11)}this.data.length%2&&i.put(e.indexOf(this.data[o]),6)},zg=t,zg}var $g,CI;function WU(){if(CI)return $g;CI=1;const n=Na();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let r=0,i=this.data.length;r<i;r++)t.put(this.data[r],8)},$g=e,$g}var qg,kI;function QU(){if(kI)return qg;kI=1;const n=Na(),e=xa();function t(r){this.mode=n.KANJI,this.data=r}return t.getBitsLength=function(i){return i*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let i;for(i=0;i<this.data.length;i++){let o=e.toSJIS(this.data[i]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),r.put(o,13)}},qg=t,qg}var Hg={exports:{}},bI;function YU(){return bI||(bI=1,function(n){var e={single_source_shortest_paths:function(t,r,i){var o={},l={};l[r]=0;var c=e.PriorityQueue.make();c.push(r,0);for(var h,p,g,v,E,I,D,x,V;!c.empty();){h=c.pop(),p=h.value,v=h.cost,E=t[p]||{};for(g in E)E.hasOwnProperty(g)&&(I=E[g],D=v+I,x=l[g],V=typeof l[g]>"u",(V||x>D)&&(l[g]=D,c.push(g,D),o[g]=p))}if(typeof i<"u"&&typeof l[i]>"u"){var G=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(G)}return o},extract_shortest_path_from_predecessor_list:function(t,r){for(var i=[],o=r;o;)i.push(o),t[o],o=t[o];return i.reverse(),i},find_path:function(t,r,i){var o=e.single_source_shortest_paths(t,r,i);return e.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,i={},o;t=t||{};for(o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);return i.queue=[],i.sorter=t.sorter||r.default_sorter,i},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var i={value:t,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e}(Hg)),Hg.exports}var DI;function JU(){return DI||(DI=1,function(n){const e=Na(),t=KU(),r=GU(),i=WU(),o=QU(),l=SP(),c=xa(),h=YU();function p(G){return unescape(encodeURIComponent(G)).length}function g(G,$,j){const H=[];let re;for(;(re=G.exec(j))!==null;)H.push({data:re[0],index:re.index,mode:$,length:re[0].length});return H}function v(G){const $=g(l.NUMERIC,e.NUMERIC,G),j=g(l.ALPHANUMERIC,e.ALPHANUMERIC,G);let H,re;return c.isKanjiModeEnabled()?(H=g(l.BYTE,e.BYTE,G),re=g(l.KANJI,e.KANJI,G)):(H=g(l.BYTE_KANJI,e.BYTE,G),re=[]),$.concat(j,H,re).sort(function(P,S){return P.index-S.index}).map(function(P){return{data:P.data,mode:P.mode,length:P.length}})}function E(G,$){switch($){case e.NUMERIC:return t.getBitsLength(G);case e.ALPHANUMERIC:return r.getBitsLength(G);case e.KANJI:return o.getBitsLength(G);case e.BYTE:return i.getBitsLength(G)}}function I(G){return G.reduce(function($,j){const H=$.length-1>=0?$[$.length-1]:null;return H&&H.mode===j.mode?($[$.length-1].data+=j.data,$):($.push(j),$)},[])}function D(G){const $=[];for(let j=0;j<G.length;j++){const H=G[j];switch(H.mode){case e.NUMERIC:$.push([H,{data:H.data,mode:e.ALPHANUMERIC,length:H.length},{data:H.data,mode:e.BYTE,length:H.length}]);break;case e.ALPHANUMERIC:$.push([H,{data:H.data,mode:e.BYTE,length:H.length}]);break;case e.KANJI:$.push([H,{data:H.data,mode:e.BYTE,length:p(H.data)}]);break;case e.BYTE:$.push([{data:H.data,mode:e.BYTE,length:p(H.data)}])}}return $}function x(G,$){const j={},H={start:{}};let re=["start"];for(let b=0;b<G.length;b++){const P=G[b],S=[];for(let R=0;R<P.length;R++){const k=P[R],N=""+b+R;S.push(N),j[N]={node:k,lastCount:0},H[N]={};for(let L=0;L<re.length;L++){const C=re[L];j[C]&&j[C].node.mode===k.mode?(H[C][N]=E(j[C].lastCount+k.length,k.mode)-E(j[C].lastCount,k.mode),j[C].lastCount+=k.length):(j[C]&&(j[C].lastCount=k.length),H[C][N]=E(k.length,k.mode)+4+e.getCharCountIndicator(k.mode,$))}}re=S}for(let b=0;b<re.length;b++)H[re[b]].end=0;return{map:H,table:j}}function V(G,$){let j;const H=e.getBestModeForData(G);if(j=e.from($,H),j!==e.BYTE&&j.bit<H.bit)throw new Error('"'+G+'" cannot be encoded with mode '+e.toString(j)+`.
 Suggested mode is: `+e.toString(H));switch(j===e.KANJI&&!c.isKanjiModeEnabled()&&(j=e.BYTE),j){case e.NUMERIC:return new t(G);case e.ALPHANUMERIC:return new r(G);case e.KANJI:return new o(G);case e.BYTE:return new i(G)}}n.fromArray=function($){return $.reduce(function(j,H){return typeof H=="string"?j.push(V(H,null)):H.data&&j.push(V(H.data,H.mode)),j},[])},n.fromString=function($,j){const H=v($,c.isKanjiModeEnabled()),re=D(H),b=x(re,j),P=h.find_path(b.map,"start","end"),S=[];for(let R=1;R<P.length-1;R++)S.push(b.table[P[R]].node);return n.fromArray(I(S))},n.rawSplit=function($){return n.fromArray(v($,c.isKanjiModeEnabled()))}}(Bg)),Bg}var xI;function XU(){if(xI)return Pg;xI=1;const n=xa(),e=Rv(),t=LU(),r=MU(),i=FU(),o=UU(),l=BU(),c=TP(),h=$U(),p=qU(),g=HU(),v=Na(),E=JU();function I(b,P){const S=b.size,R=o.getPositions(P);for(let k=0;k<R.length;k++){const N=R[k][0],L=R[k][1];for(let C=-1;C<=7;C++)if(!(N+C<=-1||S<=N+C))for(let pe=-1;pe<=7;pe++)L+pe<=-1||S<=L+pe||(C>=0&&C<=6&&(pe===0||pe===6)||pe>=0&&pe<=6&&(C===0||C===6)||C>=2&&C<=4&&pe>=2&&pe<=4?b.set(N+C,L+pe,!0,!0):b.set(N+C,L+pe,!1,!0))}}function D(b){const P=b.size;for(let S=8;S<P-8;S++){const R=S%2===0;b.set(S,6,R,!0),b.set(6,S,R,!0)}}function x(b,P){const S=i.getPositions(P);for(let R=0;R<S.length;R++){const k=S[R][0],N=S[R][1];for(let L=-2;L<=2;L++)for(let C=-2;C<=2;C++)L===-2||L===2||C===-2||C===2||L===0&&C===0?b.set(k+L,N+C,!0,!0):b.set(k+L,N+C,!1,!0)}}function V(b,P){const S=b.size,R=p.getEncodedBits(P);let k,N,L;for(let C=0;C<18;C++)k=Math.floor(C/3),N=C%3+S-8-3,L=(R>>C&1)===1,b.set(k,N,L,!0),b.set(N,k,L,!0)}function G(b,P,S){const R=b.size,k=g.getEncodedBits(P,S);let N,L;for(N=0;N<15;N++)L=(k>>N&1)===1,N<6?b.set(N,8,L,!0):N<8?b.set(N+1,8,L,!0):b.set(R-15+N,8,L,!0),N<8?b.set(8,R-N-1,L,!0):N<9?b.set(8,15-N-1+1,L,!0):b.set(8,15-N-1,L,!0);b.set(R-8,8,1,!0)}function $(b,P){const S=b.size;let R=-1,k=S-1,N=7,L=0;for(let C=S-1;C>0;C-=2)for(C===6&&C--;;){for(let pe=0;pe<2;pe++)if(!b.isReserved(k,C-pe)){let st=!1;L<P.length&&(st=(P[L]>>>N&1)===1),b.set(k,C-pe,st),N--,N===-1&&(L++,N=7)}if(k+=R,k<0||S<=k){k-=R,R=-R;break}}}function j(b,P,S){const R=new t;S.forEach(function(pe){R.put(pe.mode.bit,4),R.put(pe.getLength(),v.getCharCountIndicator(pe.mode,b)),pe.write(R)});const k=n.getSymbolTotalCodewords(b),N=c.getTotalCodewordsCount(b,P),L=(k-N)*8;for(R.getLengthInBits()+4<=L&&R.put(0,4);R.getLengthInBits()%8!==0;)R.putBit(0);const C=(L-R.getLengthInBits())/8;for(let pe=0;pe<C;pe++)R.put(pe%2?17:236,8);return H(R,b,P)}function H(b,P,S){const R=n.getSymbolTotalCodewords(P),k=c.getTotalCodewordsCount(P,S),N=R-k,L=c.getBlocksCount(P,S),C=R%L,pe=L-C,st=Math.floor(R/L),yt=Math.floor(N/L),Le=yt+1,ce=st-yt,_e=new h(ce);let de=0;const B=new Array(L),te=new Array(L);let we=0;const Oe=new Uint8Array(b.buffer);for(let Ge=0;Ge<L;Ge++){const St=Ge<pe?yt:Le;B[Ge]=Oe.slice(de,de+St),te[Ge]=_e.encode(B[Ge]),de+=St,we=Math.max(we,St)}const Ve=new Uint8Array(R);let Be=0,je,$e;for(je=0;je<we;je++)for($e=0;$e<L;$e++)je<B[$e].length&&(Ve[Be++]=B[$e][je]);for(je=0;je<ce;je++)for($e=0;$e<L;$e++)Ve[Be++]=te[$e][je];return Ve}function re(b,P,S,R){let k;if(Array.isArray(b))k=E.fromArray(b);else if(typeof b=="string"){let st=P;if(!st){const yt=E.rawSplit(b);st=p.getBestVersionForData(yt,S)}k=E.fromString(b,st||40)}else throw new Error("Invalid data");const N=p.getBestVersionForData(k,S);if(!N)throw new Error("The amount of data is too big to be stored in a QR Code");if(!P)P=N;else if(P<N)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+N+`.
`);const L=j(P,S,k),C=n.getSymbolSize(P),pe=new r(C);return I(pe,P),D(pe),x(pe,P),G(pe,S,0),P>=7&&V(pe,P),$(pe,L),isNaN(R)&&(R=l.getBestMask(pe,G.bind(null,pe,S))),l.applyMask(R,pe),G(pe,S,R),{modules:pe,version:P,errorCorrectionLevel:S,maskPattern:R,segments:k}}return Pg.create=function(P,S){if(typeof P>"u"||P==="")throw new Error("No input text");let R=e.M,k,N;return typeof S<"u"&&(R=e.from(S.errorCorrectionLevel,e.M),k=p.from(S.version),N=l.from(S.maskPattern),S.toSJISFunc&&n.setToSJISFunction(S.toSJISFunc)),re(P,k,R,N)},Pg}var Kg={},Gg={},NI;function RP(){return NI||(NI=1,function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(o){return[o,o]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,o=r.width&&r.width>=21?r.width:void 0,l=r.scale||4;return{width:o,scale:o?4:l,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},n.getImageWidth=function(r,i){const o=n.getScale(r,i);return Math.floor((r+i.margin*2)*o)},n.qrToImageData=function(r,i,o){const l=i.modules.size,c=i.modules.data,h=n.getScale(l,o),p=Math.floor((l+o.margin*2)*h),g=o.margin*h,v=[o.color.light,o.color.dark];for(let E=0;E<p;E++)for(let I=0;I<p;I++){let D=(E*p+I)*4,x=o.color.light;if(E>=g&&I>=g&&E<p-g&&I<p-g){const V=Math.floor((E-g)/h),G=Math.floor((I-g)/h);x=v[c[V*l+G]?1:0]}r[D++]=x.r,r[D++]=x.g,r[D++]=x.b,r[D]=x.a}}}(Gg)),Gg}var OI;function ZU(){return OI||(OI=1,function(n){const e=RP();function t(i,o,l){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=l,o.width=l,o.style.height=l+"px",o.style.width=l+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(o,l,c){let h=c,p=l;typeof h>"u"&&(!l||!l.getContext)&&(h=l,l=void 0),l||(p=r()),h=e.getOptions(h);const g=e.getImageWidth(o.modules.size,h),v=p.getContext("2d"),E=v.createImageData(g,g);return e.qrToImageData(E.data,o,h),t(v,p,g),v.putImageData(E,0,0),p},n.renderToDataURL=function(o,l,c){let h=c;typeof h>"u"&&(!l||!l.getContext)&&(h=l,l=void 0),h||(h={});const p=n.render(o,l,h),g=h.type||"image/png",v=h.rendererOpts||{};return p.toDataURL(g,v.quality)}}(Kg)),Kg}var Wg={},VI;function e4(){if(VI)return Wg;VI=1;const n=RP();function e(i,o){const l=i.a/255,c=o+'="'+i.hex+'"';return l<1?c+" "+o+'-opacity="'+l.toFixed(2).slice(1)+'"':c}function t(i,o,l){let c=i+o;return typeof l<"u"&&(c+=" "+l),c}function r(i,o,l){let c="",h=0,p=!1,g=0;for(let v=0;v<i.length;v++){const E=Math.floor(v%o),I=Math.floor(v/o);!E&&!p&&(p=!0),i[v]?(g++,v>0&&E>0&&i[v-1]||(c+=p?t("M",E+l,.5+I+l):t("m",h,0),h=0,p=!1),E+1<o&&i[v+1]||(c+=t("h",g),g=0)):h++}return c}return Wg.render=function(o,l,c){const h=n.getOptions(l),p=o.modules.size,g=o.modules.data,v=p+h.margin*2,E=h.color.light.a?"<path "+e(h.color.light,"fill")+' d="M0 0h'+v+"v"+v+'H0z"/>':"",I="<path "+e(h.color.dark,"stroke")+' d="'+r(g,p,h.margin)+'"/>',D='viewBox="0 0 '+v+" "+v+'"',V='<svg xmlns="http://www.w3.org/2000/svg" '+(h.width?'width="'+h.width+'" height="'+h.width+'" ':"")+D+' shape-rendering="crispEdges">'+E+I+`</svg>
`;return typeof c=="function"&&c(null,V),V},Wg}var LI;function t4(){if(LI)return El;LI=1;const n=VU(),e=XU(),t=ZU(),r=e4();function i(o,l,c,h,p){const g=[].slice.call(arguments,1),v=g.length,E=typeof g[v-1]=="function";if(!E&&!n())throw new Error("Callback required as last argument");if(E){if(v<2)throw new Error("Too few arguments provided");v===2?(p=c,c=l,l=h=void 0):v===3&&(l.getContext&&typeof p>"u"?(p=h,h=void 0):(p=h,h=c,c=l,l=void 0))}else{if(v<1)throw new Error("Too few arguments provided");return v===1?(c=l,l=h=void 0):v===2&&!l.getContext&&(h=c,c=l,l=void 0),new Promise(function(I,D){try{const x=e.create(c,h);I(o(x,l,h))}catch(x){D(x)}})}try{const I=e.create(c,h);p(null,o(I,l,h))}catch(I){p(I)}}return El.create=e.create,El.toCanvas=i.bind(null,t.render),El.toDataURL=i.bind(null,t.renderToDataURL),El.toString=i.bind(null,function(o,l,c){return r.render(o,c)}),El}var n4=t4();const r4=Ra(n4),MI=async n=>{if(!n||typeof n!="string")throw new Error("Invalid QR code content");if(n.length<10)throw new Error("QR code content too short");try{const e=await r4.toDataURL(n,{width:800,margin:6,errorCorrectionLevel:"H",color:{dark:"#000000FF",light:"#FFFFFFFF"},rendererOpts:{quality:1}});if(!e.startsWith("data:image/png;base64,"))throw new Error("Invalid QR code generation result");return e}catch(e){throw console.error("Error generating QR code:",e),new Error("Failed to generate QR code")}},i4={createEvent:async n=>{try{const e={...n,price:Number(n.price)||0,totalTickets:Number(n.totalTickets)||0,availableTickets:Number(n.totalTickets)||0,soldTickets:0,createdAt:mc()};return{id:(await p1(lI,e)).id,...e}}catch(e){throw console.error("Error creating event:",e),e}},getEvents:async()=>{try{return(await qc(lI)).docs.map(e=>({id:e.id,...e.data(),availableTickets:e.data().availableTickets||0,soldTickets:e.data().soldTickets||0}))}catch(n){throw console.error("Error fetching events:",n),n}},deleteEvent:async n=>{try{const e=Lt(Et,"events",n);await Zd(e)}catch(e){throw console.error("Error deleting event:",e),e}},updateTicketCount:async(n,e)=>{const t=Lt(Et,"events",n);try{await ef(Et,async r=>{const i=await r.get(t);if(!i.exists())throw new Error("Event not found");const o=i.data(),l=o.availableTickets||0,c=o.soldTickets||0,h=o.totalTickets||0,p=l-e,g=c+e;if(p<0||g>h)throw new Error("Invalid ticket count update");r.update(t,{...o,availableTickets:p,soldTickets:g,lastUpdated:mc()})})}catch(r){throw console.error("Error updating ticket count:",r),r}},updateTicketCountBulk:async(n,e)=>{const t=Lt(Et,"events",n);await ef(Et,async r=>{const i=await r.get(t);if(!i.exists())throw new Error("Event does not exist!");const o=i.data(),l=o.availableTickets??o.totalTickets??0,c=o.soldTickets??0;if(l<e)throw new Error(`Only ${l} tickets available`);r.update(t,{availableTickets:l-e,soldTickets:c+e,lastUpdated:mc()})})},checkTicketAvailability:async(n,e)=>{const t=Lt(Et,"events",n),r=await xi(t);if(!r.exists())throw new Error("Event does not exist");const i=r.data();return(i.availableTickets??i.totalTickets??0)>=e},subscribeToTicketCount:(n,e)=>{const t=Lt(Et,"events",n);return m1(t,r=>{if(r.exists()){const i=r.data();e(i.availableTickets||0,i.soldTickets||0)}})},lockTickets:async(n,e)=>{const t=Lt(Et,"events",n);try{await ef(Et,async r=>{const i=await r.get(t);if(!i.exists())throw new Error("Event not found");const o=i.data(),l=o.availableTickets||0,c=o.soldTickets||0,h=o.totalTickets||0;if(l<e)throw new Error(`Only ${l} tickets available`);const p=l-e,g=c+e;if(p<0||g>h)throw new Error("Invalid ticket count update");r.update(t,{...o,availableTickets:p,soldTickets:g,lastUpdated:mc()})})}catch(r){throw console.error("Error in lockTickets:",r),r}}},s4={async createTicket(n){try{const e=Lt(vr,"events",n.eventId),t=await xi(e);if(!t.exists())throw new Error("Event not found");const r=t.data();if((r.availableTickets||0)<n.quantity)throw new Error(`Only ${r.availableTickets} tickets available`);const i={...n,status:"valid",validationsRemaining:n.quantity,usedCount:0,validations:[],purchasedAt:new Date().toISOString()},o=await p1(Di(vr,"tickets"),i),l={ticketId:o.id,eventId:n.eventId,eventDetails:{title:n.eventDetails.title,date:n.eventDetails.date,location:n.eventDetails.location},ticketNumber:n.ticketNumber,quantity:n.quantity,validationsRemaining:n.quantity,verificationCode:n.verificationCode,purchasedAt:i.purchasedAt,status:"valid"},c=await MI(JSON.stringify(l));if(!c)throw new Error("Failed to generate QR code");return await Sc(o,{qrCode:c}),await i4.updateTicketCount(n.eventId,n.quantity),{id:o.id,...i,qrCode:c}}catch(e){throw console.error("Error creating ticket:",e),e}},async getTicket(n){console.log("Fetching ticket:",n);try{const e=await xi(e(vr,"tickets",n));return e.exists?(console.log("Ticket data:",e.data()),this.transformTicketData(e.id,e.data())):(console.warn("Ticket not found:",n),null)}catch(e){throw console.error("Ticket fetch error:",e),new Error("Failed to retrieve ticket")}},async getTicketsByUserId(n){try{const e=jy(Di(vr,"tickets"),c1("userId","==",n));return(await qc(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error fetching user tickets:",e),new Error("Failed to fetch user tickets")}},async validateTicket(n){return ef(vr,async e=>{var g,v;const t=Lt(vr,"tickets",n),r=await e.get(t);if(!r.exists())throw new Error("Ticket not found");const i=this.transformTicketData(r.id,r.data());if(i.status!=="valid")throw new Error("Ticket is no longer valid");if(i.validationsRemaining<=0)throw new Error("No validations remaining");const o=i.validationsRemaining-1,l=i.usedCount+1,c=o===0?"used":"valid",h={timestamp:new Date().toISOString(),validatedBy:((g=Lf.currentUser)==null?void 0:g.uid)||"system",validatedByEmail:((v=Lf.currentUser)==null?void 0:v.email)||"system"},p={validationsRemaining:o,usedCount:l,status:c,lastValidatedAt:mc(),validations:[...i.validations,h]};return e.update(t,p),{success:!0,message:"Validation successful",validationsRemaining:o,usedCount:l,status:c}})},async getValidationHistory(n){try{const e=await xi(Lt(vr,"tickets",n));if(!e.exists())throw new Error("Ticket not found");return e.data().validations||[]}catch(e){throw console.error("Error getting validation history:",e),e}},async getAllTickets(){return(await qc(Di(vr,"tickets"))).docs.map(e=>({id:e.id,...e.data()}))},async cancelTicket(n){const e=Lt(vr,"tickets",n);await Sc(e,{status:"cancelled",cancelledAt:new Date().toISOString()})},subscribeToTicketUpdates(n,e){return m1(Lt(vr,"tickets",n),r=>{if(r.exists()){const i=this.transformTicketData(r.id,r.data());e(i)}},r=>{throw new Error("Failed to subscribe to ticket updates")})},transformTicketData(n,e){var r,i,o,l;if(!e)throw new Error("Invalid ticket data");return{id:n,eventId:e.eventId,userId:e.userId,userEmail:e.userEmail,eventDetails:e.eventDetails,ticketNumber:e.ticketNumber,quantity:e.quantity||0,validationsRemaining:e.validationsRemaining||0,usedCount:e.usedCount||0,status:e.status||"valid",purchasedAt:((i=(r=e.purchasedAt)==null?void 0:r.toDate)==null?void 0:i.call(r))||e.purchasedAt,lastValidatedAt:((l=(o=e.lastValidatedAt)==null?void 0:o.toDate)==null?void 0:l.call(o))||e.lastValidatedAt,amountPaid:e.amountPaid,paymentMode:e.paymentMode,transactionId:e.transactionId,qrCode:e.qrCode||null,validations:e.validations||[],verificationCode:e.verificationCode}},async generateTicketQR(n){try{const e=JSON.stringify({t:n.id,v:n.verificationCode,ts:Date.now()});console.log("Generating QR with data:",e);const t=await MI(e);if(!t)throw new Error("QR generation failed");return await Sc(Lt(vr,"tickets",n.id),{qrCode:t}),t}catch(e){throw console.error("Error generating QR:",e),e}}},ic={async goOnline(){try{await _V(Et)}catch(n){console.error("Error enabling network:",n)}},async goOffline(){try{await vV(Et)}catch(n){console.error("Error disabling network:",n)}},async createUserData(n,e){try{const t={uid:n,email:e||"",role:"user",createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()},r=Lt(Et,"users",n);return await Pf(r,t,{merge:!0}),t}catch(t){if(console.error("Error creating user data:",t),t instanceof Error&&t.message.includes("offline"))return localStorage.setItem(`userData_${n}`,JSON.stringify(userData)),userData;throw t}},async getUserData(n){try{const e=Lt(Et,"users",n),t=await xi(e);return t.exists()?{...t.data(),uid:t.id}:null}catch(e){if(console.error("Error getting user data:",e),e instanceof Error&&e.message.includes("offline")){const t=localStorage.getItem(`userData_${n}`);return t?JSON.parse(t):null}return null}},async updateUserRole(n,e){try{const t=Lt(Et,"users",n);await Sc(t,{role:e,lastLogin:new Date().toISOString()})}catch(t){throw console.error("Error updating user role:",t),new Error("Failed to update user role")}},async getAllUsers(n){try{const e=Di(Et,"users"),t=jy(e);let i=(await qc(t)).docs.map(o=>({...o.data(),uid:o.id}));if(n){const o=n.toLowerCase().trim();i=i.filter(l=>{var g,v,E;const c=((g=l.email)==null?void 0:g.toLowerCase())||"",h=((v=l.uid)==null?void 0:v.toLowerCase())||"",p=((E=l.role)==null?void 0:E.toLowerCase())||"";return c.includes(o)||h.includes(o)||p.includes(o)})}return i.sort((o,l)=>(o.email||"").localeCompare(l.email||""))}catch(e){throw console.error("Error getting all users:",e),new Error("Failed to get users")}},async updateLastLogin(n){try{const e=Lt(Et,"users",n);await Sc(e,{lastLogin:new Date().toISOString()})}catch(e){throw console.error("Error updating last login:",e),new Error("Failed to update last login")}},async deleteUser(n){try{if(!n)throw new Error("User ID is required");const e=Lt(Et,"users",n),t=await xi(e);if(!t.exists())throw new Error("User not found");const r=t.data();if(r.role==="admin")throw new Error("Cannot delete admin users");let i=[];try{if(i=await s4.getTicketsByUserId(n),i.length>0&&i.filter(v=>v.status==="valid"||v.status==="partially_used").length>0)throw new Error("Cannot delete user with active tickets. Please cancel or validate all tickets first.")}catch(g){console.warn("Error checking user tickets:",g)}const o=CU(bU,"deleteUser");let l=!1,c=0;const h=3;let p=null;for(;!l&&c<h;)try{console.log(`Attempting to delete auth user (attempt ${c+1}/${h})...`);const g=await o({uid:n}),{data:v}=g;if(v.success)l=!0,console.log("Successfully deleted auth user");else throw new Error(v.message||"Failed to delete auth user")}catch(g){if(c++,p=g,console.error(`Auth deletion attempt ${c} failed:`,g),g.code==="functions/internal"){console.warn("Internal error in auth deletion, proceeding with data deletion...");break}c<h&&await new Promise(v=>setTimeout(v,Math.min(1e3*Math.pow(2,c),1e4)))}if(!l){const g=p==null?void 0:p.code;if(!(g==="functions/internal"||g==="functions/not-found"||g==="functions/already-exists"||g==="functions/permission-denied"))throw new Error("Failed to delete user authentication. Please try again later or contact support.");console.warn("Auth deletion failed but proceeding with data deletion due to error type:",g)}if(r.photoURL)try{const g=oU(DU,`profilePhotos/${n}`);await sU(g),console.log("Successfully deleted user profile photo")}catch(g){console.warn("No profile photo found or error deleting it:",g)}try{await Promise.all(i.map(g=>Zd(Lt(Et,"tickets",g.id)))),console.log(`Successfully deleted ${i.length} tickets`)}catch(g){console.warn("Error deleting user tickets:",g)}try{const g=jy(Di(Et,"messages"),c1("userId","==",n)),v=await qc(g);await Promise.all(v.docs.map(E=>Zd(E.ref))),console.log(`Successfully deleted ${v.size} messages`)}catch(g){console.warn("Error deleting user messages:",g)}return await Zd(e),console.log("Successfully deleted user document from Firestore"),l?{success:!0,partialDeletion:!1,message:"User and all associated data successfully deleted"}:(p==null?void 0:p.code)==="functions/internal"?{success:!0,partialDeletion:!0,message:"User data has been deleted. The authentication record will be cleaned up automatically within 24 hours."}:{success:!0,partialDeletion:!0,message:"User data deleted but there might be issues with authentication. The user may need to be removed from authentication separately."}}catch(e){throw console.error("Error deleting user:",{code:e.code,message:e.message,details:e.details,stack:e.stack}),e.name==="FirebaseError"&&e.code.startsWith("firestore/")?new Error("Failed to delete user data. Please try again."):e instanceof Error?e:new Error("An unexpected error occurred while deleting the user")}},async sendPasswordResetEmail(n){try{await NL(Lf,n)}catch(e){throw console.error("Error sending password reset email:",e),e}},async getUserById(n){try{const e=Lt(Et,"users",n),t=await xi(e);return t.exists()?{...t.data(),uid:t.id}:null}catch(e){throw console.error("Error getting user by ID:",e),new Error("Failed to get user data")}}},AP=X.createContext({currentUser:null,userData:null,loading:!0,isAdmin:!1,isOffline:!navigator.onLine}),ph=()=>X.useContext(AP);ZA();const o4=({children:n})=>{const[e,t]=X.useState(null),[r,i]=X.useState(null),[o,l]=X.useState(!0),[c,h]=X.useState(null),[p,g]=X.useState(navigator.onLine),[v,E]=X.useState(!navigator.onLine);X.useEffect(()=>{const D=()=>{g(!0),E(!1),ic.goOnline()},x=()=>{g(!1),E(!0),ic.goOffline()};return window.addEventListener("online",D),window.addEventListener("offline",x),()=>{window.removeEventListener("online",D),window.removeEventListener("offline",x)}},[]),X.useEffect(()=>{const D=ML(Lf,async x=>{try{if(t(x),x){let V=await ic.getUserData(x.uid);if(V)localStorage.setItem(`userData_${x.uid}`,JSON.stringify(V)),p&&await ic.updateLastLogin(x.uid);else{if(!p)throw new Error("Cannot create new user while offline");V=await ic.createUserData(x.uid,x.email||"")}i(V)}else i(null),localStorage.removeItem("userData")}catch(V){console.error("Auth state change error:",V),h(V instanceof Error?V.message:"An error occurred")}finally{l(!1)}});return()=>D()},[p]),c&&console.error("Authentication error:",c);const I=(r==null?void 0:r.role)==="admin";return le.jsx(AP.Provider,{value:{currentUser:e,userData:r,loading:o,isAdmin:I,isOffline:v},children:!o&&n})},Qg="app_theme_preference",PP=X.createContext(void 0),a4=({children:n})=>{const{currentUser:e}=ph(),[t,r]=X.useState(()=>{const c=localStorage.getItem(Qg);return c==="light"||c==="dark"?c:"light"}),[i,o]=X.useState(!0);X.useEffect(()=>{(async()=>{if(!e){o(!1);return}try{const h=Lt(Et,"userSettings",e.uid),p=await xi(h);if(p.exists()){const g=p.data();(g.theme==="dark"||g.theme==="light")&&(r(g.theme),localStorage.setItem(Qg,g.theme))}else await Pf(h,{theme:t,createdAt:new Date,updatedAt:new Date})}catch(h){console.error("Error loading theme preference:",h)}finally{o(!1)}})()},[e,t]);const l=async c=>{if(localStorage.setItem(Qg,c),r(c),e)try{const h=Lt(Et,"userSettings",e.uid);await Pf(h,{theme:c,updatedAt:new Date},{merge:!0})}catch(h){throw console.error("Error updating theme preference:",h),h}};return X.useEffect(()=>{document.documentElement.setAttribute("data-theme",t)},[t]),le.jsx(PP.Provider,{value:{theme:t,setTheme:l,isLoading:i},children:n})},tj=()=>{const n=X.useContext(PP);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},CP=X.createContext(void 0),l4=({children:n})=>{const[e,t]=X.useState(""),{currentUser:r}=ph();return X.useEffect(()=>{(async()=>{if(r!=null&&r.uid){const o=await xi(Lt(Et,"users",r.uid));o.exists()&&o.data().profilePhoto&&t(o.data().profilePhoto)}})()},[r]),le.jsx(CP.Provider,{value:{profileImage:e,setProfileImage:t},children:n})},nj=()=>{const n=X.useContext(CP);if(n===void 0)throw new Error("useProfile must be used within a ProfileProvider");return n},u4=[{id:"deepseek-chat",name:"Deepseek Chat",provider:"deepseek",model:"deepseek-chat"},{id:"gemini-pro",name:"Google Gemini Pro",provider:"google",model:"gemini-pro"}],kP=X.createContext(void 0),c4=({children:n})=>{const[e,t]=X.useState(u4[0]),[r,i]=X.useState(!1);X.useEffect(()=>{async function l(){const c=Lt(Et,"settings","ai"),h=await xi(c);h.exists()&&h.data().selectedModel&&t(h.data().selectedModel)}l()},[]);const o=async l=>{t(l);const c=Lt(Et,"settings","ai");await Pf(c,{selectedModel:l},{merge:!0})};return le.jsx(kP.Provider,{value:{selectedModel:e,setSelectedModel:o,isModelDropdownOpen:r,setIsModelDropdownOpen:i},children:n})},rj=()=>{const n=X.useContext(kP);if(n===void 0)throw new Error("useAI must be used within an AIProvider");return n},h4="modulepreload",d4=function(n){return"/"+n},FI={},It=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(t.map(h=>{if(h=d4(h),h in FI)return;FI[h]=!0;const p=h.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":h4,p||(v.as="script"),v.crossOrigin="",v.href=h,c&&v.setAttribute("nonce",c),document.head.appendChild(v),p)return new Promise((E,I)=>{v.addEventListener("load",E),v.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return i.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};var bP=cS();const f4=Ra(bP),p4=uS({__proto__:null,default:f4},[bP]);/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bt(){return Bt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bt.apply(this,arguments)}var on;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(on||(on={}));const UI="popstate";function m4(n){n===void 0&&(n={});function e(r,i){let{pathname:o,search:l,hash:c}=r.location;return Gc("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Sa(i)}return y4(e,t,null,n)}function Ye(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function iu(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function g4(){return Math.random().toString(36).substr(2,8)}function BI(n,e){return{usr:n.state,key:n.key,idx:e}}function Gc(n,e,t,r){return t===void 0&&(t=null),Bt({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ro(e):e,{state:t,key:e&&e.key||r||g4()})}function Sa(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ro(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function y4(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,c=on.Pop,h=null,p=g();p==null&&(p=0,l.replaceState(Bt({},l.state,{idx:p}),""));function g(){return(l.state||{idx:null}).idx}function v(){c=on.Pop;let V=g(),G=V==null?null:V-p;p=V,h&&h({action:c,location:x.location,delta:G})}function E(V,G){c=on.Push;let $=Gc(x.location,V,G);p=g()+1;let j=BI($,p),H=x.createHref($);try{l.pushState(j,"",H)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;i.location.assign(H)}o&&h&&h({action:c,location:x.location,delta:1})}function I(V,G){c=on.Replace;let $=Gc(x.location,V,G);p=g();let j=BI($,p),H=x.createHref($);l.replaceState(j,"",H),o&&h&&h({action:c,location:x.location,delta:0})}function D(V){let G=i.location.origin!=="null"?i.location.origin:i.location.href,$=typeof V=="string"?V:Sa(V);return $=$.replace(/ $/,"%20"),Ye(G,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,G)}let x={get action(){return c},get location(){return n(i,l)},listen(V){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(UI,v),h=V,()=>{i.removeEventListener(UI,v),h=null}},createHref(V){return e(i,V)},createURL:D,encodeLocation(V){let G=D(V);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:E,replace:I,go(V){return l.go(V)}};return x}var At;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(At||(At={}));const _4=new Set(["lazy","caseSensitive","path","id","index","children"]);function v4(n){return n.index===!0}function Mf(n,e,t,r){return t===void 0&&(t=[]),r===void 0&&(r={}),n.map((i,o)=>{let l=[...t,String(o)],c=typeof i.id=="string"?i.id:l.join("-");if(Ye(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ye(!r[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),v4(i)){let h=Bt({},i,e(i),{id:c});return r[c]=h,h}else{let h=Bt({},i,e(i),{id:c,children:void 0});return r[c]=h,i.children&&(h.children=Mf(i.children,e,l,r)),h}})}function ia(n,e,t){return t===void 0&&(t="/"),of(n,e,t,!1)}function of(n,e,t,r){let i=typeof e=="string"?Ro(e):e,o=mu(i.pathname||"/",t);if(o==null)return null;let l=DP(n);E4(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let p=x4(o);c=b4(l[h],p,r)}return c}function w4(n,e){let{route:t,pathname:r,params:i}=n;return{id:t.id,pathname:r,params:i,data:e[t.id],handle:t.handle}}function DP(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(o,l,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(Ye(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let p=cs([r,h.relativePath]),g=t.concat(h);o.children&&o.children.length>0&&(Ye(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),DP(o.children,e,g,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:C4(p,o.index),routesMeta:g})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let h of xP(o.path))i(o,l,h)}),e}function xP(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=xP(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),i&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function E4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:k4(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const T4=/^:[\w-]+$/,I4=3,S4=2,R4=1,A4=10,P4=-2,jI=n=>n==="*";function C4(n,e){let t=n.split("/"),r=t.length;return t.some(jI)&&(r+=P4),e&&(r+=S4),t.filter(i=>!jI(i)).reduce((i,o)=>i+(T4.test(o)?I4:o===""?R4:A4),r)}function k4(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function b4(n,e,t){t===void 0&&(t=!1);let{routesMeta:r}=n,i={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],p=c===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=zI({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},g),E=h.route;if(!v&&p&&t&&!r[r.length-1].route.index&&(v=zI({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!v)return null;Object.assign(i,v.params),l.push({params:i,pathname:cs([o,v.pathname]),pathnameBase:V4(cs([o,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(o=cs([o,v.pathnameBase]))}return l}function zI(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=D4(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((p,g,v)=>{let{paramName:E,isOptional:I}=g;if(E==="*"){let x=c[v]||"";l=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const D=c[v];return I&&!D?p[E]=void 0:p[E]=(D||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:n}}function D4(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),iu(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function x4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return iu(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function mu(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function N4(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ro(n):n;return{pathname:t?t.startsWith("/")?t:O4(t,e):e,search:L4(r),hash:M4(i)}}function O4(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Yg(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NP(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function wp(n,e){let t=NP(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Ep(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Ro(n):(i=Bt({},n),Ye(!i.pathname||!i.pathname.includes("?"),Yg("?","pathname","search",i)),Ye(!i.pathname||!i.pathname.includes("#"),Yg("#","pathname","hash",i)),Ye(!i.search||!i.search.includes("#"),Yg("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=t;else{let v=e.length-1;if(!r&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),v-=1;i.pathname=E.join("/")}c=v>=0?e[v]:"/"}let h=N4(i,c),p=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||g)&&(h.pathname+="/"),h}const cs=n=>n.join("/").replace(/\/\/+/g,"/"),V4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),L4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,M4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class Ff{constructor(e,t,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=t||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Tp(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const OP=["post","put","patch","delete"],F4=new Set(OP),U4=["get",...OP],B4=new Set(U4),j4=new Set([301,302,303,307,308]),z4=new Set([307,308]),Jg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$4={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},sc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Av=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q4=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),VP="remix-router-transitions";function H4(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!t;Ye(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(n.mapRouteProperties)i=n.mapRouteProperties;else if(n.detectErrorBoundary){let M=n.detectErrorBoundary;i=z=>({hasErrorBoundary:M(z)})}else i=q4;let o={},l=Mf(n.routes,i,void 0,o),c,h=n.basename||"/",p=n.dataStrategy||Q4,g=n.patchRoutesOnNavigation,v=Bt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),E=null,I=new Set,D=null,x=null,V=null,G=n.hydrationData!=null,$=ia(l,n.history.location,h),j=null;if($==null&&!g){let M=sr(404,{pathname:n.history.location.pathname}),{matches:z,route:Y}=ZI(l);$=z,j={[Y.id]:M}}$&&!n.hydrationData&&Dr($,l,n.history.location.pathname).active&&($=null);let H;if($)if($.some(M=>M.route.lazy))H=!1;else if(!$.some(M=>M.route.loader))H=!0;else if(v.v7_partialHydration){let M=n.hydrationData?n.hydrationData.loaderData:null,z=n.hydrationData?n.hydrationData.errors:null;if(z){let Y=$.findIndex(ne=>z[ne.route.id]!==void 0);H=$.slice(0,Y+1).every(ne=>!Qy(ne.route,M,z))}else H=$.every(Y=>!Qy(Y.route,M,z))}else H=n.hydrationData!=null;else if(H=!1,$=[],v.v7_partialHydration){let M=Dr(null,l,n.history.location.pathname);M.active&&M.matches&&($=M.matches)}let re,b={historyAction:n.history.action,location:n.history.location,matches:$,initialized:H,navigation:Jg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||j,fetchers:new Map,blockers:new Map},P=on.Pop,S=!1,R,k=!1,N=new Map,L=null,C=!1,pe=!1,st=[],yt=new Set,Le=new Map,ce=0,_e=-1,de=new Map,B=new Set,te=new Map,we=new Map,Oe=new Set,Ve=new Map,Be=new Map,je;function $e(){if(E=n.history.listen(M=>{let{action:z,location:Y,delta:ne}=M;if(je){je(),je=void 0;return}iu(Be.size===0||ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ge=Bi({currentLocation:b.location,nextLocation:Y,historyAction:z});if(ge&&ne!=null){let Pe=new Promise(Ne=>{je=Ne});n.history.go(ne*-1),Cr(ge,{state:"blocked",location:Y,proceed(){Cr(ge,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),Pe.then(()=>n.history.go(ne))},reset(){let Ne=new Map(b.blockers);Ne.set(ge,sc),pt({blockers:Ne})}});return}return Kn(z,Y)}),t){uB(e,N);let M=()=>cB(e,N);e.addEventListener("pagehide",M),L=()=>e.removeEventListener("pagehide",M)}return b.initialized||Kn(on.Pop,b.location,{initialHydration:!0}),re}function Ge(){E&&E(),L&&L(),I.clear(),R&&R.abort(),b.fetchers.forEach((M,z)=>cr(z)),b.blockers.forEach((M,z)=>Is(z))}function St(M){return I.add(M),()=>I.delete(M)}function pt(M,z){z===void 0&&(z={}),b=Bt({},b,M);let Y=[],ne=[];v.v7_fetcherPersist&&b.fetchers.forEach((ge,Pe)=>{ge.state==="idle"&&(Oe.has(Pe)?ne.push(Pe):Y.push(Pe))}),[...I].forEach(ge=>ge(b,{deletedFetchers:ne,viewTransitionOpts:z.viewTransitionOpts,flushSync:z.flushSync===!0})),v.v7_fetcherPersist&&(Y.forEach(ge=>b.fetchers.delete(ge)),ne.forEach(ge=>cr(ge)))}function Qt(M,z,Y){var ne,ge;let{flushSync:Pe}=Y===void 0?{}:Y,Ne=b.actionData!=null&&b.navigation.formMethod!=null&&si(b.navigation.formMethod)&&b.navigation.state==="loading"&&((ne=M.state)==null?void 0:ne._isRedirect)!==!0,Ee;z.actionData?Object.keys(z.actionData).length>0?Ee=z.actionData:Ee=null:Ne?Ee=b.actionData:Ee=null;let Ie=z.loaderData?JI(b.loaderData,z.loaderData,z.matches||[],z.errors):b.loaderData,ye=b.blockers;ye.size>0&&(ye=new Map(ye),ye.forEach((We,_t)=>ye.set(_t,sc)));let be=S===!0||b.navigation.formMethod!=null&&si(b.navigation.formMethod)&&((ge=M.state)==null?void 0:ge._isRedirect)!==!0;c&&(l=c,c=void 0),C||P===on.Pop||(P===on.Push?n.history.push(M,M.state):P===on.Replace&&n.history.replace(M,M.state));let qe;if(P===on.Pop){let We=N.get(b.location.pathname);We&&We.has(M.pathname)?qe={currentLocation:b.location,nextLocation:M}:N.has(M.pathname)&&(qe={currentLocation:M,nextLocation:b.location})}else if(k){let We=N.get(b.location.pathname);We?We.add(M.pathname):(We=new Set([M.pathname]),N.set(b.location.pathname,We)),qe={currentLocation:b.location,nextLocation:M}}pt(Bt({},z,{actionData:Ee,loaderData:Ie,historyAction:P,location:M,initialized:!0,navigation:Jg,revalidation:"idle",restoreScrollPosition:Ss(M,z.matches||b.matches),preventScrollReset:be,blockers:ye}),{viewTransitionOpts:qe,flushSync:Pe===!0}),P=on.Pop,S=!1,k=!1,C=!1,pe=!1,st=[]}async function $r(M,z){if(typeof M=="number"){n.history.go(M);return}let Y=Wy(b.location,b.matches,h,v.v7_prependBasename,M,v.v7_relativeSplatPath,z==null?void 0:z.fromRouteId,z==null?void 0:z.relative),{path:ne,submission:ge,error:Pe}=$I(v.v7_normalizeFormMethod,!1,Y,z),Ne=b.location,Ee=Gc(b.location,ne,z&&z.state);Ee=Bt({},Ee,n.history.encodeLocation(Ee));let Ie=z&&z.replace!=null?z.replace:void 0,ye=on.Push;Ie===!0?ye=on.Replace:Ie===!1||ge!=null&&si(ge.formMethod)&&ge.formAction===b.location.pathname+b.location.search&&(ye=on.Replace);let be=z&&"preventScrollReset"in z?z.preventScrollReset===!0:void 0,qe=(z&&z.flushSync)===!0,We=Bi({currentLocation:Ne,nextLocation:Ee,historyAction:ye});if(We){Cr(We,{state:"blocked",location:Ee,proceed(){Cr(We,{state:"proceeding",proceed:void 0,reset:void 0,location:Ee}),$r(M,z)},reset(){let _t=new Map(b.blockers);_t.set(We,sc),pt({blockers:_t})}});return}return await Kn(ye,Ee,{submission:ge,pendingError:Pe,preventScrollReset:be,replace:z&&z.replace,enableViewTransition:z&&z.viewTransition,flushSync:qe})}function Fi(){if($t(),pt({revalidation:"loading"}),b.navigation.state!=="submitting"){if(b.navigation.state==="idle"){Kn(b.historyAction,b.location,{startUninterruptedRevalidation:!0});return}Kn(P||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation,enableViewTransition:k===!0})}}async function Kn(M,z,Y){R&&R.abort(),R=null,P=M,C=(Y&&Y.startUninterruptedRevalidation)===!0,br(b.location,b.matches),S=(Y&&Y.preventScrollReset)===!0,k=(Y&&Y.enableViewTransition)===!0;let ne=c||l,ge=Y&&Y.overrideNavigation,Pe=ia(ne,z,h),Ne=(Y&&Y.flushSync)===!0,Ee=Dr(Pe,ne,z.pathname);if(Ee.active&&Ee.matches&&(Pe=Ee.matches),!Pe){let{error:ft,notFoundMatches:et,route:vt}=hi(z.pathname);Qt(z,{matches:et,loaderData:{},errors:{[vt.id]:ft}},{flushSync:Ne});return}if(b.initialized&&!pe&&tB(b.location,z)&&!(Y&&Y.submission&&si(Y.submission.formMethod))){Qt(z,{matches:Pe},{flushSync:Ne});return}R=new AbortController;let Ie=Tl(n.history,z,R.signal,Y&&Y.submission),ye;if(Y&&Y.pendingError)ye=[sa(Pe).route.id,{type:At.error,error:Y.pendingError}];else if(Y&&Y.submission&&si(Y.submission.formMethod)){let ft=await Po(Ie,z,Y.submission,Pe,Ee.active,{replace:Y.replace,flushSync:Ne});if(ft.shortCircuited)return;if(ft.pendingActionResult){let[et,vt]=ft.pendingActionResult;if(Er(vt)&&Tp(vt.error)&&vt.error.status===404){R=null,Qt(z,{matches:ft.matches,loaderData:{},errors:{[et]:vt.error}});return}}Pe=ft.matches||Pe,ye=ft.pendingActionResult,ge=Xg(z,Y.submission),Ne=!1,Ee.active=!1,Ie=Tl(n.history,Ie.url,Ie.signal)}let{shortCircuited:be,matches:qe,loaderData:We,errors:_t}=await Co(Ie,z,Pe,Ee.active,ge,Y&&Y.submission,Y&&Y.fetcherSubmission,Y&&Y.replace,Y&&Y.initialHydration===!0,Ne,ye);be||(R=null,Qt(z,Bt({matches:qe||Pe},XI(ye),{loaderData:We,errors:_t})))}async function Po(M,z,Y,ne,ge,Pe){Pe===void 0&&(Pe={}),$t();let Ne=aB(z,Y);if(pt({navigation:Ne},{flushSync:Pe.flushSync===!0}),ge){let ye=await di(ne,z.pathname,M.signal);if(ye.type==="aborted")return{shortCircuited:!0};if(ye.type==="error"){let be=sa(ye.partialMatches).route.id;return{matches:ye.partialMatches,pendingActionResult:[be,{type:At.error,error:ye.error}]}}else if(ye.matches)ne=ye.matches;else{let{notFoundMatches:be,error:qe,route:We}=hi(z.pathname);return{matches:be,pendingActionResult:[We.id,{type:At.error,error:qe}]}}}let Ee,Ie=gc(ne,z);if(!Ie.route.action&&!Ie.route.lazy)Ee={type:At.error,error:sr(405,{method:M.method,pathname:z.pathname,routeId:Ie.route.id})};else if(Ee=(await Pr("action",b,M,[Ie],ne,null))[Ie.route.id],M.signal.aborted)return{shortCircuited:!0};if(aa(Ee)){let ye;return Pe&&Pe.replace!=null?ye=Pe.replace:ye=WI(Ee.response.headers.get("Location"),new URL(M.url),h)===b.location.pathname+b.location.search,await Gn(M,Ee,!0,{submission:Y,replace:ye}),{shortCircuited:!0}}if(lo(Ee))throw sr(400,{type:"defer-action"});if(Er(Ee)){let ye=sa(ne,Ie.route.id);return(Pe&&Pe.replace)!==!0&&(P=on.Push),{matches:ne,pendingActionResult:[ye.route.id,Ee]}}return{matches:ne,pendingActionResult:[Ie.route.id,Ee]}}async function Co(M,z,Y,ne,ge,Pe,Ne,Ee,Ie,ye,be){let qe=ge||Xg(z,Pe),We=Pe||Ne||tS(qe),_t=!C&&(!v.v7_partialHydration||!Ie);if(ne){if(_t){let Ct=ko(be);pt(Bt({navigation:qe},Ct!==void 0?{actionData:Ct}:{}),{flushSync:ye})}let Xe=await di(Y,z.pathname,M.signal);if(Xe.type==="aborted")return{shortCircuited:!0};if(Xe.type==="error"){let Ct=sa(Xe.partialMatches).route.id;return{matches:Xe.partialMatches,loaderData:{},errors:{[Ct]:Xe.error}}}else if(Xe.matches)Y=Xe.matches;else{let{error:Ct,notFoundMatches:Yn,route:un}=hi(z.pathname);return{matches:Yn,loaderData:{},errors:{[un.id]:Ct}}}}let ft=c||l,[et,vt]=HI(n.history,b,Y,We,z,v.v7_partialHydration&&Ie===!0,v.v7_skipActionErrorRevalidation,pe,st,yt,Oe,te,B,ft,h,be);if(Nn(Xe=>!(Y&&Y.some(Ct=>Ct.route.id===Xe))||et&&et.some(Ct=>Ct.route.id===Xe)),_e=++ce,et.length===0&&vt.length===0){let Xe=Es();return Qt(z,Bt({matches:Y,loaderData:{},errors:be&&Er(be[1])?{[be[0]]:be[1].error}:null},XI(be),Xe?{fetchers:new Map(b.fetchers)}:{}),{flushSync:ye}),{shortCircuited:!0}}if(_t){let Xe={};if(!ne){Xe.navigation=qe;let Ct=ko(be);Ct!==void 0&&(Xe.actionData=Ct)}vt.length>0&&(Xe.fetchers=ys(vt)),pt(Xe,{flushSync:ye})}vt.forEach(Xe=>{xn(Xe.key),Xe.controller&&Le.set(Xe.key,Xe.controller)});let hr=()=>vt.forEach(Xe=>xn(Xe.key));R&&R.signal.addEventListener("abort",hr);let{loaderResults:Gr,fetcherResults:Wn}=await _s(b,Y,et,vt,M);if(M.signal.aborted)return{shortCircuited:!0};R&&R.signal.removeEventListener("abort",hr),vt.forEach(Xe=>Le.delete(Xe.key));let Qn=Md(Gr);if(Qn)return await Gn(M,Qn.result,!0,{replace:Ee}),{shortCircuited:!0};if(Qn=Md(Wn),Qn)return B.add(Qn.key),await Gn(M,Qn.result,!0,{replace:Ee}),{shortCircuited:!0};let{loaderData:mt,errors:fi}=YI(b,Y,Gr,be,vt,Wn,Ve);Ve.forEach((Xe,Ct)=>{Xe.subscribe(Yn=>{(Yn||Xe.done)&&Ve.delete(Ct)})}),v.v7_partialHydration&&Ie&&b.errors&&(fi=Bt({},b.errors,fi));let Bn=Es(),dr=Ts(_e),Sn=Bn||dr||vt.length>0;return Bt({matches:Y,loaderData:mt,errors:fi},Sn?{fetchers:new Map(b.fetchers)}:{})}function ko(M){if(M&&!Er(M[1]))return{[M[0]]:M[1].data};if(b.actionData)return Object.keys(b.actionData).length===0?null:b.actionData}function ys(M){return M.forEach(z=>{let Y=b.fetchers.get(z.key),ne=oc(void 0,Y?Y.data:void 0);b.fetchers.set(z.key,ne)}),new Map(b.fetchers)}function qr(M,z,Y,ne){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");xn(M);let ge=(ne&&ne.flushSync)===!0,Pe=c||l,Ne=Wy(b.location,b.matches,h,v.v7_prependBasename,Y,v.v7_relativeSplatPath,z,ne==null?void 0:ne.relative),Ee=ia(Pe,Ne,h),Ie=Dr(Ee,Pe,Ne);if(Ie.active&&Ie.matches&&(Ee=Ie.matches),!Ee){ln(M,z,sr(404,{pathname:Ne}),{flushSync:ge});return}let{path:ye,submission:be,error:qe}=$I(v.v7_normalizeFormMethod,!0,Ne,ne);if(qe){ln(M,z,qe,{flushSync:ge});return}let We=gc(Ee,ye),_t=(ne&&ne.preventScrollReset)===!0;if(be&&si(be.formMethod)){Hr(M,z,ye,We,Ee,Ie.active,ge,_t,be);return}te.set(M,{routeId:z,path:ye}),bo(M,z,ye,We,Ee,Ie.active,ge,_t,be)}async function Hr(M,z,Y,ne,ge,Pe,Ne,Ee,Ie){$t(),te.delete(M);function ye(xt){if(!xt.route.action&&!xt.route.lazy){let Yt=sr(405,{method:Ie.formMethod,pathname:Y,routeId:z});return ln(M,z,Yt,{flushSync:Ne}),!0}return!1}if(!Pe&&ye(ne))return;let be=b.fetchers.get(M);Rt(M,lB(Ie,be),{flushSync:Ne});let qe=new AbortController,We=Tl(n.history,Y,qe.signal,Ie);if(Pe){let xt=await di(ge,Y,We.signal);if(xt.type==="aborted")return;if(xt.type==="error"){ln(M,z,xt.error,{flushSync:Ne});return}else if(xt.matches){if(ge=xt.matches,ne=gc(ge,Y),ye(ne))return}else{ln(M,z,sr(404,{pathname:Y}),{flushSync:Ne});return}}Le.set(M,qe);let _t=ce,et=(await Pr("action",b,We,[ne],ge,M))[ne.route.id];if(We.signal.aborted){Le.get(M)===qe&&Le.delete(M);return}if(v.v7_fetcherPersist&&Oe.has(M)){if(aa(et)||Er(et)){Rt(M,eo(void 0));return}}else{if(aa(et))if(Le.delete(M),_e>_t){Rt(M,eo(void 0));return}else return B.add(M),Rt(M,oc(Ie)),Gn(We,et,!1,{fetcherSubmission:Ie,preventScrollReset:Ee});if(Er(et)){ln(M,z,et.error);return}}if(lo(et))throw sr(400,{type:"defer-action"});let vt=b.navigation.location||b.location,hr=Tl(n.history,vt,qe.signal),Gr=c||l,Wn=b.navigation.state!=="idle"?ia(Gr,b.navigation.location,h):b.matches;Ye(Wn,"Didn't find any matches after fetcher action");let Qn=++ce;de.set(M,Qn);let mt=oc(Ie,et.data);b.fetchers.set(M,mt);let[fi,Bn]=HI(n.history,b,Wn,Ie,vt,!1,v.v7_skipActionErrorRevalidation,pe,st,yt,Oe,te,B,Gr,h,[ne.route.id,et]);Bn.filter(xt=>xt.key!==M).forEach(xt=>{let Yt=xt.key,Rs=b.fetchers.get(Yt),Oa=oc(void 0,Rs?Rs.data:void 0);b.fetchers.set(Yt,Oa),xn(Yt),xt.controller&&Le.set(Yt,xt.controller)}),pt({fetchers:new Map(b.fetchers)});let dr=()=>Bn.forEach(xt=>xn(xt.key));qe.signal.addEventListener("abort",dr);let{loaderResults:Sn,fetcherResults:Xe}=await _s(b,Wn,fi,Bn,hr);if(qe.signal.aborted)return;qe.signal.removeEventListener("abort",dr),de.delete(M),Le.delete(M),Bn.forEach(xt=>Le.delete(xt.key));let Ct=Md(Sn);if(Ct)return Gn(hr,Ct.result,!1,{preventScrollReset:Ee});if(Ct=Md(Xe),Ct)return B.add(Ct.key),Gn(hr,Ct.result,!1,{preventScrollReset:Ee});let{loaderData:Yn,errors:un}=YI(b,Wn,Sn,void 0,Bn,Xe,Ve);if(b.fetchers.has(M)){let xt=eo(et.data);b.fetchers.set(M,xt)}Ts(Qn),b.navigation.state==="loading"&&Qn>_e?(Ye(P,"Expected pending action"),R&&R.abort(),Qt(b.navigation.location,{matches:Wn,loaderData:Yn,errors:un,fetchers:new Map(b.fetchers)})):(pt({errors:un,loaderData:JI(b.loaderData,Yn,Wn,un),fetchers:new Map(b.fetchers)}),pe=!1)}async function bo(M,z,Y,ne,ge,Pe,Ne,Ee,Ie){let ye=b.fetchers.get(M);Rt(M,oc(Ie,ye?ye.data:void 0),{flushSync:Ne});let be=new AbortController,qe=Tl(n.history,Y,be.signal);if(Pe){let et=await di(ge,Y,qe.signal);if(et.type==="aborted")return;if(et.type==="error"){ln(M,z,et.error,{flushSync:Ne});return}else if(et.matches)ge=et.matches,ne=gc(ge,Y);else{ln(M,z,sr(404,{pathname:Y}),{flushSync:Ne});return}}Le.set(M,be);let We=ce,ft=(await Pr("loader",b,qe,[ne],ge,M))[ne.route.id];if(lo(ft)&&(ft=await Pv(ft,qe.signal,!0)||ft),Le.get(M)===be&&Le.delete(M),!qe.signal.aborted){if(Oe.has(M)){Rt(M,eo(void 0));return}if(aa(ft))if(_e>We){Rt(M,eo(void 0));return}else{B.add(M),await Gn(qe,ft,!1,{preventScrollReset:Ee});return}if(Er(ft)){ln(M,z,ft.error);return}Ye(!lo(ft),"Unhandled fetcher deferred data"),Rt(M,eo(ft.data))}}async function Gn(M,z,Y,ne){let{submission:ge,fetcherSubmission:Pe,preventScrollReset:Ne,replace:Ee}=ne===void 0?{}:ne;z.response.headers.has("X-Remix-Revalidate")&&(pe=!0);let Ie=z.response.headers.get("Location");Ye(Ie,"Expected a Location header on the redirect Response"),Ie=WI(Ie,new URL(M.url),h);let ye=Gc(b.location,Ie,{_isRedirect:!0});if(t){let et=!1;if(z.response.headers.has("X-Remix-Reload-Document"))et=!0;else if(Av.test(Ie)){const vt=n.history.createURL(Ie);et=vt.origin!==e.location.origin||mu(vt.pathname,h)==null}if(et){Ee?e.location.replace(Ie):e.location.assign(Ie);return}}R=null;let be=Ee===!0||z.response.headers.has("X-Remix-Replace")?on.Replace:on.Push,{formMethod:qe,formAction:We,formEncType:_t}=b.navigation;!ge&&!Pe&&qe&&We&&_t&&(ge=tS(b.navigation));let ft=ge||Pe;if(z4.has(z.response.status)&&ft&&si(ft.formMethod))await Kn(be,ye,{submission:Bt({},ft,{formAction:Ie}),preventScrollReset:Ne||S,enableViewTransition:Y?k:void 0});else{let et=Xg(ye,ge);await Kn(be,ye,{overrideNavigation:et,fetcherSubmission:Pe,preventScrollReset:Ne||S,enableViewTransition:Y?k:void 0})}}async function Pr(M,z,Y,ne,ge,Pe){let Ne,Ee={};try{Ne=await Y4(p,M,z,Y,ne,ge,Pe,o,i)}catch(Ie){return ne.forEach(ye=>{Ee[ye.route.id]={type:At.error,error:Ie}}),Ee}for(let[Ie,ye]of Object.entries(Ne))if(nB(ye)){let be=ye.result;Ee[Ie]={type:At.redirect,response:Z4(be,Y,Ie,ge,h,v.v7_relativeSplatPath)}}else Ee[Ie]=await X4(ye);return Ee}async function _s(M,z,Y,ne,ge){let Pe=M.matches,Ne=Pr("loader",M,ge,Y,z,null),Ee=Promise.all(ne.map(async be=>{if(be.matches&&be.match&&be.controller){let We=(await Pr("loader",M,Tl(n.history,be.path,be.controller.signal),[be.match],be.matches,be.key))[be.match.route.id];return{[be.key]:We}}else return Promise.resolve({[be.key]:{type:At.error,error:sr(404,{pathname:be.path})}})})),Ie=await Ne,ye=(await Ee).reduce((be,qe)=>Object.assign(be,qe),{});return await Promise.all([sB(z,Ie,ge.signal,Pe,M.loaderData),oB(z,ye,ne)]),{loaderResults:Ie,fetcherResults:ye}}function $t(){pe=!0,st.push(...Nn()),te.forEach((M,z)=>{Le.has(z)&&yt.add(z),xn(z)})}function Rt(M,z,Y){Y===void 0&&(Y={}),b.fetchers.set(M,z),pt({fetchers:new Map(b.fetchers)},{flushSync:(Y&&Y.flushSync)===!0})}function ln(M,z,Y,ne){ne===void 0&&(ne={});let ge=sa(b.matches,z);cr(M),pt({errors:{[ge.route.id]:Y},fetchers:new Map(b.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function vs(M){return v.v7_fetcherPersist&&(we.set(M,(we.get(M)||0)+1),Oe.has(M)&&Oe.delete(M)),b.fetchers.get(M)||$4}function cr(M){let z=b.fetchers.get(M);Le.has(M)&&!(z&&z.state==="loading"&&de.has(M))&&xn(M),te.delete(M),de.delete(M),B.delete(M),Oe.delete(M),yt.delete(M),b.fetchers.delete(M)}function Ui(M){if(v.v7_fetcherPersist){let z=(we.get(M)||0)-1;z<=0?(we.delete(M),Oe.add(M)):we.set(M,z)}else cr(M);pt({fetchers:new Map(b.fetchers)})}function xn(M){let z=Le.get(M);z&&(z.abort(),Le.delete(M))}function ws(M){for(let z of M){let Y=vs(z),ne=eo(Y.data);b.fetchers.set(z,ne)}}function Es(){let M=[],z=!1;for(let Y of B){let ne=b.fetchers.get(Y);Ye(ne,"Expected fetcher: "+Y),ne.state==="loading"&&(B.delete(Y),M.push(Y),z=!0)}return ws(M),z}function Ts(M){let z=[];for(let[Y,ne]of de)if(ne<M){let ge=b.fetchers.get(Y);Ye(ge,"Expected fetcher: "+Y),ge.state==="loading"&&(xn(Y),de.delete(Y),z.push(Y))}return ws(z),z.length>0}function Do(M,z){let Y=b.blockers.get(M)||sc;return Be.get(M)!==z&&Be.set(M,z),Y}function Is(M){b.blockers.delete(M),Be.delete(M)}function Cr(M,z){let Y=b.blockers.get(M)||sc;Ye(Y.state==="unblocked"&&z.state==="blocked"||Y.state==="blocked"&&z.state==="blocked"||Y.state==="blocked"&&z.state==="proceeding"||Y.state==="blocked"&&z.state==="unblocked"||Y.state==="proceeding"&&z.state==="unblocked","Invalid blocker state transition: "+Y.state+" -> "+z.state);let ne=new Map(b.blockers);ne.set(M,z),pt({blockers:ne})}function Bi(M){let{currentLocation:z,nextLocation:Y,historyAction:ne}=M;if(Be.size===0)return;Be.size>1&&iu(!1,"A router only supports one blocker at a time");let ge=Array.from(Be.entries()),[Pe,Ne]=ge[ge.length-1],Ee=b.blockers.get(Pe);if(!(Ee&&Ee.state==="proceeding")&&Ne({currentLocation:z,nextLocation:Y,historyAction:ne}))return Pe}function hi(M){let z=sr(404,{pathname:M}),Y=c||l,{matches:ne,route:ge}=ZI(Y);return Nn(),{notFoundMatches:ne,route:ge,error:z}}function Nn(M){let z=[];return Ve.forEach((Y,ne)=>{(!M||M(ne))&&(Y.cancel(),z.push(ne),Ve.delete(ne))}),z}function kr(M,z,Y){if(D=M,V=z,x=Y||null,!G&&b.navigation===Jg){G=!0;let ne=Ss(b.location,b.matches);ne!=null&&pt({restoreScrollPosition:ne})}return()=>{D=null,V=null,x=null}}function ji(M,z){return x&&x(M,z.map(ne=>w4(ne,b.loaderData)))||M.key}function br(M,z){if(D&&V){let Y=ji(M,z);D[Y]=V()}}function Ss(M,z){if(D){let Y=ji(M,z),ne=D[Y];if(typeof ne=="number")return ne}return null}function Dr(M,z,Y){if(g)if(M){if(Object.keys(M[0].params).length>0)return{active:!0,matches:of(z,Y,h,!0)}}else return{active:!0,matches:of(z,Y,h,!0)||[]};return{active:!1,matches:null}}async function di(M,z,Y){if(!g)return{type:"success",matches:M};let ne=M;for(;;){let ge=c==null,Pe=c||l,Ne=o;try{await g({path:z,matches:ne,patch:(ye,be)=>{Y.aborted||GI(ye,be,Pe,Ne,i)}})}catch(ye){return{type:"error",error:ye,partialMatches:ne}}finally{ge&&!Y.aborted&&(l=[...l])}if(Y.aborted)return{type:"aborted"};let Ee=ia(Pe,z,h);if(Ee)return{type:"success",matches:Ee};let Ie=of(Pe,z,h,!0);if(!Ie||ne.length===Ie.length&&ne.every((ye,be)=>ye.route.id===Ie[be].route.id))return{type:"success",matches:null};ne=Ie}}function Kr(M){o={},c=Mf(M,i,void 0,o)}function xo(M,z){let Y=c==null;GI(M,z,c||l,o,i),Y&&(l=[...l],pt({}))}return re={get basename(){return h},get future(){return v},get state(){return b},get routes(){return l},get window(){return e},initialize:$e,subscribe:St,enableScrollRestoration:kr,navigate:$r,fetch:qr,revalidate:Fi,createHref:M=>n.history.createHref(M),encodeLocation:M=>n.history.encodeLocation(M),getFetcher:vs,deleteFetcher:Ui,dispose:Ge,getBlocker:Do,deleteBlocker:Is,patchRoutes:xo,_internalFetchControllers:Le,_internalActiveDeferreds:Ve,_internalSetRoutes:Kr},re}function K4(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Wy(n,e,t,r,i,o,l,c){let h,p;if(l){h=[];for(let v of e)if(h.push(v),v.route.id===l){p=v;break}}else h=e,p=e[e.length-1];let g=Ep(i||".",wp(h,o),mu(n.pathname,t)||n.pathname,c==="path");if(i==null&&(g.search=n.search,g.hash=n.hash),(i==null||i===""||i===".")&&p){let v=Cv(g.search);if(p.route.index&&!v)g.search=g.search?g.search.replace(/^\?/,"?index&"):"?index";else if(!p.route.index&&v){let E=new URLSearchParams(g.search),I=E.getAll("index");E.delete("index"),I.filter(x=>x).forEach(x=>E.append("index",x));let D=E.toString();g.search=D?"?"+D:""}}return r&&t!=="/"&&(g.pathname=g.pathname==="/"?t:cs([t,g.pathname])),Sa(g)}function $I(n,e,t,r){if(!r||!K4(r))return{path:t};if(r.formMethod&&!iB(r.formMethod))return{path:t,error:sr(405,{method:r.formMethod})};let i=()=>({path:t,error:sr(400,{type:"invalid-body"})}),o=r.formMethod||"get",l=n?o.toUpperCase():o.toLowerCase(),c=FP(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!si(l))return i();let E=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((I,D)=>{let[x,V]=D;return""+I+x+"="+V+`
`},""):String(r.body);return{path:t,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:void 0,text:E}}}else if(r.formEncType==="application/json"){if(!si(l))return i();try{let E=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:E,text:void 0}}}catch{return i()}}}Ye(typeof FormData=="function","FormData is not available in this environment");let h,p;if(r.formData)h=Yy(r.formData),p=r.formData;else if(r.body instanceof FormData)h=Yy(r.body),p=r.body;else if(r.body instanceof URLSearchParams)h=r.body,p=QI(h);else if(r.body==null)h=new URLSearchParams,p=new FormData;else try{h=new URLSearchParams(r.body),p=QI(h)}catch{return i()}let g={formMethod:l,formAction:c,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(si(g.formMethod))return{path:t,submission:g};let v=Ro(t);return e&&v.search&&Cv(v.search)&&h.append("index",""),v.search="?"+h,{path:Sa(v),submission:g}}function qI(n,e,t){t===void 0&&(t=!1);let r=n.findIndex(i=>i.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function HI(n,e,t,r,i,o,l,c,h,p,g,v,E,I,D,x){let V=x?Er(x[1])?x[1].error:x[1].data:void 0,G=n.createURL(e.location),$=n.createURL(i),j=t;o&&e.errors?j=qI(t,Object.keys(e.errors)[0],!0):x&&Er(x[1])&&(j=qI(t,x[0]));let H=x?x[1].statusCode:void 0,re=l&&H&&H>=400,b=j.filter((S,R)=>{let{route:k}=S;if(k.lazy)return!0;if(k.loader==null)return!1;if(o)return Qy(k,e.loaderData,e.errors);if(G4(e.loaderData,e.matches[R],S)||h.some(C=>C===S.route.id))return!0;let N=e.matches[R],L=S;return KI(S,Bt({currentUrl:G,currentParams:N.params,nextUrl:$,nextParams:L.params},r,{actionResult:V,actionStatus:H,defaultShouldRevalidate:re?!1:c||G.pathname+G.search===$.pathname+$.search||G.search!==$.search||LP(N,L)}))}),P=[];return v.forEach((S,R)=>{if(o||!t.some(pe=>pe.route.id===S.routeId)||g.has(R))return;let k=ia(I,S.path,D);if(!k){P.push({key:R,routeId:S.routeId,path:S.path,matches:null,match:null,controller:null});return}let N=e.fetchers.get(R),L=gc(k,S.path),C=!1;E.has(R)?C=!1:p.has(R)?(p.delete(R),C=!0):N&&N.state!=="idle"&&N.data===void 0?C=c:C=KI(L,Bt({currentUrl:G,currentParams:e.matches[e.matches.length-1].params,nextUrl:$,nextParams:t[t.length-1].params},r,{actionResult:V,actionStatus:H,defaultShouldRevalidate:re?!1:c})),C&&P.push({key:R,routeId:S.routeId,path:S.path,matches:k,match:L,controller:new AbortController})}),[b,P]}function Qy(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,i=t!=null&&t[n.id]!==void 0;return!r&&i?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!i}function G4(n,e,t){let r=!e||t.route.id!==e.route.id,i=n[t.route.id]===void 0;return r||i}function LP(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function KI(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function GI(n,e,t,r,i){var o;let l;if(n){let p=r[n];Ye(p,"No route found to patch children into: routeId = "+n),p.children||(p.children=[]),l=p.children}else l=t;let c=e.filter(p=>!l.some(g=>MP(p,g))),h=Mf(c,i,[n||"_","patch",String(((o=l)==null?void 0:o.length)||"0")],r);l.push(...h)}function MP(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var i;return(i=e.children)==null?void 0:i.some(o=>MP(t,o))}):!1}async function W4(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let i=t[n.id];Ye(i,"No route found in manifest");let o={};for(let l in r){let h=i[l]!==void 0&&l!=="hasErrorBoundary";iu(!h,'Route "'+i.id+'" has a static property "'+l+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+l+'" will be ignored.')),!h&&!_4.has(l)&&(o[l]=r[l])}Object.assign(i,o),Object.assign(i,Bt({},e(i),{lazy:void 0}))}async function Q4(n){let{matches:e}=n,t=e.filter(i=>i.shouldLoad);return(await Promise.all(t.map(i=>i.resolve()))).reduce((i,o,l)=>Object.assign(i,{[t[l].route.id]:o}),{})}async function Y4(n,e,t,r,i,o,l,c,h,p){let g=o.map(I=>I.route.lazy?W4(I.route,h,c):void 0),v=o.map((I,D)=>{let x=g[D],V=i.some($=>$.route.id===I.route.id);return Bt({},I,{shouldLoad:V,resolve:async $=>($&&r.method==="GET"&&(I.route.lazy||I.route.loader)&&(V=!0),V?J4(e,r,I,x,$,p):Promise.resolve({type:At.data,result:void 0}))})}),E=await n({matches:v,request:r,params:o[0].params,fetcherKey:l,context:p});try{await Promise.all(g)}catch{}return E}async function J4(n,e,t,r,i,o){let l,c,h=p=>{let g,v=new Promise((D,x)=>g=x);c=()=>g(),e.signal.addEventListener("abort",c);let E=D=>typeof p!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):p({request:e,params:t.params,context:o},...D!==void 0?[D]:[]),I=(async()=>{try{return{type:"data",result:await(i?i(x=>E(x)):E())}}catch(D){return{type:"error",result:D}}})();return Promise.race([I,v])};try{let p=t.route[n];if(r)if(p){let g,[v]=await Promise.all([h(p).catch(E=>{g=E}),r]);if(g!==void 0)throw g;l=v}else if(await r,p=t.route[n],p)l=await h(p);else if(n==="action"){let g=new URL(e.url),v=g.pathname+g.search;throw sr(405,{method:e.method,pathname:v,routeId:t.route.id})}else return{type:At.data,result:void 0};else if(p)l=await h(p);else{let g=new URL(e.url),v=g.pathname+g.search;throw sr(404,{pathname:v})}Ye(l.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(p){return{type:At.error,result:p}}finally{c&&e.signal.removeEventListener("abort",c)}return l}async function X4(n){let{result:e,type:t}=n;if(UP(e)){let p;try{let g=e.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?e.body==null?p=null:p=await e.json():p=await e.text()}catch(g){return{type:At.error,error:g}}return t===At.error?{type:At.error,error:new Ff(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:At.data,data:p,statusCode:e.status,headers:e.headers}}if(t===At.error){if(eS(e)){var r;if(e.data instanceof Error){var i;return{type:At.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status}}e=new Ff(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:At.error,error:e,statusCode:Tp(e)?e.status:void 0}}if(rB(e)){var o,l;return{type:At.deferred,deferredData:e,statusCode:(o=e.init)==null?void 0:o.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(eS(e)){var c,h;return{type:At.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}}return{type:At.data,data:e}}function Z4(n,e,t,r,i,o){let l=n.headers.get("Location");if(Ye(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!Av.test(l)){let c=r.slice(0,r.findIndex(h=>h.route.id===t)+1);l=Wy(new URL(e.url),c,i,!0,l,o),n.headers.set("Location",l)}return n}function WI(n,e,t){if(Av.test(n)){let r=n,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=mu(i.pathname,t)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return n}function Tl(n,e,t,r){let i=n.createURL(FP(e)).toString(),o={signal:t};if(r&&si(r.formMethod)){let{formMethod:l,formEncType:c}=r;o.method=l.toUpperCase(),c==="application/json"?(o.headers=new Headers({"Content-Type":c}),o.body=JSON.stringify(r.json)):c==="text/plain"?o.body=r.text:c==="application/x-www-form-urlencoded"&&r.formData?o.body=Yy(r.formData):o.body=r.formData}return new Request(i,o)}function Yy(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function QI(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function eB(n,e,t,r,i){let o={},l=null,c,h=!1,p={},g=t&&Er(t[1])?t[1].error:void 0;return n.forEach(v=>{if(!(v.route.id in e))return;let E=v.route.id,I=e[E];if(Ye(!aa(I),"Cannot handle redirect results in processLoaderData"),Er(I)){let D=I.error;g!==void 0&&(D=g,g=void 0),l=l||{};{let x=sa(n,E);l[x.route.id]==null&&(l[x.route.id]=D)}o[E]=void 0,h||(h=!0,c=Tp(I.error)?I.error.status:500),I.headers&&(p[E]=I.headers)}else lo(I)?(r.set(E,I.deferredData),o[E]=I.deferredData.data,I.statusCode!=null&&I.statusCode!==200&&!h&&(c=I.statusCode),I.headers&&(p[E]=I.headers)):(o[E]=I.data,I.statusCode&&I.statusCode!==200&&!h&&(c=I.statusCode),I.headers&&(p[E]=I.headers))}),g!==void 0&&t&&(l={[t[0]]:g},o[t[0]]=void 0),{loaderData:o,errors:l,statusCode:c||200,loaderHeaders:p}}function YI(n,e,t,r,i,o,l){let{loaderData:c,errors:h}=eB(e,t,r,l);return i.forEach(p=>{let{key:g,match:v,controller:E}=p,I=o[g];if(Ye(I,"Did not find corresponding fetcher result"),!(E&&E.signal.aborted))if(Er(I)){let D=sa(n.matches,v==null?void 0:v.route.id);h&&h[D.route.id]||(h=Bt({},h,{[D.route.id]:I.error})),n.fetchers.delete(g)}else if(aa(I))Ye(!1,"Unhandled fetcher revalidation redirect");else if(lo(I))Ye(!1,"Unhandled fetcher deferred data");else{let D=eo(I.data);n.fetchers.set(g,D)}}),{loaderData:c,errors:h}}function JI(n,e,t,r){let i=Bt({},e);for(let o of t){let l=o.route.id;if(e.hasOwnProperty(l)?e[l]!==void 0&&(i[l]=e[l]):n[l]!==void 0&&o.route.loader&&(i[l]=n[l]),r&&r.hasOwnProperty(l))break}return i}function XI(n){return n?Er(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function sa(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function ZI(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function sr(n,e){let{pathname:t,routeId:r,method:i,type:o,message:l}=e===void 0?{}:e,c="Unknown Server Error",h="Unknown @remix-run/router error";return n===400?(c="Bad Request",i&&t&&r?h="You made a "+i+' request to "'+t+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?h="defer() is not supported in actions":o==="invalid-body"&&(h="Unable to encode submission body")):n===403?(c="Forbidden",h='Route "'+r+'" does not match URL "'+t+'"'):n===404?(c="Not Found",h='No route matches URL "'+t+'"'):n===405&&(c="Method Not Allowed",i&&t&&r?h="You made a "+i.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(h='Invalid request method "'+i.toUpperCase()+'"')),new Ff(n||500,c,new Error(h),!0)}function Md(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,i]=e[t];if(aa(i))return{key:r,result:i}}}function FP(n){let e=typeof n=="string"?Ro(n):n;return Sa(Bt({},e,{hash:""}))}function tB(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function nB(n){return UP(n.result)&&j4.has(n.result.status)}function lo(n){return n.type===At.deferred}function Er(n){return n.type===At.error}function aa(n){return(n&&n.type)===At.redirect}function eS(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function rB(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function UP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function iB(n){return B4.has(n.toLowerCase())}function si(n){return F4.has(n.toLowerCase())}async function sB(n,e,t,r,i){let o=Object.entries(e);for(let l=0;l<o.length;l++){let[c,h]=o[l],p=n.find(E=>(E==null?void 0:E.route.id)===c);if(!p)continue;let g=r.find(E=>E.route.id===p.route.id),v=g!=null&&!LP(g,p)&&(i&&i[p.route.id])!==void 0;lo(h)&&v&&await Pv(h,t,!1).then(E=>{E&&(e[c]=E)})}}async function oB(n,e,t){for(let r=0;r<t.length;r++){let{key:i,routeId:o,controller:l}=t[r],c=e[i];n.find(p=>(p==null?void 0:p.route.id)===o)&&lo(c)&&(Ye(l,"Expected an AbortController for revalidating fetcher deferred result"),await Pv(c,l.signal,!0).then(p=>{p&&(e[i]=p)}))}}async function Pv(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:At.data,data:n.deferredData.unwrappedData}}catch(i){return{type:At.error,error:i}}return{type:At.data,data:n.deferredData.data}}}function Cv(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function gc(n,e){let t=typeof e=="string"?Ro(e).search:e.search;if(n[n.length-1].route.index&&Cv(t||""))return n[n.length-1];let r=NP(n);return r[r.length-1]}function tS(n){let{formMethod:e,formAction:t,formEncType:r,text:i,formData:o,json:l}=n;if(!(!e||!t||!r)){if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:t,formEncType:r,formData:o,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:l,text:void 0}}}function Xg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function aB(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function oc(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function lB(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function eo(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function uB(n,e){try{let t=n.sessionStorage.getItem(VP);if(t){let r=JSON.parse(t);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function cB(n,e){if(e.size>0){let t={};for(let[r,i]of e)t[r]=[...i];try{n.sessionStorage.setItem(VP,JSON.stringify(t))}catch(r){iu(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uf(){return Uf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Uf.apply(this,arguments)}const Ip=X.createContext(null),BP=X.createContext(null),Ao=X.createContext(null),kv=X.createContext(null),Mi=X.createContext({outlet:null,matches:[],isDataRoute:!1}),jP=X.createContext(null);function hB(n,e){let{relative:t}=e===void 0?{}:e;gu()||Ye(!1);let{basename:r,navigator:i}=X.useContext(Ao),{hash:o,pathname:l,search:c}=HP(n,{relative:t}),h=l;return r!=="/"&&(h=l==="/"?r:cs([r,l])),i.createHref({pathname:h,search:c,hash:o})}function gu(){return X.useContext(kv)!=null}function mh(){return gu()||Ye(!1),X.useContext(kv).location}function zP(n){X.useContext(Ao).static||X.useLayoutEffect(n)}function $P(){let{isDataRoute:n}=X.useContext(Mi);return n?SB():dB()}function dB(){gu()||Ye(!1);let n=X.useContext(Ip),{basename:e,future:t,navigator:r}=X.useContext(Ao),{matches:i}=X.useContext(Mi),{pathname:o}=mh(),l=JSON.stringify(wp(i,t.v7_relativeSplatPath)),c=X.useRef(!1);return zP(()=>{c.current=!0}),X.useCallback(function(p,g){if(g===void 0&&(g={}),!c.current)return;if(typeof p=="number"){r.go(p);return}let v=Ep(p,JSON.parse(l),o,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:cs([e,v.pathname])),(g.replace?r.replace:r.push)(v,g.state,g)},[e,r,l,o,n])}const qP=X.createContext(null);function ij(){return X.useContext(qP)}function fB(n){let e=X.useContext(Mi).outlet;return e&&X.createElement(qP.Provider,{value:n},e)}function sj(){let{matches:n}=X.useContext(Mi),e=n[n.length-1];return e?e.params:{}}function HP(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=X.useContext(Ao),{matches:i}=X.useContext(Mi),{pathname:o}=mh(),l=JSON.stringify(wp(i,r.v7_relativeSplatPath));return X.useMemo(()=>Ep(n,JSON.parse(l),o,t==="path"),[n,l,o,t])}function pB(n,e,t,r){gu()||Ye(!1);let{navigator:i}=X.useContext(Ao),{matches:o}=X.useContext(Mi),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let p=mh(),g;g=p;let v=g.pathname||"/",E=v;if(h!=="/"){let x=h.replace(/^\//,"").split("/");E="/"+v.replace(/^\//,"").split("/").slice(x.length).join("/")}let I=ia(n,{pathname:E});return vB(I&&I.map(x=>Object.assign({},x,{params:Object.assign({},c,x.params),pathname:cs([h,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:cs([h,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,t,r)}function mB(){let n=IB(),e=Tp(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),t?X.createElement("pre",{style:i},t):null,null)}const gB=X.createElement(mB,null);class yB extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?X.createElement(Mi.Provider,{value:this.props.routeContext},X.createElement(jP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _B(n){let{routeContext:e,match:t,children:r}=n,i=X.useContext(Ip);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),X.createElement(Mi.Provider,{value:e},r)}function vB(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if(!t)return null;if(t.errors)n=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=(i=t)==null?void 0:i.errors;if(c!=null){let g=l.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id])!==void 0);g>=0||Ye(!1),l=l.slice(0,Math.min(l.length,g+1))}let h=!1,p=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<l.length;g++){let v=l[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=g),v.route.id){let{loaderData:E,errors:I}=t,D=v.route.loader&&E[v.route.id]===void 0&&(!I||I[v.route.id]===void 0);if(v.route.lazy||D){h=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((g,v,E)=>{let I,D=!1,x=null,V=null;t&&(I=c&&v.route.id?c[v.route.id]:void 0,x=v.route.errorElement||gB,h&&(p<0&&E===0?(D=!0,V=null):p===E&&(D=!0,V=v.route.hydrateFallbackElement||null)));let G=e.concat(l.slice(0,E+1)),$=()=>{let j;return I?j=x:D?j=V:v.route.Component?j=X.createElement(v.route.Component,null):v.route.element?j=v.route.element:j=g,X.createElement(_B,{match:v,routeContext:{outlet:g,matches:G,isDataRoute:t!=null},children:j})};return t&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?X.createElement(yB,{location:t.location,revalidation:t.revalidation,component:x,error:I,children:$(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):$()},null)}var KP=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(KP||{}),Bf=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Bf||{});function wB(n){let e=X.useContext(Ip);return e||Ye(!1),e}function EB(n){let e=X.useContext(BP);return e||Ye(!1),e}function TB(n){let e=X.useContext(Mi);return e||Ye(!1),e}function GP(n){let e=TB(),t=e.matches[e.matches.length-1];return t.route.id||Ye(!1),t.route.id}function IB(){var n;let e=X.useContext(jP),t=EB(Bf.UseRouteError),r=GP(Bf.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function SB(){let{router:n}=wB(KP.UseNavigateStable),e=GP(Bf.UseNavigateStable),t=X.useRef(!1);return zP(()=>{t.current=!0}),X.useCallback(function(i,o){o===void 0&&(o={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Uf({fromRouteId:e},o)))},[n,e])}const nS={};function RB(n,e){nS[e]||(nS[e]=!0,console.warn(e))}const Il=(n,e,t)=>RB(n," React Router Future Flag Warning: "+e+". "+("You can use the `"+n+"` future flag to opt-in early. ")+("For more information, see "+t+"."));function AB(n,e){(n==null?void 0:n.v7_startTransition)===void 0&&Il("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!e||!e.v7_relativeSplatPath)&&Il("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),e&&(e.v7_fetcherPersist===void 0&&Il("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),e.v7_normalizeFormMethod===void 0&&Il("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),e.v7_partialHydration===void 0&&Il("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),e.v7_skipActionErrorRevalidation===void 0&&Il("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function Sp(n){let{to:e,replace:t,state:r,relative:i}=n;gu()||Ye(!1);let{future:o,static:l}=X.useContext(Ao),{matches:c}=X.useContext(Mi),{pathname:h}=mh(),p=$P(),g=Ep(e,wp(c,o.v7_relativeSplatPath),h,i==="path"),v=JSON.stringify(g);return X.useEffect(()=>p(JSON.parse(v),{replace:t,state:r,relative:i}),[p,v,i,t,r]),null}function oj(n){return fB(n.context)}function it(n){Ye(!1)}function PB(n){let{basename:e="/",children:t=null,location:r,navigationType:i=on.Pop,navigator:o,static:l=!1,future:c}=n;gu()&&Ye(!1);let h=e.replace(/^\/*/,"/"),p=X.useMemo(()=>({basename:h,navigator:o,static:l,future:Uf({v7_relativeSplatPath:!1},c)}),[h,c,o,l]);typeof r=="string"&&(r=Ro(r));let{pathname:g="/",search:v="",hash:E="",state:I=null,key:D="default"}=r,x=X.useMemo(()=>{let V=mu(g,h);return V==null?null:{location:{pathname:V,search:v,hash:E,state:I,key:D},navigationType:i}},[h,g,v,E,I,D,i]);return x==null?null:X.createElement(Ao.Provider,{value:p},X.createElement(kv.Provider,{children:t,value:x}))}new Promise(()=>{});function Jy(n,e){e===void 0&&(e=[]);let t=[];return X.Children.forEach(n,(r,i)=>{if(!X.isValidElement(r))return;let o=[...e,i];if(r.type===X.Fragment){t.push.apply(t,Jy(r.props.children,o));return}r.type!==it&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Jy(r.props.children,o)),t.push(l)}),t}function CB(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:X.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:X.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:X.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wc(){return Wc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wc.apply(this,arguments)}function kB(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function bB(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function DB(n,e){return n.button===0&&(!e||e==="_self")&&!bB(n)}const xB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NB="6";try{window.__reactRouterVersion=NB}catch{}function OB(n,e){return H4({basename:e==null?void 0:e.basename,future:Wc({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:m4({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||VB(),routes:n,mapRouteProperties:CB,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function VB(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Wc({},e,{errors:LB(e.errors)})),e}function LB(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")t[r]=new Ff(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let l=new o(i.message);l.stack="",t[r]=l}catch{}}if(t[r]==null){let o=new Error(i.message);o.stack="",t[r]=o}}else t[r]=i;return t}const MB=X.createContext({isTransitioning:!1}),FB=X.createContext(new Map),UB="startTransition",rS=tk[UB],BB="flushSync",iS=p4[BB];function jB(n){rS?rS(n):n()}function ac(n){iS?iS(n):n()}class zB{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}}function $B(n){let{fallbackElement:e,router:t,future:r}=n,[i,o]=X.useState(t.state),[l,c]=X.useState(),[h,p]=X.useState({isTransitioning:!1}),[g,v]=X.useState(),[E,I]=X.useState(),[D,x]=X.useState(),V=X.useRef(new Map),{v7_startTransition:G}=r||{},$=X.useCallback(S=>{G?jB(S):S()},[G]),j=X.useCallback((S,R)=>{let{deletedFetchers:k,flushSync:N,viewTransitionOpts:L}=R;k.forEach(pe=>V.current.delete(pe)),S.fetchers.forEach((pe,st)=>{pe.data!==void 0&&V.current.set(st,pe.data)});let C=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!L||C){N?ac(()=>o(S)):$(()=>o(S));return}if(N){ac(()=>{E&&(g&&g.resolve(),E.skipTransition()),p({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let pe=t.window.document.startViewTransition(()=>{ac(()=>o(S))});pe.finished.finally(()=>{ac(()=>{v(void 0),I(void 0),c(void 0),p({isTransitioning:!1})})}),ac(()=>I(pe));return}E?(g&&g.resolve(),E.skipTransition(),x({state:S,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(c(S),p({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[t.window,E,g,V,$]);X.useLayoutEffect(()=>t.subscribe(j),[t,j]),X.useEffect(()=>{h.isTransitioning&&!h.flushSync&&v(new zB)},[h]),X.useEffect(()=>{if(g&&l&&t.window){let S=l,R=g.promise,k=t.window.document.startViewTransition(async()=>{$(()=>o(S)),await R});k.finished.finally(()=>{v(void 0),I(void 0),c(void 0),p({isTransitioning:!1})}),I(k)}},[$,l,g,t.window]),X.useEffect(()=>{g&&l&&i.location.key===l.location.key&&g.resolve()},[g,E,i.location,l]),X.useEffect(()=>{!h.isTransitioning&&D&&(c(D.state),p({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}),x(void 0))},[h.isTransitioning,D]),X.useEffect(()=>{},[]);let H=X.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:S=>t.navigate(S),push:(S,R,k)=>t.navigate(S,{state:R,preventScrollReset:k==null?void 0:k.preventScrollReset}),replace:(S,R,k)=>t.navigate(S,{replace:!0,state:R,preventScrollReset:k==null?void 0:k.preventScrollReset})}),[t]),re=t.basename||"/",b=X.useMemo(()=>({router:t,navigator:H,static:!1,basename:re}),[t,H,re]),P=X.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return X.useEffect(()=>AB(r,t.future),[r,t.future]),X.createElement(X.Fragment,null,X.createElement(Ip.Provider,{value:b},X.createElement(BP.Provider,{value:i},X.createElement(FB.Provider,{value:V.current},X.createElement(MB.Provider,{value:h},X.createElement(PB,{basename:re,location:i.location,navigationType:i.historyAction,navigator:H,future:P},i.initialized||t.future.v7_partialHydration?X.createElement(qB,{routes:t.routes,future:t.future,state:i}):e))))),null)}const qB=X.memo(HB);function HB(n){let{routes:e,future:t,state:r}=n;return pB(e,void 0,r,t)}const KB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aj=X.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:c,target:h,to:p,preventScrollReset:g,viewTransition:v}=e,E=kB(e,xB),{basename:I}=X.useContext(Ao),D,x=!1;if(typeof p=="string"&&GB.test(p)&&(D=p,KB))try{let j=new URL(window.location.href),H=p.startsWith("//")?new URL(j.protocol+p):new URL(p),re=mu(H.pathname,I);H.origin===j.origin&&re!=null?p=re+H.search+H.hash:x=!0}catch{}let V=hB(p,{relative:i}),G=WB(p,{replace:l,state:c,target:h,preventScrollReset:g,relative:i,viewTransition:v});function $(j){r&&r(j),j.defaultPrevented||G(j)}return X.createElement("a",Wc({},E,{href:D||V,onClick:x||o?r:$,ref:t,target:h}))});var sS;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(sS||(sS={}));var oS;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(oS||(oS={}));function WB(n,e){let{target:t,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:c}=e===void 0?{}:e,h=$P(),p=mh(),g=HP(n,{relative:l});return X.useCallback(v=>{if(DB(v,t)){v.preventDefault();let E=r!==void 0?r:Sa(p)===Sa(g);h(n,{replace:E,state:i,preventScrollReset:o,relative:l,viewTransition:c})}},[p,h,g,r,i,t,n,o,l,c])}const Xs=({children:n})=>{const{currentUser:e}=ph();return e?le.jsx(le.Fragment,{children:n}):le.jsx(Sp,{to:"/login",replace:!0})},Zg=({children:n})=>{const{currentUser:e}=ph();return e?le.jsx(Sp,{to:"/events",replace:!0}):le.jsx(le.Fragment,{children:n})},Ri=({children:n})=>{const{currentUser:e,isAdmin:t,loading:r}=ph();return r?null:!e||!t?le.jsx(Sp,{to:"/",replace:!0}):le.jsx(le.Fragment,{children:n})},QB=X.createContext(null),ey={didCatch:!1,error:null};class YB extends X.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=ey}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var t,r,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];(t=(r=this.props).onReset)===null||t===void 0||t.call(r,{args:o,reason:"imperative-api"}),this.setState(ey)}}componentDidCatch(e,t){var r,i;(r=(i=this.props).onError)===null||r===void 0||r.call(i,e,t)}componentDidUpdate(e,t){const{didCatch:r}=this.state,{resetKeys:i}=this.props;if(r&&t.error!==null&&JB(e.resetKeys,i)){var o,l;(o=(l=this.props).onReset)===null||o===void 0||o.call(l,{next:i,prev:e.resetKeys,reason:"keys"}),this.setState(ey)}}render(){const{children:e,fallbackRender:t,FallbackComponent:r,fallback:i}=this.props,{didCatch:o,error:l}=this.state;let c=e;if(o){const h={error:l,resetErrorBoundary:this.resetErrorBoundary};if(typeof t=="function")c=t(h);else if(r)c=X.createElement(r,h);else if(i!==void 0)c=i;else throw l}return X.createElement(QB.Provider,{value:{didCatch:o,error:l,resetErrorBoundary:this.resetErrorBoundary}},c)}}function JB(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n.length!==e.length||n.some((t,r)=>!Object.is(t,e[r]))}const ht=n=>le.jsx(YB,{fallback:le.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",color:"white",textAlign:"center",padding:"20px"},children:[le.jsx("h2",{children:"Something went wrong"}),le.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",marginTop:"20px",background:"#4a6cf7",border:"none",borderRadius:"8px",color:"white",cursor:"pointer"},children:"Refresh"})]}),children:le.jsx(X.Suspense,{fallback:le.jsxs(A2,{children:[le.jsx(P2,{children:le.jsx(C2,{})}),le.jsx(k2,{children:"Loading..."})]}),children:le.jsx(n,{})})}),XB=ze.lazy(()=>It(()=>import("./HomeScreen-CTtCBy1B.js"),__vite__mapDeps([0,1,2,3,4,5]))),aS=ze.lazy(()=>It(()=>import("./NotFoundScreen-gY8KEDL9.js"),__vite__mapDeps([6,1,2]))),ZB=ze.lazy(()=>It(()=>import("./LoginScreen-CCL5Qvr5.js"),__vite__mapDeps([7,1,2,8,9,10,4,5]))),e2=ze.lazy(()=>It(()=>import("./SignUpScreen-CPXgClaA.js"),__vite__mapDeps([11,1,2,8,9,10,4,5]))),t2=ze.lazy(()=>It(()=>import("./ResetPasswordScreen-C7o1BRBN.js"),__vite__mapDeps([12,1,2,9,10,4,8]))),n2=ze.lazy(()=>It(()=>import("./EventsScreen-DYDaZpic.js"),__vite__mapDeps([13,1,2,3,8,4,5,14,15]))),r2=ze.lazy(()=>It(()=>import("./ProfileScreen-Cmy_ZaX8.js"),__vite__mapDeps([16,1,2,4,5]))),ty=ze.lazy(()=>It(()=>import("./AdminScreen-BvhmsOJh.js"),__vite__mapDeps([17,1,2,9,8,4,5,14,18]))),i2=ze.lazy(()=>It(()=>import("./CreateEventScreen-Bmz_rAg0.js"),__vite__mapDeps([19,1,2,20,4,21,5,22]))),s2=ze.lazy(()=>It(()=>import("./MessengerScreen-qvGGT0Tn.js"),__vite__mapDeps([23,15,2,24]))),o2=ze.lazy(()=>It(()=>import("./ChatScreen-B7b9B7I0.js"),__vite__mapDeps([25,15,2]))),a2=ze.lazy(()=>It(()=>import("./MessagesScreen-DxhAgt-2.js"),__vite__mapDeps([26,1,2,3,9,4,5]))),l2=ze.lazy(()=>It(()=>import("./EventDetailScreen-DwUg3bYq.js"),__vite__mapDeps([27,1,2,8,4,28,29,30,21]))),u2=ze.lazy(()=>It(()=>import("./EditEventScreen-BC0wz5ib.js"),__vite__mapDeps([31,1,2,8,32,4]))),c2=ze.lazy(()=>It(()=>import("./BookingScreen-CRedXL5c.js"),__vite__mapDeps([33,1,2,32,8,4]))),h2=ze.lazy(()=>It(()=>import("./TicketScreen-DG187Pmo.js"),__vite__mapDeps([34,8,9,1,2,30,4,5,35]))),d2=ze.lazy(()=>It(()=>import("./MyTicketsScreen-BTBcwl1U.js"),__vite__mapDeps([36,1,2,9,8,4,5]))),f2=ze.lazy(()=>It(()=>import("./ValidateTicketScreen-DjQZzyA4.js"),__vite__mapDeps([37,8,9,1,2]))),p2=ze.lazy(()=>It(()=>import("./UnauthorizedScreen-DQ4yPtSS.js"),__vite__mapDeps([38,1,2,9,4]))),m2=ze.lazy(()=>It(()=>import("./PaymentErrorScreen-DYx0HaLU.js"),__vite__mapDeps([39,1,2,4]))),g2=ze.lazy(()=>It(()=>import("./UserDetailScreen-DoU-eVb1.js"),__vite__mapDeps([40,1,2,8,4,5]))),y2=ze.lazy(()=>It(()=>import("./UserTicketsScreen-C5Qi_9Kb.js"),__vite__mapDeps([41,1,2,8,42,4,5]))),_2=ze.lazy(()=>It(()=>import("./UserTransactionsScreen-Cnescb3F.js"),__vite__mapDeps([43,1,2,8,42,4,5]))),v2=ze.lazy(()=>It(()=>import("./TicketValidationScreen-ZlXLw40R.js"),__vite__mapDeps([44,8,9,1,2,18,4,14]))),w2=ze.lazy(()=>It(()=>import("./UserSearchScreen-VIU4yzuI.js"),__vite__mapDeps([45,24,15,2]))),E2=ze.lazy(()=>It(()=>import("./TermsConditionsScreen-DK6HeYq4.js"),__vite__mapDeps([46,47,28,20]))),T2=ze.lazy(()=>It(()=>import("./PrivacyPolicyScreen-AnDyS0Io.js"),__vite__mapDeps([48,47,28,20]))),I2=ze.lazy(()=>It(()=>import("./RefundPolicyScreen-Cv4DkMgq.js"),__vite__mapDeps([49,47,28,20]))),S2=ze.lazy(()=>It(()=>import("./AboutUsScreen-CMoIleh7.js"),__vite__mapDeps([50,47,28,20]))),lS=MS`
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
`,R2=MS`
  0% { transform: scale(0.85); opacity: 0.5; }
  50% { transform: scale(1); opacity: 0.8; }
  100% { transform: scale(0.85); opacity: 0.5; }
`,A2=Aa.div`
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  height: 100vh;
  width: 100%;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(8px);
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1000;
`,P2=Aa.div`
  position: relative;
  width: 64px;
  height: 64px;
  margin-bottom: 16px;
`,C2=Aa.div`
  box-sizing: border-box;
  position: absolute;
  width: 100%;
  height: 100%;
  border: 3px solid transparent;
  border-top-color: ${n=>{var e;return((e=n.theme.colors)==null?void 0:e.primary)||"#3498db"}};
  border-radius: 50%;
  animation: ${lS} 1s linear infinite;

  &::before {
    content: '';
    box-sizing: border-box;
    position: absolute;
    top: -9px;
    left: -9px;
    right: -9px;
    bottom: -9px;
    border-radius: 50%;
    border: 3px solid transparent;
    border-top-color: ${n=>{var e;return((e=n.theme.colors)==null?void 0:e.secondary)||"#e74c3c"}};
    animation: ${lS} 1.5s linear infinite reverse;
  }
`,k2=Aa.div`
  color: ${n=>{var e;return((e=n.theme.colors)==null?void 0:e.text)||"#2c3e50"}};
  font-size: 1.1rem;
  font-weight: 500;
  margin-top: 16px;
  animation: ${R2} 1.5s ease-in-out infinite;
`,b2=OB(Jy(le.jsxs(it,{errorElement:ht(aS),children:[le.jsx(it,{index:!0,element:ht(XB)}),le.jsx(it,{path:"login",element:le.jsx(Zg,{children:ht(ZB)})}),le.jsx(it,{path:"signup",element:le.jsx(Zg,{children:ht(e2)})}),le.jsx(it,{path:"reset-password",element:le.jsx(Zg,{children:ht(t2)})}),le.jsx(it,{path:"events",element:le.jsx(Xs,{children:ht(n2)})}),le.jsx(it,{path:"events/:id",element:le.jsx(Xs,{children:ht(l2)})}),le.jsx(it,{path:"events/:id/book",element:le.jsx(Xs,{children:ht(c2)})}),le.jsx(it,{path:"profile",element:le.jsx(Xs,{children:ht(r2)})}),le.jsx(it,{path:"my-tickets",element:le.jsx(Xs,{children:ht(d2)})}),le.jsx(it,{path:"/tickets/:ticketId",element:le.jsx(Xs,{children:ht(h2)})}),le.jsx(it,{path:"messages",element:le.jsx(Xs,{children:ht(a2)})}),le.jsx(it,{path:"admin",element:le.jsx(Ri,{children:ht(ty)})}),le.jsx(it,{path:"admin/users",element:le.jsx(Ri,{children:ht(ty)})}),le.jsx(it,{path:"admin/tickets",element:le.jsx(Ri,{children:ht(ty)})}),le.jsx(it,{path:"admin/users/:userId",element:le.jsx(Ri,{children:ht(g2)})}),le.jsx(it,{path:"admin/users/:userId/tickets",element:le.jsx(Ri,{children:ht(y2)})}),le.jsx(it,{path:"admin/users/:userId/transactions",element:le.jsx(Ri,{children:ht(_2)})}),le.jsx(it,{path:"admin/tickets/:ticketId/validate",element:le.jsx(Ri,{children:ht(v2)})}),le.jsx(it,{path:"events/create",element:le.jsx(Ri,{children:ht(i2)})}),le.jsx(it,{path:"events/:id/edit",element:le.jsx(Ri,{children:ht(u2)})}),le.jsx(it,{path:"validate-ticket/:ticketId",element:le.jsx(Ri,{children:ht(f2)})}),le.jsxs(it,{path:"messenger",element:le.jsx(Xs,{children:ht(s2)}),children:[le.jsx(it,{index:!0,element:le.jsx(Sp,{to:"search"})}),le.jsx(it,{path:"search",element:ht(w2)}),le.jsx(it,{path:"chat/:conversationId",element:ht(o2)})]}),le.jsx(it,{path:"unauthorized",element:ht(p2)}),le.jsx(it,{path:"/payment-error",element:ht(m2)}),le.jsxs(it,{path:"legal",children:[le.jsx(it,{path:"terms-conditions",element:ht(E2)}),le.jsx(it,{path:"privacy-policy",element:ht(T2)}),le.jsx(it,{path:"refund-policy",element:ht(I2)}),le.jsx(it,{path:"about-us",element:ht(S2)})]}),le.jsx(it,{path:"*",element:ht(aS)})]})),{basename:"/",future:{v7_relativeSplatPath:!0}}),D2=()=>le.jsx($B,{router:b2}),x2=cb`
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  html, body {
    overflow-x: hidden;
    width: 100%;
    height: 100%;
  }
  
  body {
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
  }
`,N2=Aa.div`
  position: relative;
  min-height: 100vh;
  width: 100%;
  overflow-x: hidden;
`,O2=Aa.div`
  position: relative;
  z-index: 1;
`,V2=()=>le.jsx(ib,{shouldForwardProp:n=>!["margin"].includes(n),children:le.jsx(HS,{children:le.jsx(a4,{children:le.jsx(o4,{children:le.jsx(l4,{children:le.jsxs(c4,{children:[le.jsx(x2,{}),le.jsxs(N2,{children:[le.jsx(Vb,{}),le.jsx(O2,{children:le.jsx(D2,{})})]})]})})})})})});ak.createRoot(document.getElementById("root")).render(le.jsx(ze.StrictMode,{children:le.jsx(V2,{})}));export{mc as $,J2 as A,H2 as B,Q2 as C,W2 as D,fu as E,oU as F,DU as G,sU as H,X2 as I,ej as J,Sc as K,aj as L,Ra as M,ic as N,s4 as O,rj as P,u4 as Q,ze as R,a_ as S,sj as T,$2 as U,xi as V,Vb as W,oj as X,ij as Y,Z2 as Z,p1 as _,bP as a,It as a0,ue as a1,ci as a2,F2 as a3,tk as a4,M2 as a5,$P as b,Lf as c,Aa as d,K2 as e,cb as f,NL as g,Lt as h,Et as i,le as j,mh as k,nj as l,MS as m,tj as n,m1 as o,Y2 as p,ZA as q,X as r,G2 as s,Di as t,ph as u,jy as v,c1 as w,qc as x,i4 as y,Zd as z};
