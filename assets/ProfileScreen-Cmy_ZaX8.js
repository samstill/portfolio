import{d as V,u as kt,b as Mt,r as ae,l as Tt,j as T,z as Rt,h as ut,i as ht,A as Dt,E as Lt,B as $t,C as zt,D as Ht,F as pt,G as gt,H as Ot,I as Bt,J as Nt,K as Qt}from"./index-I4BBwYdS.js";import{y as Pe,z as Wt,r as Gt,m as qt,A as mt}from"./index-DjBvL98p.js";import{m as we}from"./proxy-DMLGpHM7.js";import{A as Ke}from"./index-C2QpgPxn.js";import"./iconBase-VHV16drN.js";function Vt(p,k){return k.forEach(function($){$&&typeof $!="string"&&!Array.isArray($)&&Object.keys($).forEach(function(u){if(u!=="default"&&!(u in p)){var e=Object.getOwnPropertyDescriptor($,u);Object.defineProperty(p,u,e.get?e:{enumerable:!0,get:function(){return $[u]}})}})}),Object.freeze(p)}function yt(p,k){return new Promise(function($,u){let e;return Zt(p).then(function(t){try{return e=t,$(new Blob([k.slice(0,2),e,k.slice(2)],{type:"image/jpeg"}))}catch(d){return u(d)}},u)})}const Zt=p=>new Promise((k,$)=>{const u=new FileReader;u.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let d=0;if(t.getUint16(d)!==65496)return $("not a valid JPEG");for(d+=2;;){const s=t.getUint16(d);if(s===65498)break;const b=t.getUint16(d+2);if(s===65505&&t.getUint32(d+4)===1165519206){const w=d+10;let r;switch(t.getUint16(w)){case 18761:r=!0;break;case 19789:r=!1;break;default:return $("TIFF header contains invalid endian")}if(t.getUint16(w+2,r)!==42)return $("TIFF header contains invalid version");const i=t.getUint32(w+4,r),n=w+i+2+12*t.getUint16(w+i,r);for(let a=w+i+2;a<n;a+=12)if(t.getUint16(a,r)==274){if(t.getUint16(a+2,r)!==3)return $("Orientation data type is invalid");if(t.getUint32(a+4,r)!==1)return $("Orientation data count is invalid");t.setUint16(a+8,1,r);break}return k(e.slice(d,d+2+b))}d+=2+b}return k(new Blob)}),u.readAsArrayBuffer(p)});var Ne={},Kt={get exports(){return Ne},set exports(p){Ne=p}};(function(p){var k,$,u={};Kt.exports=u,u.parse=function(e,t){for(var d=u.bin.readUshort,s=u.bin.readUint,b=0,w={},r=new Uint8Array(e),i=r.length-4;s(r,i)!=101010256;)i--;b=i,b+=4;var n=d(r,b+=4);d(r,b+=2);var a=s(r,b+=2),h=s(r,b+=4);b+=4,b=h;for(var j=0;j<n;j++){s(r,b),b+=4,b+=4,b+=4,s(r,b+=4),a=s(r,b+=4);var F=s(r,b+=4),v=d(r,b+=4),L=d(r,b+2),_=d(r,b+4);b+=6;var I=s(r,b+=8);b+=4,b+=v+L+_,u._readLocal(r,I,w,a,F,t)}return w},u._readLocal=function(e,t,d,s,b,w){var r=u.bin.readUshort,i=u.bin.readUint;i(e,t),r(e,t+=4),r(e,t+=2);var n=r(e,t+=2);i(e,t+=2),i(e,t+=4),t+=4;var a=r(e,t+=8),h=r(e,t+=2);t+=2;var j=u.bin.readUTF8(e,t,a);if(t+=a,t+=h,w)d[j]={size:b,csize:s};else{var F=new Uint8Array(e.buffer,t);if(n==0)d[j]=new Uint8Array(F.buffer.slice(t,t+s));else{if(n!=8)throw"unknown compression method: "+n;var v=new Uint8Array(b);u.inflateRaw(F,v),d[j]=v}}},u.inflateRaw=function(e,t){return u.F.inflate(e,t)},u.inflate=function(e,t){return e[0],e[1],u.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},u.deflate=function(e,t){t==null&&(t={level:6});var d=0,s=new Uint8Array(50+Math.floor(1.1*e.length));s[d]=120,s[d+1]=156,d+=2,d=u.F.deflateRaw(e,s,d,t.level);var b=u.adler(e,0,e.length);return s[d+0]=b>>>24&255,s[d+1]=b>>>16&255,s[d+2]=b>>>8&255,s[d+3]=b>>>0&255,new Uint8Array(s.buffer,0,d+4)},u.deflateRaw=function(e,t){t==null&&(t={level:6});var d=new Uint8Array(50+Math.floor(1.1*e.length)),s=u.F.deflateRaw(e,d,s,t.level);return new Uint8Array(d.buffer,0,s)},u.encode=function(e,t){t==null&&(t=!1);var d=0,s=u.bin.writeUint,b=u.bin.writeUshort,w={};for(var r in e){var i=!u._noNeed(r)&&!t,n=e[r],a=u.crc.crc(n,0,n.length);w[r]={cpr:i,usize:n.length,crc:a,file:i?u.deflateRaw(n):n}}for(var r in w)d+=w[r].file.length+30+46+2*u.bin.sizeUTF8(r);d+=22;var h=new Uint8Array(d),j=0,F=[];for(var r in w){var v=w[r];F.push(j),j=u._writeHeader(h,j,r,v,0)}var L=0,_=j;for(var r in w)v=w[r],F.push(j),j=u._writeHeader(h,j,r,v,1,F[L++]);var I=j-_;return s(h,j,101010256),j+=4,b(h,j+=4,L),b(h,j+=2,L),s(h,j+=2,I),s(h,j+=4,_),j+=4,j+=2,h.buffer},u._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},u._writeHeader=function(e,t,d,s,b,w){var r=u.bin.writeUint,i=u.bin.writeUshort,n=s.file;return r(e,t,b==0?67324752:33639248),t+=4,b==1&&(t+=2),i(e,t,20),i(e,t+=2,0),i(e,t+=2,s.cpr?8:0),r(e,t+=2,0),r(e,t+=4,s.crc),r(e,t+=4,n.length),r(e,t+=4,s.usize),i(e,t+=4,u.bin.sizeUTF8(d)),i(e,t+=2,0),t+=2,b==1&&(t+=2,t+=2,r(e,t+=6,w),t+=4),t+=u.bin.writeUTF8(e,t,d),b==0&&(e.set(n,t),t+=n.length),t},u.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var d=t,s=0;s<8;s++)1&d?d=3988292384^d>>>1:d>>>=1;e[t]=d}return e}(),update:function(e,t,d,s){for(var b=0;b<s;b++)e=u.crc.table[255&(e^t[d+b])]^e>>>8;return e},crc:function(e,t,d){return 4294967295^u.crc.update(4294967295,e,t,d)}},u.adler=function(e,t,d){for(var s=1,b=0,w=t,r=t+d;w<r;){for(var i=Math.min(w+5552,r);w<i;)b+=s+=e[w++];s%=65521,b%=65521}return b<<16|s},u.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,d){e[t]=255&d,e[t+1]=d>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,d){e[t]=255&d,e[t+1]=d>>8&255,e[t+2]=d>>16&255,e[t+3]=d>>24&255},readASCII:function(e,t,d){for(var s="",b=0;b<d;b++)s+=String.fromCharCode(e[t+b]);return s},writeASCII:function(e,t,d){for(var s=0;s<d.length;s++)e[t+s]=d.charCodeAt(s)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,d){for(var s,b="",w=0;w<d;w++)b+="%"+u.bin.pad(e[t+w].toString(16));try{s=decodeURIComponent(b)}catch{return u.bin.readASCII(e,t,d)}return s},writeUTF8:function(e,t,d){for(var s=d.length,b=0,w=0;w<s;w++){var r=d.charCodeAt(w);if(!(4294967168&r))e[t+b]=r,b++;else if(!(4294965248&r))e[t+b]=192|r>>6,e[t+b+1]=128|r>>0&63,b+=2;else if(!(4294901760&r))e[t+b]=224|r>>12,e[t+b+1]=128|r>>6&63,e[t+b+2]=128|r>>0&63,b+=3;else{if(4292870144&r)throw"e";e[t+b]=240|r>>18,e[t+b+1]=128|r>>12&63,e[t+b+2]=128|r>>6&63,e[t+b+3]=128|r>>0&63,b+=4}}return b},sizeUTF8:function(e){for(var t=e.length,d=0,s=0;s<t;s++){var b=e.charCodeAt(s);if(!(4294967168&b))d++;else if(!(4294965248&b))d+=2;else if(!(4294901760&b))d+=3;else{if(4292870144&b)throw"e";d+=4}}return d}},u.F={},u.F.deflateRaw=function(e,t,d,s){var b=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][s],w=u.F.U,r=u.F._goodIndex;u.F._hash;var i=u.F._putsE,n=0,a=d<<3,h=0,j=e.length;if(s==0){for(;n<j;)i(t,a,n+(A=Math.min(65535,j-n))==j?1:0),a=u.F._copyExact(e,n,A,t,a+8),n+=A;return a>>>3}var F=w.lits,v=w.strt,L=w.prev,_=0,I=0,D=0,g=0,P=0,f=0;for(j>2&&(v[f=u.F._hash(e,0)]=0),n=0;n<j;n++){if(P=f,n+1<j-2){f=u.F._hash(e,n+1);var l=n+1&32767;L[l]=v[f],v[f]=l}if(h<=n){(_>14e3||I>26697)&&j-n>100&&(h<n&&(F[_]=n-h,_+=2,h=n),a=u.F._writeBlock(n==j-1||h==j?1:0,F,_,g,e,D,n-D,t,a),_=I=g=0,D=n);var x=0;n<j-2&&(x=u.F._bestMatch(e,n,L,P,Math.min(b[2],j-n),b[3]));var A=x>>>16,y=65535&x;if(x!=0){y=65535&x;var C=r(A=x>>>16,w.of0);w.lhst[257+C]++;var m=r(y,w.df0);w.dhst[m]++,g+=w.exb[C]+w.dxb[m],F[_]=A<<23|n-h,F[_+1]=y<<16|C<<8|m,_+=2,h=n+A}else w.lhst[e[n]]++;I++}}for(D==n&&e.length!=0||(h<n&&(F[_]=n-h,_+=2,h=n),a=u.F._writeBlock(1,F,_,g,e,D,n-D,t,a),_=0,I=0,_=I=g=0,D=n);7&a;)a++;return a>>>3},u.F._bestMatch=function(e,t,d,s,b,w){var r=32767&t,i=d[r],n=r-i+32768&32767;if(i==r||s!=u.F._hash(e,t-n))return 0;for(var a=0,h=0,j=Math.min(32767,t);n<=j&&--w!=0&&i!=r;){if(a==0||e[t+a]==e[t+a-n]){var F=u.F._howLong(e,t,n);if(F>a){if(h=n,(a=F)>=b)break;n+2<F&&(F=n+2);for(var v=0,L=0;L<F-2;L++){var _=t-n+L+32768&32767,I=_-d[_]+32768&32767;I>v&&(v=I,i=_)}}}n+=(r=i)-(i=d[r])+32768&32767}return a<<16|h},u.F._howLong=function(e,t,d){if(e[t]!=e[t-d]||e[t+1]!=e[t+1-d]||e[t+2]!=e[t+2-d])return 0;var s=t,b=Math.min(e.length,t+258);for(t+=3;t<b&&e[t]==e[t-d];)t++;return t-s},u.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},u.saved=0,u.F._writeBlock=function(e,t,d,s,b,w,r,i,n){var a,h,j,F,v,L,_,I,D,g=u.F.U,P=u.F._putsF,f=u.F._putsE;g.lhst[256]++,h=(a=u.F.getTrees())[0],j=a[1],F=a[2],v=a[3],L=a[4],_=a[5],I=a[6],D=a[7];var l=32+(n+3&7?8-(n+3&7):0)+(r<<3),x=s+u.F.contSize(g.fltree,g.lhst)+u.F.contSize(g.fdtree,g.dhst),A=s+u.F.contSize(g.ltree,g.lhst)+u.F.contSize(g.dtree,g.dhst);A+=14+3*_+u.F.contSize(g.itree,g.ihst)+(2*g.ihst[16]+3*g.ihst[17]+7*g.ihst[18]);for(var y=0;y<286;y++)g.lhst[y]=0;for(y=0;y<30;y++)g.dhst[y]=0;for(y=0;y<19;y++)g.ihst[y]=0;var C=l<x&&l<A?0:x<A?1:2;if(P(i,n,e),P(i,n+1,C),n+=3,C==0){for(;7&n;)n++;n=u.F._copyExact(b,w,r,i,n)}else{var m,E;if(C==1&&(m=g.fltree,E=g.fdtree),C==2){u.F.makeCodes(g.ltree,h),u.F.revCodes(g.ltree,h),u.F.makeCodes(g.dtree,j),u.F.revCodes(g.dtree,j),u.F.makeCodes(g.itree,F),u.F.revCodes(g.itree,F),m=g.ltree,E=g.dtree,f(i,n,v-257),f(i,n+=5,L-1),f(i,n+=5,_-4),n+=4;for(var c=0;c<_;c++)f(i,n+3*c,g.itree[1+(g.ordr[c]<<1)]);n+=3*_,n=u.F._codeTiny(I,g.itree,i,n),n=u.F._codeTiny(D,g.itree,i,n)}for(var o=w,M=0;M<d;M+=2){for(var U=t[M],R=U>>>23,N=o+(8388607&U);o<N;)n=u.F._writeLit(b[o++],m,i,n);if(R!=0){var H=t[M+1],O=H>>16,z=H>>8&255,S=255&H;f(i,n=u.F._writeLit(257+z,m,i,n),R-g.of0[z]),n+=g.exb[z],P(i,n=u.F._writeLit(S,E,i,n),O-g.df0[S]),n+=g.dxb[S],o+=R}}n=u.F._writeLit(256,m,i,n)}return n},u.F._copyExact=function(e,t,d,s,b){var w=b>>>3;return s[w]=d,s[w+1]=d>>>8,s[w+2]=255-s[w],s[w+3]=255-s[w+1],w+=4,s.set(new Uint8Array(e.buffer,t,d),w),b+(d+4<<3)},u.F.getTrees=function(){for(var e=u.F.U,t=u.F._hufTree(e.lhst,e.ltree,15),d=u.F._hufTree(e.dhst,e.dtree,15),s=[],b=u.F._lenCodes(e.ltree,s),w=[],r=u.F._lenCodes(e.dtree,w),i=0;i<s.length;i+=2)e.ihst[s[i]]++;for(i=0;i<w.length;i+=2)e.ihst[w[i]]++;for(var n=u.F._hufTree(e.ihst,e.itree,7),a=19;a>4&&e.itree[1+(e.ordr[a-1]<<1)]==0;)a--;return[t,d,n,b,r,a,s,w]},u.F.getSecond=function(e){for(var t=[],d=0;d<e.length;d+=2)t.push(e[d+1]);return t},u.F.nonZero=function(e){for(var t="",d=0;d<e.length;d+=2)e[d+1]!=0&&(t+=(d>>1)+",");return t},u.F.contSize=function(e,t){for(var d=0,s=0;s<t.length;s++)d+=t[s]*e[1+(s<<1)];return d},u.F._codeTiny=function(e,t,d,s){for(var b=0;b<e.length;b+=2){var w=e[b],r=e[b+1];s=u.F._writeLit(w,t,d,s);var i=w==16?2:w==17?3:7;w>15&&(u.F._putsE(d,s,r,i),s+=i)}return s},u.F._lenCodes=function(e,t){for(var d=e.length;d!=2&&e[d-1]==0;)d-=2;for(var s=0;s<d;s+=2){var b=e[s+1],w=s+3<d?e[s+3]:-1,r=s+5<d?e[s+5]:-1,i=s==0?-1:e[s-1];if(b==0&&w==b&&r==b){for(var n=s+5;n+2<d&&e[n+2]==b;)n+=2;(a=Math.min(n+1-s>>>1,138))<11?t.push(17,a-3):t.push(18,a-11),s+=2*a-2}else if(b==i&&w==b&&r==b){for(n=s+5;n+2<d&&e[n+2]==b;)n+=2;var a=Math.min(n+1-s>>>1,6);t.push(16,a-3),s+=2*a-2}else t.push(b,0)}return d>>>1},u.F._hufTree=function(e,t,d){var s=[],b=e.length,w=t.length,r=0;for(r=0;r<w;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<b;r++)e[r]!=0&&s.push({lit:r,f:e[r]});var i=s.length,n=s.slice(0);if(i==0)return 0;if(i==1){var a=s[0].lit;return n=a==0?1:0,t[1+(a<<1)]=1,t[1+(n<<1)]=1,1}s.sort(function(I,D){return I.f-D.f});var h=s[0],j=s[1],F=0,v=1,L=2;for(s[0]={lit:-1,f:h.f+j.f,l:h,r:j,d:0};v!=i-1;)h=F!=v&&(L==i||s[F].f<s[L].f)?s[F++]:s[L++],j=F!=v&&(L==i||s[F].f<s[L].f)?s[F++]:s[L++],s[v++]={lit:-1,f:h.f+j.f,l:h,r:j};var _=u.F.setDepth(s[v-1],0);for(_>d&&(u.F.restrictDepth(n,d,_),_=d),r=0;r<i;r++)t[1+(n[r].lit<<1)]=n[r].d;return _},u.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(u.F.setDepth(e.l,t+1),u.F.setDepth(e.r,t+1))},u.F.restrictDepth=function(e,t,d){var s=0,b=1<<d-t,w=0;for(e.sort(function(i,n){return n.d==i.d?i.f-n.f:n.d-i.d}),s=0;s<e.length&&e[s].d>t;s++){var r=e[s].d;e[s].d=t,w+=b-(1<<d-r)}for(w>>>=d-t;w>0;)(r=e[s].d)<t?(e[s].d++,w-=1<<t-r-1):s++;for(;s>=0;s--)e[s].d==t&&w<0&&(e[s].d--,w++);w!=0&&console.log("debt left")},u.F._goodIndex=function(e,t){var d=0;return t[16|d]<=e&&(d|=16),t[8|d]<=e&&(d|=8),t[4|d]<=e&&(d|=4),t[2|d]<=e&&(d|=2),t[1|d]<=e&&(d|=1),d},u.F._writeLit=function(e,t,d,s){return u.F._putsF(d,s,t[e<<1]),s+t[1+(e<<1)]},u.F.inflate=function(e,t){var d=Uint8Array;if(e[0]==3&&e[1]==0)return t||new d(0);var s=u.F,b=s._bitsF,w=s._bitsE,r=s._decodeTiny,i=s.makeCodes,n=s.codes2map,a=s._get17,h=s.U,j=t==null;j&&(t=new d(e.length>>>2<<3));for(var F,v,L=0,_=0,I=0,D=0,g=0,P=0,f=0,l=0,x=0;L==0;)if(L=b(e,x,1),_=b(e,x+1,2),x+=3,_!=0){if(j&&(t=u.F._check(t,l+(1<<17))),_==1&&(F=h.flmap,v=h.fdmap,P=511,f=31),_==2){I=w(e,x,5)+257,D=w(e,x+5,5)+1,g=w(e,x+10,4)+4,x+=14;for(var A=0;A<38;A+=2)h.itree[A]=0,h.itree[A+1]=0;var y=1;for(A=0;A<g;A++){var C=w(e,x+3*A,3);h.itree[1+(h.ordr[A]<<1)]=C,C>y&&(y=C)}x+=3*g,i(h.itree,y),n(h.itree,y,h.imap),F=h.lmap,v=h.dmap,x=r(h.imap,(1<<y)-1,I+D,e,x,h.ttree);var m=s._copyOut(h.ttree,0,I,h.ltree);P=(1<<m)-1;var E=s._copyOut(h.ttree,I,D,h.dtree);f=(1<<E)-1,i(h.ltree,m),n(h.ltree,m,F),i(h.dtree,E),n(h.dtree,E,v)}for(;;){var c=F[a(e,x)&P];x+=15&c;var o=c>>>4;if(!(o>>>8))t[l++]=o;else{if(o==256)break;var M=l+o-254;if(o>264){var U=h.ldef[o-257];M=l+(U>>>3)+w(e,x,7&U),x+=7&U}var R=v[a(e,x)&f];x+=15&R;var N=R>>>4,H=h.ddef[N],O=(H>>>4)+b(e,x,15&H);for(x+=15&H,j&&(t=u.F._check(t,l+(1<<17)));l<M;)t[l]=t[l++-O],t[l]=t[l++-O],t[l]=t[l++-O],t[l]=t[l++-O];l=M}}}else{7&x&&(x+=8-(7&x));var z=4+(x>>>3),S=e[z-4]|e[z-3]<<8;j&&(t=u.F._check(t,l+S)),t.set(new d(e.buffer,e.byteOffset+z,S),l),x=z+S<<3,l+=S}return t.length==l?t:t.slice(0,l)},u.F._check=function(e,t){var d=e.length;if(t<=d)return e;var s=new Uint8Array(Math.max(d<<1,t));return s.set(e,0),s},u.F._decodeTiny=function(e,t,d,s,b,w){for(var r=u.F._bitsE,i=u.F._get17,n=0;n<d;){var a=e[i(s,b)&t];b+=15&a;var h=a>>>4;if(h<=15)w[n]=h,n++;else{var j=0,F=0;h==16?(F=3+r(s,b,2),b+=2,j=w[n-1]):h==17?(F=3+r(s,b,3),b+=3):h==18&&(F=11+r(s,b,7),b+=7);for(var v=n+F;n<v;)w[n]=j,n++}}return b},u.F._copyOut=function(e,t,d,s){for(var b=0,w=0,r=s.length>>>1;w<d;){var i=e[w+t];s[w<<1]=0,s[1+(w<<1)]=i,i>b&&(b=i),w++}for(;w<r;)s[w<<1]=0,s[1+(w<<1)]=0,w++;return b},u.F.makeCodes=function(e,t){for(var d,s,b,w,r=u.F.U,i=e.length,n=r.bl_count,a=0;a<=t;a++)n[a]=0;for(a=1;a<i;a+=2)n[e[a]]++;var h=r.next_code;for(d=0,n[0]=0,s=1;s<=t;s++)d=d+n[s-1]<<1,h[s]=d;for(b=0;b<i;b+=2)(w=e[b+1])!=0&&(e[b]=h[w],h[w]++)},u.F.codes2map=function(e,t,d){for(var s=e.length,b=u.F.U.rev15,w=0;w<s;w+=2)if(e[w+1]!=0)for(var r=w>>1,i=e[w+1],n=r<<4|i,a=t-i,h=e[w]<<a,j=h+(1<<a);h!=j;)d[b[h]>>>15-t]=n,h++},u.F.revCodes=function(e,t){for(var d=u.F.U.rev15,s=15-t,b=0;b<e.length;b+=2){var w=e[b]<<t-e[b+1];e[b]=d[w]>>>s}},u.F._putsE=function(e,t,d){d<<=7&t;var s=t>>>3;e[s]|=d,e[s+1]|=d>>>8},u.F._putsF=function(e,t,d){d<<=7&t;var s=t>>>3;e[s]|=d,e[s+1]|=d>>>8,e[s+2]|=d>>>16},u.F._bitsE=function(e,t,d){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<d)-1},u.F._bitsF=function(e,t,d){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<d)-1},u.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},u.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},u.F.U=(k=Uint16Array,$=Uint32Array,{next_code:new k(16),bl_count:new k(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new k(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new $(32),flmap:new k(512),fltree:[],fdmap:new k(32),fdtree:[],lmap:new k(32768),ltree:[],ttree:[],dmap:new k(32768),dtree:[],imap:new k(512),itree:[],rev15:new k(32768),lhst:new $(286),dhst:new $(30),ihst:new $(19),lits:new $(15e3),strt:new k(65536),prev:new k(32768)}),function(){for(var e=u.F.U,t=0;t<32768;t++){var d=t;d=(4278255360&(d=(4042322160&(d=(3435973836&(d=(2863311530&d)>>>1|(1431655765&d)<<1))>>>2|(858993459&d)<<2))>>>4|(252645135&d)<<4))>>>8|(16711935&d)<<8,e.rev15[t]=(d>>>16|d<<16)>>>17}function s(b,w,r){for(;w--!=0;)b.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];s(e.fltree,144,8),s(e.fltree,112,9),s(e.fltree,24,7),s(e.fltree,8,8),u.F.makeCodes(e.fltree,9),u.F.codes2map(e.fltree,9,e.flmap),u.F.revCodes(e.fltree,9),s(e.fdtree,32,5),u.F.makeCodes(e.fdtree,5),u.F.codes2map(e.fdtree,5,e.fdmap),u.F.revCodes(e.fdtree,5),s(e.itree,19,0),s(e.ltree,286,0),s(e.dtree,30,0),s(e.ttree,320,0)}()})();var Xt=Vt({__proto__:null,default:Ne},[Ne]);const me=function(){var p={nextZero(r,i){for(;r[i]!=0;)i++;return i},readUshort:(r,i)=>r[i]<<8|r[i+1],writeUshort(r,i,n){r[i]=n>>8&255,r[i+1]=255&n},readUint:(r,i)=>16777216*r[i]+(r[i+1]<<16|r[i+2]<<8|r[i+3]),writeUint(r,i,n){r[i]=n>>24&255,r[i+1]=n>>16&255,r[i+2]=n>>8&255,r[i+3]=255&n},readASCII(r,i,n){let a="";for(let h=0;h<n;h++)a+=String.fromCharCode(r[i+h]);return a},writeASCII(r,i,n){for(let a=0;a<n.length;a++)r[i+a]=n.charCodeAt(a)},readBytes(r,i,n){const a=[];for(let h=0;h<n;h++)a.push(r[i+h]);return a},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,i,n){let a,h="";for(let j=0;j<n;j++)h+=`%${p.pad(r[i+j].toString(16))}`;try{a=decodeURIComponent(h)}catch{return p.readASCII(r,i,n)}return a}};function k(r,i,n,a){const h=i*n,j=t(a),F=Math.ceil(i*j/8),v=new Uint8Array(4*h),L=new Uint32Array(v.buffer),{ctype:_}=a,{depth:I}=a,D=p.readUshort;if(_==6){const U=h<<2;if(I==8)for(var g=0;g<U;g+=4)v[g]=r[g],v[g+1]=r[g+1],v[g+2]=r[g+2],v[g+3]=r[g+3];if(I==16)for(g=0;g<U;g++)v[g]=r[g<<1]}else if(_==2){const U=a.tabs.tRNS;if(U==null){if(I==8)for(g=0;g<h;g++){var P=3*g;L[g]=255<<24|r[P+2]<<16|r[P+1]<<8|r[P]}if(I==16)for(g=0;g<h;g++)P=6*g,L[g]=255<<24|r[P+4]<<16|r[P+2]<<8|r[P]}else{var f=U[0];const R=U[1],N=U[2];if(I==8)for(g=0;g<h;g++){var l=g<<2;P=3*g,L[g]=255<<24|r[P+2]<<16|r[P+1]<<8|r[P],r[P]==f&&r[P+1]==R&&r[P+2]==N&&(v[l+3]=0)}if(I==16)for(g=0;g<h;g++)l=g<<2,P=6*g,L[g]=255<<24|r[P+4]<<16|r[P+2]<<8|r[P],D(r,P)==f&&D(r,P+2)==R&&D(r,P+4)==N&&(v[l+3]=0)}}else if(_==3){const U=a.tabs.PLTE,R=a.tabs.tRNS,N=R?R.length:0;if(I==1)for(var x=0;x<n;x++){var A=x*F,y=x*i;for(g=0;g<i;g++){l=y+g<<2;var C=3*(m=r[A+(g>>3)]>>7-((7&g)<<0)&1);v[l]=U[C],v[l+1]=U[C+1],v[l+2]=U[C+2],v[l+3]=m<N?R[m]:255}}if(I==2)for(x=0;x<n;x++)for(A=x*F,y=x*i,g=0;g<i;g++)l=y+g<<2,C=3*(m=r[A+(g>>2)]>>6-((3&g)<<1)&3),v[l]=U[C],v[l+1]=U[C+1],v[l+2]=U[C+2],v[l+3]=m<N?R[m]:255;if(I==4)for(x=0;x<n;x++)for(A=x*F,y=x*i,g=0;g<i;g++)l=y+g<<2,C=3*(m=r[A+(g>>1)]>>4-((1&g)<<2)&15),v[l]=U[C],v[l+1]=U[C+1],v[l+2]=U[C+2],v[l+3]=m<N?R[m]:255;if(I==8)for(g=0;g<h;g++){var m;l=g<<2,C=3*(m=r[g]),v[l]=U[C],v[l+1]=U[C+1],v[l+2]=U[C+2],v[l+3]=m<N?R[m]:255}}else if(_==4){if(I==8)for(g=0;g<h;g++){l=g<<2;var E=r[c=g<<1];v[l]=E,v[l+1]=E,v[l+2]=E,v[l+3]=r[c+1]}if(I==16)for(g=0;g<h;g++){var c;l=g<<2,E=r[c=g<<2],v[l]=E,v[l+1]=E,v[l+2]=E,v[l+3]=r[c+2]}}else if(_==0)for(f=a.tabs.tRNS?a.tabs.tRNS:-1,x=0;x<n;x++){const U=x*F,R=x*i;if(I==1)for(var o=0;o<i;o++){var M=(E=255*(r[U+(o>>>3)]>>>7-(7&o)&1))==255*f?0:255;L[R+o]=M<<24|E<<16|E<<8|E}else if(I==2)for(o=0;o<i;o++)M=(E=85*(r[U+(o>>>2)]>>>6-((3&o)<<1)&3))==85*f?0:255,L[R+o]=M<<24|E<<16|E<<8|E;else if(I==4)for(o=0;o<i;o++)M=(E=17*(r[U+(o>>>1)]>>>4-((1&o)<<2)&15))==17*f?0:255,L[R+o]=M<<24|E<<16|E<<8|E;else if(I==8)for(o=0;o<i;o++)M=(E=r[U+o])==f?0:255,L[R+o]=M<<24|E<<16|E<<8|E;else if(I==16)for(o=0;o<i;o++)E=r[U+(o<<1)],M=D(r,U+(o<<1))==f?0:255,L[R+o]=M<<24|E<<16|E<<8|E}return v}function $(r,i,n,a){const h=t(r),j=Math.ceil(n*h/8),F=new Uint8Array((j+1+r.interlace)*a);return i=r.tabs.CgBI?e(i,F):u(i,F),r.interlace==0?i=d(i,r,0,n,a):r.interlace==1&&(i=function(L,_){const I=_.width,D=_.height,g=t(_),P=g>>3,f=Math.ceil(I*g/8),l=new Uint8Array(D*f);let x=0;const A=[0,0,4,0,2,0,1],y=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],m=[8,8,4,4,2,2,1];let E=0;for(;E<7;){const o=C[E],M=m[E];let U=0,R=0,N=A[E];for(;N<D;)N+=o,R++;let H=y[E];for(;H<I;)H+=M,U++;const O=Math.ceil(U*g/8);d(L,_,x,U,R);let z=0,S=A[E];for(;S<D;){let Q=y[E],Y=x+z*O<<3;for(;Q<I;){var c;if(g==1&&(c=(c=L[Y>>3])>>7-(7&Y)&1,l[S*f+(Q>>3)]|=c<<7-((7&Q)<<0)),g==2&&(c=(c=L[Y>>3])>>6-(7&Y)&3,l[S*f+(Q>>2)]|=c<<6-((3&Q)<<1)),g==4&&(c=(c=L[Y>>3])>>4-(7&Y)&15,l[S*f+(Q>>1)]|=c<<4-((1&Q)<<2)),g>=8){const Z=S*f+Q*P;for(let q=0;q<P;q++)l[Z+q]=L[(Y>>3)+q]}Y+=g,Q+=M}z++,S+=o}U*R!=0&&(x+=R*(1+O)),E+=1}return l}(i,r)),i}function u(r,i){return e(new Uint8Array(r.buffer,2,r.length-6),i)}var e=function(){const r={H:{}};return r.H.N=function(i,n){const a=Uint8Array;let h,j,F=0,v=0,L=0,_=0,I=0,D=0,g=0,P=0,f=0;if(i[0]==3&&i[1]==0)return n||new a(0);const l=r.H,x=l.b,A=l.e,y=l.R,C=l.n,m=l.A,E=l.Z,c=l.m,o=n==null;for(o&&(n=new a(i.length>>>2<<5));F==0;)if(F=x(i,f,1),v=x(i,f+1,2),f+=3,v!=0){if(o&&(n=r.H.W(n,P+(1<<17))),v==1&&(h=c.J,j=c.h,D=511,g=31),v==2){L=A(i,f,5)+257,_=A(i,f+5,5)+1,I=A(i,f+10,4)+4,f+=14;let U=1;for(var M=0;M<38;M+=2)c.Q[M]=0,c.Q[M+1]=0;for(M=0;M<I;M++){const H=A(i,f+3*M,3);c.Q[1+(c.X[M]<<1)]=H,H>U&&(U=H)}f+=3*I,C(c.Q,U),m(c.Q,U,c.u),h=c.w,j=c.d,f=y(c.u,(1<<U)-1,L+_,i,f,c.v);const R=l.V(c.v,0,L,c.C);D=(1<<R)-1;const N=l.V(c.v,L,_,c.D);g=(1<<N)-1,C(c.C,R),m(c.C,R,h),C(c.D,N),m(c.D,N,j)}for(;;){const U=h[E(i,f)&D];f+=15&U;const R=U>>>4;if(!(R>>>8))n[P++]=R;else{if(R==256)break;{let N=P+R-254;if(R>264){const Q=c.q[R-257];N=P+(Q>>>3)+A(i,f,7&Q),f+=7&Q}const H=j[E(i,f)&g];f+=15&H;const O=H>>>4,z=c.c[O],S=(z>>>4)+x(i,f,15&z);for(f+=15&z;P<N;)n[P]=n[P++-S],n[P]=n[P++-S],n[P]=n[P++-S],n[P]=n[P++-S];P=N}}}}else{7&f&&(f+=8-(7&f));const U=4+(f>>>3),R=i[U-4]|i[U-3]<<8;o&&(n=r.H.W(n,P+R)),n.set(new a(i.buffer,i.byteOffset+U,R),P),f=U+R<<3,P+=R}return n.length==P?n:n.slice(0,P)},r.H.W=function(i,n){const a=i.length;if(n<=a)return i;const h=new Uint8Array(a<<1);return h.set(i,0),h},r.H.R=function(i,n,a,h,j,F){const v=r.H.e,L=r.H.Z;let _=0;for(;_<a;){const I=i[L(h,j)&n];j+=15&I;const D=I>>>4;if(D<=15)F[_]=D,_++;else{let g=0,P=0;D==16?(P=3+v(h,j,2),j+=2,g=F[_-1]):D==17?(P=3+v(h,j,3),j+=3):D==18&&(P=11+v(h,j,7),j+=7);const f=_+P;for(;_<f;)F[_]=g,_++}}return j},r.H.V=function(i,n,a,h){let j=0,F=0;const v=h.length>>>1;for(;F<a;){const L=i[F+n];h[F<<1]=0,h[1+(F<<1)]=L,L>j&&(j=L),F++}for(;F<v;)h[F<<1]=0,h[1+(F<<1)]=0,F++;return j},r.H.n=function(i,n){const a=r.H.m,h=i.length;let j,F,v,L;const _=a.j;for(var I=0;I<=n;I++)_[I]=0;for(I=1;I<h;I+=2)_[i[I]]++;const D=a.K;for(j=0,_[0]=0,F=1;F<=n;F++)j=j+_[F-1]<<1,D[F]=j;for(v=0;v<h;v+=2)L=i[v+1],L!=0&&(i[v]=D[L],D[L]++)},r.H.A=function(i,n,a){const h=i.length,j=r.H.m.r;for(let F=0;F<h;F+=2)if(i[F+1]!=0){const v=F>>1,L=i[F+1],_=v<<4|L,I=n-L;let D=i[F]<<I;const g=D+(1<<I);for(;D!=g;)a[j[D]>>>15-n]=_,D++}},r.H.l=function(i,n){const a=r.H.m.r,h=15-n;for(let j=0;j<i.length;j+=2){const F=i[j]<<n-i[j+1];i[j]=a[F]>>>h}},r.H.M=function(i,n,a){a<<=7&n;const h=n>>>3;i[h]|=a,i[h+1]|=a>>>8},r.H.I=function(i,n,a){a<<=7&n;const h=n>>>3;i[h]|=a,i[h+1]|=a>>>8,i[h+2]|=a>>>16},r.H.e=function(i,n,a){return(i[n>>>3]|i[1+(n>>>3)]<<8)>>>(7&n)&(1<<a)-1},r.H.b=function(i,n,a){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16)>>>(7&n)&(1<<a)-1},r.H.Z=function(i,n){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16)>>>(7&n)},r.H.i=function(i,n){return(i[n>>>3]|i[1+(n>>>3)]<<8|i[2+(n>>>3)]<<16|i[3+(n>>>3)]<<24)>>>(7&n)},r.H.m=function(){const i=Uint16Array,n=Uint32Array;return{K:new i(16),j:new i(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new i(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new i(512),_:[],h:new i(32),$:[],w:new i(32768),C:[],v:[],d:new i(32768),D:[],u:new i(512),Q:[],r:new i(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new i(65536),g:new i(32768)}}(),function(){const i=r.H.m;for(var n=0;n<32768;n++){let h=n;h=(2863311530&h)>>>1|(1431655765&h)<<1,h=(3435973836&h)>>>2|(858993459&h)<<2,h=(4042322160&h)>>>4|(252645135&h)<<4,h=(4278255360&h)>>>8|(16711935&h)<<8,i.r[n]=(h>>>16|h<<16)>>>17}function a(h,j,F){for(;j--!=0;)h.push(0,F)}for(n=0;n<32;n++)i.q[n]=i.S[n]<<3|i.T[n],i.c[n]=i.p[n]<<4|i.z[n];a(i._,144,8),a(i._,112,9),a(i._,24,7),a(i._,8,8),r.H.n(i._,9),r.H.A(i._,9,i.J),r.H.l(i._,9),a(i.$,32,5),r.H.n(i.$,5),r.H.A(i.$,5,i.h),r.H.l(i.$,5),a(i.Q,19,0),a(i.C,286,0),a(i.D,30,0),a(i.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function d(r,i,n,a,h){let j=t(i);const F=Math.ceil(a*j/8);let v,L;j=Math.ceil(j/8);let _=r[n],I=0;if(_>1&&(r[n]=[0,0,1][_-2]),_==3)for(I=j;I<F;I++)r[I+1]=r[I+1]+(r[I+1-j]>>>1)&255;for(let D=0;D<h;D++)if(v=n+D*F,L=v+D+1,_=r[L-1],I=0,_==0)for(;I<F;I++)r[v+I]=r[L+I];else if(_==1){for(;I<j;I++)r[v+I]=r[L+I];for(;I<F;I++)r[v+I]=r[L+I]+r[v+I-j]}else if(_==2)for(;I<F;I++)r[v+I]=r[L+I]+r[v+I-F];else if(_==3){for(;I<j;I++)r[v+I]=r[L+I]+(r[v+I-F]>>>1);for(;I<F;I++)r[v+I]=r[L+I]+(r[v+I-F]+r[v+I-j]>>>1)}else{for(;I<j;I++)r[v+I]=r[L+I]+s(0,r[v+I-F],0);for(;I<F;I++)r[v+I]=r[L+I]+s(r[v+I-j],r[v+I-F],r[v+I-j-F])}return r}function s(r,i,n){const a=r+i-n,h=a-r,j=a-i,F=a-n;return h*h<=j*j&&h*h<=F*F?r:j*j<=F*F?i:n}function b(r,i,n){n.width=p.readUint(r,i),i+=4,n.height=p.readUint(r,i),i+=4,n.depth=r[i],i++,n.ctype=r[i],i++,n.compress=r[i],i++,n.filter=r[i],i++,n.interlace=r[i],i++}function w(r,i,n,a,h,j,F,v,L){const _=Math.min(i,h),I=Math.min(n,j);let D=0,g=0;for(let E=0;E<I;E++)for(let c=0;c<_;c++)if(F>=0&&v>=0?(D=E*i+c<<2,g=(v+E)*h+F+c<<2):(D=(-v+E)*i-F+c<<2,g=E*h+c<<2),L==0)a[g]=r[D],a[g+1]=r[D+1],a[g+2]=r[D+2],a[g+3]=r[D+3];else if(L==1){var P=r[D+3]*.00392156862745098,f=r[D]*P,l=r[D+1]*P,x=r[D+2]*P,A=a[g+3]*(1/255),y=a[g]*A,C=a[g+1]*A,m=a[g+2]*A;const o=1-P,M=P+A*o,U=M==0?0:1/M;a[g+3]=255*M,a[g+0]=(f+y*o)*U,a[g+1]=(l+C*o)*U,a[g+2]=(x+m*o)*U}else if(L==2)P=r[D+3],f=r[D],l=r[D+1],x=r[D+2],A=a[g+3],y=a[g],C=a[g+1],m=a[g+2],P==A&&f==y&&l==C&&x==m?(a[g]=0,a[g+1]=0,a[g+2]=0,a[g+3]=0):(a[g]=f,a[g+1]=l,a[g+2]=x,a[g+3]=P);else if(L==3){if(P=r[D+3],f=r[D],l=r[D+1],x=r[D+2],A=a[g+3],y=a[g],C=a[g+1],m=a[g+2],P==A&&f==y&&l==C&&x==m)continue;if(P<220&&A>20)return!1}return!0}return{decode:function(i){const n=new Uint8Array(i);let a=8;const h=p,j=h.readUshort,F=h.readUint,v={tabs:{},frames:[]},L=new Uint8Array(n.length);let _,I=0,D=0;const g=[137,80,78,71,13,10,26,10];for(var P=0;P<8;P++)if(n[P]!=g[P])throw"The input is not a PNG file!";for(;a<n.length;){const E=h.readUint(n,a);a+=4;const c=h.readASCII(n,a,4);if(a+=4,c=="IHDR")b(n,a,v);else if(c=="iCCP"){for(var f=a;n[f]!=0;)f++;h.readASCII(n,a,f-a),n[f+1];const o=n.slice(f+2,a+E);let M=null;try{M=u(o)}catch{M=e(o)}v.tabs[c]=M}else if(c=="CgBI")v.tabs[c]=n.slice(a,a+4);else if(c=="IDAT"){for(P=0;P<E;P++)L[I+P]=n[a+P];I+=E}else if(c=="acTL")v.tabs[c]={num_frames:F(n,a),num_plays:F(n,a+4)},_=new Uint8Array(n.length);else if(c=="fcTL"){D!=0&&((m=v.frames[v.frames.length-1]).data=$(v,_.slice(0,D),m.rect.width,m.rect.height),D=0);const o={x:F(n,a+12),y:F(n,a+16),width:F(n,a+4),height:F(n,a+8)};let M=j(n,a+22);M=j(n,a+20)/(M==0?100:M);const U={rect:o,delay:Math.round(1e3*M),dispose:n[a+24],blend:n[a+25]};v.frames.push(U)}else if(c=="fdAT"){for(P=0;P<E-4;P++)_[D+P]=n[a+P+4];D+=E-4}else if(c=="pHYs")v.tabs[c]=[h.readUint(n,a),h.readUint(n,a+4),n[a+8]];else if(c=="cHRM")for(v.tabs[c]=[],P=0;P<8;P++)v.tabs[c].push(h.readUint(n,a+4*P));else if(c=="tEXt"||c=="zTXt"){v.tabs[c]==null&&(v.tabs[c]={});var l=h.nextZero(n,a),x=h.readASCII(n,a,l-a),A=a+E-l-1;if(c=="tEXt")C=h.readASCII(n,l+1,A);else{var y=u(n.slice(l+2,l+2+A));C=h.readUTF8(y,0,y.length)}v.tabs[c][x]=C}else if(c=="iTXt"){v.tabs[c]==null&&(v.tabs[c]={}),l=0,f=a,l=h.nextZero(n,f),x=h.readASCII(n,f,l-f);const o=n[f=l+1];var C;n[f+1],f+=2,l=h.nextZero(n,f),h.readASCII(n,f,l-f),f=l+1,l=h.nextZero(n,f),h.readUTF8(n,f,l-f),A=E-((f=l+1)-a),o==0?C=h.readUTF8(n,f,A):(y=u(n.slice(f,f+A)),C=h.readUTF8(y,0,y.length)),v.tabs[c][x]=C}else if(c=="PLTE")v.tabs[c]=h.readBytes(n,a,E);else if(c=="hIST"){const o=v.tabs.PLTE.length/3;for(v.tabs[c]=[],P=0;P<o;P++)v.tabs[c].push(j(n,a+2*P))}else if(c=="tRNS")v.ctype==3?v.tabs[c]=h.readBytes(n,a,E):v.ctype==0?v.tabs[c]=j(n,a):v.ctype==2&&(v.tabs[c]=[j(n,a),j(n,a+2),j(n,a+4)]);else if(c=="gAMA")v.tabs[c]=h.readUint(n,a)/1e5;else if(c=="sRGB")v.tabs[c]=n[a];else if(c=="bKGD")v.ctype==0||v.ctype==4?v.tabs[c]=[j(n,a)]:v.ctype==2||v.ctype==6?v.tabs[c]=[j(n,a),j(n,a+2),j(n,a+4)]:v.ctype==3&&(v.tabs[c]=n[a]);else if(c=="IEND")break;a+=E,h.readUint(n,a),a+=4}var m;return D!=0&&((m=v.frames[v.frames.length-1]).data=$(v,_.slice(0,D),m.rect.width,m.rect.height)),v.data=$(v,L,v.width,v.height),delete v.compress,delete v.interlace,delete v.filter,v},toRGBA8:function(i){const n=i.width,a=i.height;if(i.tabs.acTL==null)return[k(i.data,n,a,i).buffer];const h=[];i.frames[0].data==null&&(i.frames[0].data=i.data);const j=n*a*4,F=new Uint8Array(j),v=new Uint8Array(j),L=new Uint8Array(j);for(let I=0;I<i.frames.length;I++){const D=i.frames[I],g=D.rect.x,P=D.rect.y,f=D.rect.width,l=D.rect.height,x=k(D.data,f,l,i);if(I!=0)for(var _=0;_<j;_++)L[_]=F[_];if(D.blend==0?w(x,f,l,F,n,a,g,P,0):D.blend==1&&w(x,f,l,F,n,a,g,P,1),h.push(F.buffer.slice(0)),D.dispose!=0){if(D.dispose==1)w(v,f,l,F,n,a,g,P,0);else if(D.dispose==2)for(_=0;_<j;_++)F[_]=L[_]}}return h},_paeth:s,_copyTile:w,_bin:p}}();(function(){const{_copyTile:p}=me,{_bin:k}=me,$=me._paeth;var u={table:function(){const f=new Uint32Array(256);for(let l=0;l<256;l++){let x=l;for(let A=0;A<8;A++)1&x?x=3988292384^x>>>1:x>>>=1;f[l]=x}return f}(),update(f,l,x,A){for(let y=0;y<A;y++)f=u.table[255&(f^l[x+y])]^f>>>8;return f},crc:(f,l,x)=>4294967295^u.update(4294967295,f,l,x)};function e(f,l,x,A){l[x]+=f[0]*A>>4,l[x+1]+=f[1]*A>>4,l[x+2]+=f[2]*A>>4,l[x+3]+=f[3]*A>>4}function t(f){return Math.max(0,Math.min(255,f))}function d(f,l){const x=f[0]-l[0],A=f[1]-l[1],y=f[2]-l[2],C=f[3]-l[3];return x*x+A*A+y*y+C*C}function s(f,l,x,A,y,C,m){m==null&&(m=1);const E=A.length,c=[];for(var o=0;o<E;o++){const S=A[o];c.push([S>>>0&255,S>>>8&255,S>>>16&255,S>>>24&255])}for(o=0;o<E;o++){let S=4294967295;for(var M=0,U=0;U<E;U++){var R=d(c[o],c[U]);U!=o&&R<S&&(S=R,M=U)}}const N=new Uint32Array(y.buffer),H=new Int16Array(l*x*4),O=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(o=0;o<O.length;o++)O[o]=255*((O[o]+.5)/16-.5);for(let S=0;S<x;S++)for(let Q=0;Q<l;Q++){var z;o=4*(S*l+Q),m!=2?z=[t(f[o]+H[o]),t(f[o+1]+H[o+1]),t(f[o+2]+H[o+2]),t(f[o+3]+H[o+3])]:(R=O[4*(3&S)+(3&Q)],z=[t(f[o]+R),t(f[o+1]+R),t(f[o+2]+R),t(f[o+3]+R)]),M=0;let Y=16777215;for(U=0;U<E;U++){const K=d(z,c[U]);K<Y&&(Y=K,M=U)}const Z=c[M],q=[z[0]-Z[0],z[1]-Z[1],z[2]-Z[2],z[3]-Z[3]];m==1&&(Q!=l-1&&e(q,H,o+4,7),S!=x-1&&(Q!=0&&e(q,H,o+4*l-4,3),e(q,H,o+4*l,5),Q!=l-1&&e(q,H,o+4*l+4,1))),C[o>>2]=M,N[o>>2]=A[M]}}function b(f,l,x,A,y){y==null&&(y={});const{crc:C}=u,m=k.writeUint,E=k.writeUshort,c=k.writeASCII;let o=8;const M=f.frames.length>1;let U,R=!1,N=33+(M?20:0);if(y.sRGB!=null&&(N+=13),y.pHYs!=null&&(N+=21),y.iCCP!=null&&(U=pako.deflate(y.iCCP),N+=21+U.length+4),f.ctype==3){for(var H=f.plte.length,O=0;O<H;O++)f.plte[O]>>>24!=255&&(R=!0);N+=8+3*H+4+(R?8+1*H+4:0)}for(var z=0;z<f.frames.length;z++)M&&(N+=38),N+=(Z=f.frames[z]).cimg.length+12,z!=0&&(N+=4);N+=12;const S=new Uint8Array(N),Q=[137,80,78,71,13,10,26,10];for(O=0;O<8;O++)S[O]=Q[O];if(m(S,o,13),o+=4,c(S,o,"IHDR"),o+=4,m(S,o,l),o+=4,m(S,o,x),o+=4,S[o]=f.depth,o++,S[o]=f.ctype,o++,S[o]=0,o++,S[o]=0,o++,S[o]=0,o++,m(S,o,C(S,o-17,17)),o+=4,y.sRGB!=null&&(m(S,o,1),o+=4,c(S,o,"sRGB"),o+=4,S[o]=y.sRGB,o++,m(S,o,C(S,o-5,5)),o+=4),y.iCCP!=null){const q=13+U.length;m(S,o,q),o+=4,c(S,o,"iCCP"),o+=4,c(S,o,"ICC profile"),o+=11,o+=2,S.set(U,o),o+=U.length,m(S,o,C(S,o-(q+4),q+4)),o+=4}if(y.pHYs!=null&&(m(S,o,9),o+=4,c(S,o,"pHYs"),o+=4,m(S,o,y.pHYs[0]),o+=4,m(S,o,y.pHYs[1]),o+=4,S[o]=y.pHYs[2],o++,m(S,o,C(S,o-13,13)),o+=4),M&&(m(S,o,8),o+=4,c(S,o,"acTL"),o+=4,m(S,o,f.frames.length),o+=4,m(S,o,y.loop!=null?y.loop:0),o+=4,m(S,o,C(S,o-12,12)),o+=4),f.ctype==3){for(m(S,o,3*(H=f.plte.length)),o+=4,c(S,o,"PLTE"),o+=4,O=0;O<H;O++){const q=3*O,K=f.plte[O],ee=255&K,te=K>>>8&255,be=K>>>16&255;S[o+q+0]=ee,S[o+q+1]=te,S[o+q+2]=be}if(o+=3*H,m(S,o,C(S,o-3*H-4,3*H+4)),o+=4,R){for(m(S,o,H),o+=4,c(S,o,"tRNS"),o+=4,O=0;O<H;O++)S[o+O]=f.plte[O]>>>24&255;o+=H,m(S,o,C(S,o-H-4,H+4)),o+=4}}let Y=0;for(z=0;z<f.frames.length;z++){var Z=f.frames[z];M&&(m(S,o,26),o+=4,c(S,o,"fcTL"),o+=4,m(S,o,Y++),o+=4,m(S,o,Z.rect.width),o+=4,m(S,o,Z.rect.height),o+=4,m(S,o,Z.rect.x),o+=4,m(S,o,Z.rect.y),o+=4,E(S,o,A[z]),o+=2,E(S,o,1e3),o+=2,S[o]=Z.dispose,o++,S[o]=Z.blend,o++,m(S,o,C(S,o-30,30)),o+=4);const q=Z.cimg;m(S,o,(H=q.length)+(z==0?0:4)),o+=4;const K=o;c(S,o,z==0?"IDAT":"fdAT"),o+=4,z!=0&&(m(S,o,Y++),o+=4),S.set(q,o),o+=H,m(S,o,C(S,K,o-K)),o+=4}return m(S,o,0),o+=4,c(S,o,"IEND"),o+=4,m(S,o,C(S,o-4,4)),o+=4,S.buffer}function w(f,l,x){for(let A=0;A<f.frames.length;A++){const y=f.frames[A];y.rect.width;const C=y.rect.height,m=new Uint8Array(C*y.bpl+C);y.cimg=a(y.img,C,y.bpp,y.bpl,m,l,x)}}function r(f,l,x,A,y){const C=y[0],m=y[1],E=y[2],c=y[3],o=y[4],M=y[5];let U=6,R=8,N=255;for(var H=0;H<f.length;H++){const G=new Uint8Array(f[H]);for(var O=G.length,z=0;z<O;z+=4)N&=G[z+3]}const S=N!=255,Q=function(W,X,ie,oe,ne,ue){const re=[];for(var J=0;J<W.length;J++){const fe=new Uint8Array(W[J]),ge=new Uint32Array(fe.buffer);var he;let pe=0,ve=0,xe=X,Ie=ie,Ve=oe?1:0;if(J!=0){const Pt=ue||oe||J==1||re[J-2].dispose!=0?1:2;let Ze=0,ct=1e9;for(let Le=0;Le<Pt;Le++){var Ae=new Uint8Array(W[J-1-Le]);const _t=new Uint32Array(W[J-1-Le]);let Ce=X,je=ie,ke=-1,$e=-1;for(let Fe=0;Fe<ie;Fe++)for(let Se=0;Se<X;Se++)ge[se=Fe*X+Se]!=_t[se]&&(Se<Ce&&(Ce=Se),Se>ke&&(ke=Se),Fe<je&&(je=Fe),Fe>$e&&($e=Fe));ke==-1&&(Ce=je=ke=$e=0),ne&&((1&Ce)==1&&Ce--,(1&je)==1&&je--);const dt=(ke-Ce+1)*($e-je+1);dt<ct&&(ct=dt,Ze=Le,pe=Ce,ve=je,xe=ke-Ce+1,Ie=$e-je+1)}Ae=new Uint8Array(W[J-1-Ze]),Ze==1&&(re[J-1].dispose=2),he=new Uint8Array(xe*Ie*4),p(Ae,X,ie,he,xe,Ie,-pe,-ve,0),Ve=p(fe,X,ie,he,xe,Ie,-pe,-ve,3)?1:0,Ve==1?n(fe,X,ie,he,{x:pe,y:ve,width:xe,height:Ie}):p(fe,X,ie,he,xe,Ie,-pe,-ve,0)}else he=fe.slice(0);re.push({rect:{x:pe,y:ve,width:xe,height:Ie},img:he,blend:Ve,dispose:0})}if(oe)for(J=0;J<re.length;J++){if((Ee=re[J]).blend==1)continue;const fe=Ee.rect,ge=re[J-1].rect,pe=Math.min(fe.x,ge.x),ve=Math.min(fe.y,ge.y),xe={x:pe,y:ve,width:Math.max(fe.x+fe.width,ge.x+ge.width)-pe,height:Math.max(fe.y+fe.height,ge.y+ge.height)-ve};re[J-1].dispose=1,J-1!=0&&i(W,X,ie,re,J-1,xe,ne),i(W,X,ie,re,J,xe,ne)}let ze=0;if(W.length!=1)for(var se=0;se<re.length;se++){var Ee;ze+=(Ee=re[se]).rect.width*Ee.rect.height}return re}(f,l,x,C,m,E),Y={},Z=[],q=[];if(A!=0){const G=[];for(z=0;z<Q.length;z++)G.push(Q[z].img.buffer);const W=function(ne){let ue=0;for(var re=0;re<ne.length;re++)ue+=ne[re].byteLength;const J=new Uint8Array(ue);let he=0;for(re=0;re<ne.length;re++){const Ae=new Uint8Array(ne[re]),ze=Ae.length;for(let se=0;se<ze;se+=4){let Ee=Ae[se],fe=Ae[se+1],ge=Ae[se+2];const pe=Ae[se+3];pe==0&&(Ee=fe=ge=0),J[he+se]=Ee,J[he+se+1]=fe,J[he+se+2]=ge,J[he+se+3]=pe}he+=ze}return J.buffer}(G),X=j(W,A);for(z=0;z<X.plte.length;z++)Z.push(X.plte[z].est.rgba);let ie=0;for(z=0;z<Q.length;z++){const oe=(ee=Q[z]).img.length;var K=new Uint8Array(X.inds.buffer,ie>>2,oe>>2);q.push(K);const ne=new Uint8Array(X.abuf,ie,oe);M&&s(ee.img,ee.rect.width,ee.rect.height,Z,ne,K),ee.img.set(ne),ie+=oe}}else for(H=0;H<Q.length;H++){var ee=Q[H];const G=new Uint32Array(ee.img.buffer);var te=ee.rect.width;for(O=G.length,K=new Uint8Array(O),q.push(K),z=0;z<O;z++){const W=G[z];if(z!=0&&W==G[z-1])K[z]=K[z-1];else if(z>te&&W==G[z-te])K[z]=K[z-te];else{let X=Y[W];if(X==null&&(Y[W]=X=Z.length,Z.push(W),Z.length>=300))break;K[z]=X}}}const be=Z.length;for(be<=256&&o==0&&(R=be<=2?1:be<=4?2:be<=16?4:8,R=Math.max(R,c)),H=0;H<Q.length;H++){(ee=Q[H]).rect.x,ee.rect.y,te=ee.rect.width;const G=ee.rect.height;let W=ee.img;new Uint32Array(W.buffer);let X=4*te,ie=4;if(be<=256&&o==0){X=Math.ceil(R*te/8);var de=new Uint8Array(X*G);const oe=q[H];for(let ne=0;ne<G;ne++){z=ne*X;const ue=ne*te;if(R==8)for(var B=0;B<te;B++)de[z+B]=oe[ue+B];else if(R==4)for(B=0;B<te;B++)de[z+(B>>1)]|=oe[ue+B]<<4-4*(1&B);else if(R==2)for(B=0;B<te;B++)de[z+(B>>2)]|=oe[ue+B]<<6-2*(3&B);else if(R==1)for(B=0;B<te;B++)de[z+(B>>3)]|=oe[ue+B]<<7-1*(7&B)}W=de,U=3,ie=1}else if(S==0&&Q.length==1){de=new Uint8Array(te*G*3);const oe=te*G;for(z=0;z<oe;z++){const ne=3*z,ue=4*z;de[ne]=W[ue],de[ne+1]=W[ue+1],de[ne+2]=W[ue+2]}W=de,U=2,ie=3,X=3*te}ee.img=W,ee.bpl=X,ee.bpp=ie}return{ctype:U,depth:R,plte:Z,frames:Q}}function i(f,l,x,A,y,C,m){const E=Uint8Array,c=Uint32Array,o=new E(f[y-1]),M=new c(f[y-1]),U=y+1<f.length?new E(f[y+1]):null,R=new E(f[y]),N=new c(R.buffer);let H=l,O=x,z=-1,S=-1;for(let Y=0;Y<C.height;Y++)for(let Z=0;Z<C.width;Z++){const q=C.x+Z,K=C.y+Y,ee=K*l+q,te=N[ee];te==0||A[y-1].dispose==0&&M[ee]==te&&(U==null||U[4*ee+3]!=0)||(q<H&&(H=q),q>z&&(z=q),K<O&&(O=K),K>S&&(S=K))}z==-1&&(H=O=z=S=0),m&&((1&H)==1&&H--,(1&O)==1&&O--),C={x:H,y:O,width:z-H+1,height:S-O+1};const Q=A[y];Q.rect=C,Q.blend=1,Q.img=new Uint8Array(C.width*C.height*4),A[y-1].dispose==0?(p(o,l,x,Q.img,C.width,C.height,-C.x,-C.y,0),n(R,l,x,Q.img,C)):p(R,l,x,Q.img,C.width,C.height,-C.x,-C.y,0)}function n(f,l,x,A,y){p(f,l,x,A,y.width,y.height,-y.x,-y.y,2)}function a(f,l,x,A,y,C,m){const E=[];let c,o=[0,1,2,3,4];C!=-1?o=[C]:(l*A>5e5||x==1)&&(o=[0]),m&&(c={level:0});const M=Xt;for(var U=0;U<o.length;U++){for(let H=0;H<l;H++)h(y,f,H,A,x,o[U]);E.push(M.deflate(y,c))}let R,N=1e9;for(U=0;U<E.length;U++)E[U].length<N&&(R=U,N=E[U].length);return E[R]}function h(f,l,x,A,y,C){const m=x*A;let E=m+x;if(f[E]=C,E++,C==0)if(A<500)for(var c=0;c<A;c++)f[E+c]=l[m+c];else f.set(new Uint8Array(l.buffer,m,A),E);else if(C==1){for(c=0;c<y;c++)f[E+c]=l[m+c];for(c=y;c<A;c++)f[E+c]=l[m+c]-l[m+c-y]+256&255}else if(x==0){for(c=0;c<y;c++)f[E+c]=l[m+c];if(C==2)for(c=y;c<A;c++)f[E+c]=l[m+c];if(C==3)for(c=y;c<A;c++)f[E+c]=l[m+c]-(l[m+c-y]>>1)+256&255;if(C==4)for(c=y;c<A;c++)f[E+c]=l[m+c]-$(l[m+c-y],0,0)+256&255}else{if(C==2)for(c=0;c<A;c++)f[E+c]=l[m+c]+256-l[m+c-A]&255;if(C==3){for(c=0;c<y;c++)f[E+c]=l[m+c]+256-(l[m+c-A]>>1)&255;for(c=y;c<A;c++)f[E+c]=l[m+c]+256-(l[m+c-A]+l[m+c-y]>>1)&255}if(C==4){for(c=0;c<y;c++)f[E+c]=l[m+c]+256-$(0,l[m+c-A],0)&255;for(c=y;c<A;c++)f[E+c]=l[m+c]+256-$(l[m+c-y],l[m+c-A],l[m+c-y-A])&255}}}function j(f,l){const x=new Uint8Array(f),A=x.slice(0),y=new Uint32Array(A.buffer),C=F(A,l),m=C[0],E=C[1],c=x.length,o=new Uint8Array(c>>2);let M;if(x.length<2e7)for(var U=0;U<c;U+=4)M=v(m,R=x[U]*(1/255),N=x[U+1]*(1/255),H=x[U+2]*(1/255),O=x[U+3]*(1/255)),o[U>>2]=M.ind,y[U>>2]=M.est.rgba;else for(U=0;U<c;U+=4){var R=x[U]*.00392156862745098,N=x[U+1]*(1/255),H=x[U+2]*(1/255),O=x[U+3]*(1/255);for(M=m;M.left;)M=L(M.est,R,N,H,O)<=0?M.left:M.right;o[U>>2]=M.ind,y[U>>2]=M.est.rgba}return{abuf:A.buffer,inds:o,plte:E}}function F(f,l,x){x==null&&(x=1e-4);const A=new Uint32Array(f.buffer),y={i0:0,i1:f.length,bst:null,est:null,tdst:0,left:null,right:null};y.bst=D(f,y.i0,y.i1),y.est=g(y.bst);const C=[y];for(;C.length<l;){let E=0,c=0;for(var m=0;m<C.length;m++)C[m].est.L>E&&(E=C[m].est.L,c=m);if(E<x)break;const o=C[c],M=_(f,A,o.i0,o.i1,o.est.e,o.est.eMq255);if(o.i0>=M||o.i1<=M){o.est.L=0;continue}const U={i0:o.i0,i1:M,bst:null,est:null,tdst:0,left:null,right:null};U.bst=D(f,U.i0,U.i1),U.est=g(U.bst);const R={i0:M,i1:o.i1,bst:null,est:null,tdst:0,left:null,right:null};for(R.bst={R:[],m:[],N:o.bst.N-U.bst.N},m=0;m<16;m++)R.bst.R[m]=o.bst.R[m]-U.bst.R[m];for(m=0;m<4;m++)R.bst.m[m]=o.bst.m[m]-U.bst.m[m];R.est=g(R.bst),o.left=U,o.right=R,C[c]=U,C.push(R)}for(C.sort((E,c)=>c.bst.N-E.bst.N),m=0;m<C.length;m++)C[m].ind=m;return[y,C]}function v(f,l,x,A,y){if(f.left==null)return f.tdst=function(U,R,N,H,O){const z=R-U[0],S=N-U[1],Q=H-U[2],Y=O-U[3];return z*z+S*S+Q*Q+Y*Y}(f.est.q,l,x,A,y),f;const C=L(f.est,l,x,A,y);let m=f.left,E=f.right;C>0&&(m=f.right,E=f.left);const c=v(m,l,x,A,y);if(c.tdst<=C*C)return c;const o=v(E,l,x,A,y);return o.tdst<c.tdst?o:c}function L(f,l,x,A,y){const{e:C}=f;return C[0]*l+C[1]*x+C[2]*A+C[3]*y-f.eMq}function _(f,l,x,A,y,C){for(A-=4;x<A;){for(;I(f,x,y)<=C;)x+=4;for(;I(f,A,y)>C;)A-=4;if(x>=A)break;const m=l[x>>2];l[x>>2]=l[A>>2],l[A>>2]=m,x+=4,A-=4}for(;I(f,x,y)>C;)x-=4;return x+4}function I(f,l,x){return f[l]*x[0]+f[l+1]*x[1]+f[l+2]*x[2]+f[l+3]*x[3]}function D(f,l,x){const A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=[0,0,0,0],C=x-l>>2;for(let m=l;m<x;m+=4){const E=f[m]*.00392156862745098,c=f[m+1]*(1/255),o=f[m+2]*(1/255),M=f[m+3]*(1/255);y[0]+=E,y[1]+=c,y[2]+=o,y[3]+=M,A[0]+=E*E,A[1]+=E*c,A[2]+=E*o,A[3]+=E*M,A[5]+=c*c,A[6]+=c*o,A[7]+=c*M,A[10]+=o*o,A[11]+=o*M,A[15]+=M*M}return A[4]=A[1],A[8]=A[2],A[9]=A[6],A[12]=A[3],A[13]=A[7],A[14]=A[11],{R:A,m:y,N:C}}function g(f){const{R:l}=f,{m:x}=f,{N:A}=f,y=x[0],C=x[1],m=x[2],E=x[3],c=A==0?0:1/A,o=[l[0]-y*y*c,l[1]-y*C*c,l[2]-y*m*c,l[3]-y*E*c,l[4]-C*y*c,l[5]-C*C*c,l[6]-C*m*c,l[7]-C*E*c,l[8]-m*y*c,l[9]-m*C*c,l[10]-m*m*c,l[11]-m*E*c,l[12]-E*y*c,l[13]-E*C*c,l[14]-E*m*c,l[15]-E*E*c],M=o,U=P;let R=[Math.random(),Math.random(),Math.random(),Math.random()],N=0,H=0;if(A!=0)for(let z=0;z<16&&(R=U.multVec(M,R),H=Math.sqrt(U.dot(R,R)),R=U.sml(1/H,R),!(z!=0&&Math.abs(H-N)<1e-9));z++)N=H;const O=[y*c,C*c,m*c,E*c];return{Cov:o,q:O,e:R,L:N,eMq255:U.dot(U.sml(255,O),R),eMq:U.dot(R,O),rgba:(Math.round(255*O[3])<<24|Math.round(255*O[2])<<16|Math.round(255*O[1])<<8|Math.round(255*O[0])<<0)>>>0}}var P={multVec:(f,l)=>[f[0]*l[0]+f[1]*l[1]+f[2]*l[2]+f[3]*l[3],f[4]*l[0]+f[5]*l[1]+f[6]*l[2]+f[7]*l[3],f[8]*l[0]+f[9]*l[1]+f[10]*l[2]+f[11]*l[3],f[12]*l[0]+f[13]*l[1]+f[14]*l[2]+f[15]*l[3]],dot:(f,l)=>f[0]*l[0]+f[1]*l[1]+f[2]*l[2]+f[3]*l[3],sml:(f,l)=>[f*l[0],f*l[1],f*l[2],f*l[3]]};me.encode=function(l,x,A,y,C,m,E){y==null&&(y=0),E==null&&(E=!1);const c=r(l,x,A,y,[!1,!1,!1,0,E,!1]);return w(c,-1),b(c,x,A,C,m)},me.encodeLL=function(l,x,A,y,C,m,E,c){const o={ctype:0+(y==1?0:2)+(C==0?0:4),depth:m,frames:[]},M=(y+C)*m,U=M*x;for(let R=0;R<l.length;R++)o.frames.push({rect:{x:0,y:0,width:x,height:A},img:new Uint8Array(l[R]),blend:0,dispose:1,bpp:Math.ceil(M/8),bpl:Math.ceil(U/8)});return w(o,0,!0),b(o,x,A,E,c)},me.encode.compress=r,me.encode.dither=s,me.quantize=j,me.quantize.getKDtree=F,me.quantize.getNearest=v})();const vt={toArrayBuffer(p,k){const $=p.width,u=p.height,e=$<<2,t=p.getContext("2d").getImageData(0,0,$,u),d=new Uint32Array(t.data.buffer),s=(32*$+31)/32<<2,b=s*u,w=122+b,r=new ArrayBuffer(w),i=new DataView(r),n=1<<20;let a,h,j,F,v=n,L=0,_=0,I=0;function D(f){i.setUint16(_,f,!0),_+=2}function g(f){i.setUint32(_,f,!0),_+=4}function P(f){_+=f}D(19778),g(w),P(4),g(122),g(108),g($),g(-u>>>0),D(1),D(32),g(3),g(b),g(2835),g(2835),P(8),g(16711680),g(65280),g(255),g(4278190080),g(1466527264),function f(){for(;L<u&&v>0;){for(F=122+L*s,a=0;a<e;)v--,h=d[I++],j=h>>>24,i.setUint32(F+a,h<<8|j),a+=4;L++}I<d.length?(v=n,setTimeout(f,vt._dly)):k(r)}()},toBlob(p,k){this.toArrayBuffer(p,$=>{k(new Blob([$],{type:"image/bmp"}))})},_dly:9};var ce={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Yt={[ce.CHROME]:16384,[ce.FIREFOX]:11180,[ce.DESKTOP_SAFARI]:16384,[ce.IE]:8192,[ce.IOS]:4096,[ce.ETC]:8192};const st=typeof window<"u",wt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Qe=st&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Jt=(st||wt)&&(Qe&&Qe.getOriginalSymbol(window,"File")||typeof File<"u"&&File),At=(st||wt)&&(Qe&&Qe.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function lt(p,k,$=Date.now()){return new Promise(u=>{const e=p.split(","),t=e[0].match(/:(.*?);/)[1],d=globalThis.atob(e[1]);let s=d.length;const b=new Uint8Array(s);for(;s--;)b[s]=d.charCodeAt(s);const w=new Blob([b],{type:t});w.name=k,w.lastModified=$,u(w)})}function Ct(p){return new Promise((k,$)=>{const u=new At;u.onload=()=>k(u.result),u.onerror=e=>$(e),u.readAsDataURL(p)})}function jt(p){return new Promise((k,$)=>{const u=new Image;u.onload=()=>k(u),u.onerror=e=>$(e),u.src=p})}function _e(){if(_e.cachedResult!==void 0)return _e.cachedResult;let p=ce.ETC;const{userAgent:k}=navigator;return/Chrom(e|ium)/i.test(k)?p=ce.CHROME:/iP(ad|od|hone)/i.test(k)&&/WebKit/i.test(k)?p=ce.IOS:/Safari/i.test(k)?p=ce.DESKTOP_SAFARI:/Firefox/i.test(k)?p=ce.FIREFOX:(/MSIE/i.test(k)||document.documentMode)&&(p=ce.IE),_e.cachedResult=p,_e.cachedResult}function Ut(p,k){const $=_e(),u=Yt[$];let e=p,t=k,d=e*t;const s=e>t?t/e:e/t;for(;d>u*u;){const b=(u+e)/2,w=(u+t)/2;b<w?(t=w,e=w*s):(t=b*s,e=b),d=e*t}return{width:e,height:t}}function qe(p,k){let $,u;try{if($=new OffscreenCanvas(p,k),u=$.getContext("2d"),u===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{$=document.createElement("canvas"),u=$.getContext("2d")}return $.width=p,$.height=k,[$,u]}function Et(p,k){const{width:$,height:u}=Ut(p.width,p.height),[e,t]=qe($,u);return k&&/jpe?g/.test(k)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(p,0,0,e.width,e.height),e}function Oe(){return Oe.cachedResult!==void 0||(Oe.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Oe.cachedResult}function We(p,k={}){return new Promise(function($,u){let e,t;var d=function(){try{return t=Et(e,k.fileType||p.type),$([e,t])}catch(b){return u(b)}},s=function(b){try{var w=function(r){try{throw r}catch(i){return u(i)}};try{let r;return Ct(p).then(function(i){try{return r=i,jt(r).then(function(n){try{return e=n,function(){try{return d()}catch(a){return u(a)}}()}catch(a){return w(a)}},w)}catch(n){return w(n)}},w)}catch(r){w(r)}}catch(r){return u(r)}};try{if(Oe()||[ce.DESKTOP_SAFARI,ce.MOBILE_SAFARI].includes(_e()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(p).then(function(b){try{return e=b,d()}catch{return s()}},s)}catch{s()}})}function Ge(p,k,$,u,e=1){return new Promise(function(t,d){let s;if(k==="image/png"){let w,r,i;return w=p.getContext("2d"),{data:r}=w.getImageData(0,0,p.width,p.height),i=me.encode([r.buffer],p.width,p.height,4096*e),s=new Blob([i],{type:k}),s.name=$,s.lastModified=u,b.call(this)}{let w=function(){return b.call(this)};if(k==="image/bmp")return new Promise(r=>vt.toBlob(p,r)).then((function(r){try{return s=r,s.name=$,s.lastModified=u,w.call(this)}catch(i){return d(i)}}).bind(this),d);{let r=function(){return w.call(this)};if(typeof OffscreenCanvas=="function"&&p instanceof OffscreenCanvas)return p.convertToBlob({type:k,quality:e}).then((function(i){try{return s=i,s.name=$,s.lastModified=u,r.call(this)}catch(n){return d(n)}}).bind(this),d);{let i;return i=p.toDataURL(k,e),lt(i,$,u).then((function(n){try{return s=n,r.call(this)}catch(a){return d(a)}}).bind(this),d)}}}function b(){return t(s)}})}function ye(p){p.width=0,p.height=0}function De(){return new Promise(function(p,k){let $,u,e,t;return De.cachedResult!==void 0?p(De.cachedResult):lt("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(d){try{return $=d,We($).then(function(s){try{return u=s[1],Ge(u,$.type,$.name,$.lastModified).then(function(b){try{return e=b,ye(u),We(e).then(function(w){try{return t=w[0],De.cachedResult=t.width===1&&t.height===2,p(De.cachedResult)}catch(r){return k(r)}},k)}catch(w){return k(w)}},k)}catch(b){return k(b)}},k)}catch(s){return k(s)}},k)})}function It(p){return new Promise((k,$)=>{const u=new At;u.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return k(-2);const d=t.byteLength;let s=2;for(;s<d;){if(t.getUint16(s+2,!1)<=8)return k(-1);const b=t.getUint16(s,!1);if(s+=2,b==65505){if(t.getUint32(s+=2,!1)!=1165519206)return k(-1);const w=t.getUint16(s+=6,!1)==18761;s+=t.getUint32(s+4,w);const r=t.getUint16(s,w);s+=2;for(let i=0;i<r;i++)if(t.getUint16(s+12*i,w)==274)return k(t.getUint16(s+12*i+8,w))}else{if((65280&b)!=65280)break;s+=t.getUint16(s,!1)}}return k(-1)},u.onerror=e=>$(e),u.readAsArrayBuffer(p)})}function Ft(p,k){const{width:$}=p,{height:u}=p,{maxWidthOrHeight:e}=k;let t,d=p;return isFinite(e)&&($>e||u>e)&&([d,t]=qe($,u),$>u?(d.width=e,d.height=u/$*e):(d.width=$/u*e,d.height=e),t.drawImage(p,0,0,d.width,d.height),ye(p)),d}function St(p,k){const{width:$}=p,{height:u}=p,[e,t]=qe($,u);switch(k>4&&k<9?(e.width=u,e.height=$):(e.width=$,e.height=u),k){case 2:t.transform(-1,0,0,1,$,0);break;case 3:t.transform(-1,0,0,-1,$,u);break;case 4:t.transform(1,0,0,-1,0,u);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,u,0);break;case 7:t.transform(0,-1,-1,0,u,$);break;case 8:t.transform(0,-1,1,0,0,$)}return t.drawImage(p,0,0,$,u),ye(p),e}function bt(p,k,$=0){return new Promise(function(u,e){let t,d,s,b,w,r,i,n,a,h,j,F,v,L,_,I,D,g,P,f;function l(A=5){if(k.signal&&k.signal.aborted)throw k.signal.reason;t+=A,k.onProgress(Math.min(t,100))}function x(A){if(k.signal&&k.signal.aborted)throw k.signal.reason;t=Math.min(Math.max(A,t),100),k.onProgress(t)}return t=$,d=k.maxIteration||10,s=1024*k.maxSizeMB*1024,l(),We(p,k).then((function(A){try{return[,b]=A,l(),w=Ft(b,k),l(),new Promise(function(y,C){var m;if(!(m=k.exifOrientation))return It(p).then((function(c){try{return m=c,E.call(this)}catch(o){return C(o)}}).bind(this),C);function E(){return y(m)}return E.call(this)}).then((function(y){try{return r=y,l(),De().then((function(C){try{return i=C?w:St(w,r),l(),n=k.initialQuality||1,a=k.fileType||p.type,Ge(i,a,p.name,p.lastModified,n).then((function(m){try{{let c=function(){if(d--&&(_>s||_>v)){let M,U;return M=f?.95*P.width:P.width,U=f?.95*P.height:P.height,[D,g]=qe(M,U),g.drawImage(P,0,0,M,U),n*=a==="image/png"?.85:.95,Ge(D,a,p.name,p.lastModified,n).then(function(R){try{return I=R,ye(P),P=D,_=I.size,x(Math.min(99,Math.floor((L-_)/(L-s)*100))),c}catch(N){return e(N)}},e)}return[1]},o=function(){return ye(P),ye(D),ye(w),ye(i),ye(b),x(100),u(I)};if(h=m,l(),j=h.size>s,F=h.size>p.size,!j&&!F)return x(100),u(h);var E;return v=p.size,L=h.size,_=L,P=i,f=!k.alwaysKeepResolution&&j,(E=(function(M){for(;M;){if(M.then)return void M.then(E,e);try{if(M.pop){if(M.length)return M.pop()?o.call(this):M;M=c}else M=M.call(this)}catch(U){return e(U)}}}).bind(this))(c)}}catch(c){return e(c)}}).bind(this),e)}catch(m){return e(m)}}).bind(this),e)}catch(C){return e(C)}}).bind(this),e)}catch(y){return e(y)}}).bind(this),e)})}const en=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Xe;function tn(p,k){return new Promise(($,u)=>{Xe||(Xe=function(d){const s=[];return s.push(d),URL.createObjectURL(new Blob(s))}(en));const e=new Worker(Xe);e.addEventListener("message",function(d){if(k.signal&&k.signal.aborted)e.terminate();else if(d.data.progress===void 0){if(d.data.error)return u(new Error(d.data.error)),void e.terminate();$(d.data.file),e.terminate()}else k.onProgress(d.data.progress)}),e.addEventListener("error",u),k.signal&&k.signal.addEventListener("abort",()=>{u(k.signal.reason),e.terminate()}),e.postMessage({file:p,imageCompressionLibUrl:k.libURL,options:{...k,onProgress:void 0,signal:void 0}})})}function le(p,k){return new Promise(function($,u){let e,t,d,s,b,w;if(e={...k},d=0,{onProgress:s}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,b=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=a=>{d=a,typeof s=="function"&&s(d)},!(p instanceof Blob||p instanceof Jt))return u(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(p.type))return u(new Error("The file given is not an image"));if(w=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!b||typeof Worker!="function"||w)return bt(p,e).then((function(a){try{return t=a,n.call(this)}catch(h){return u(h)}}).bind(this),u);var r=(function(){try{return n.call(this)}catch(a){return u(a)}}).bind(this),i=function(a){try{return bt(p,e).then(function(h){try{return t=h,r()}catch(j){return u(j)}},u)}catch(h){return u(h)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",tn(p,e).then(function(a){try{return t=a,r()}catch{return i()}},i)}catch{i()}function n(){try{t.name=p.name,t.lastModified=p.lastModified}catch{}try{e.preserveExif&&p.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===p.type)&&(t=yt(p,t))}catch{}return $(t)}})}le.getDataUrlFromFile=Ct,le.getFilefromDataUrl=lt,le.loadImage=jt,le.drawImageInCanvas=Et,le.drawFileInCanvas=We,le.canvasToFile=Ge,le.getExifOrientation=It,le.handleMaxWidthOrHeight=Ft,le.followExifOrientation=St,le.cleanupCanvasMemory=ye,le.isAutoOrientationInBrowser=De,le.approximateBelowMaximumCanvasSizeOfBrowser=Ut,le.copyExifWithoutOrientation=yt,le.getBrowserName=_e,le.version="2.0.2";const Ye=p=>((p==null?void 0:p.message)||"An error occurred").replace(/^firebase:\s*/i,"").replace(/\([^)]*\)/g,"").trim(),nn=V.div`
  min-height: 100vh;
  padding: 80px 20px 20px;
  background: ${p=>p.theme.background};
`,rn=V(we.div)`
  max-width: 800px;
  margin: 0 auto;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 30px;
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  border: 1px solid rgba(255, 255, 255, 0.18);
`,on=V.div`
  display: flex;
  align-items: center;
  gap: 30px;
  margin-bottom: 40px;
  position: relative;
  
  @media (max-width: 600px) {
    flex-direction: column;
    text-align: center;
    gap: 20px;
  }
`,an=V.div`
  position: relative;
  width: 120px;
  height: 120px;
`,sn=V.div`
  width: 120px;
  height: 120px;
  border-radius: 50%;
  background: ${p=>p.$imageUrl?`url(${p.$imageUrl}) no-repeat center/cover`:"linear-gradient(135deg, #6e8efb, #4a6cf7)"};
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.5rem;
  color: white;
  font-weight: 600;
`,ln=V.button`
  position: absolute;
  bottom: 0;
  right: 0;
  width: 35px;
  height: 35px;
  border-radius: 50%;
  background: ${p=>p.theme.text};
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: ${p=>p.disabled?"not-allowed":"pointer"};
  color: ${p=>p.theme.background};
  transition: all 0.3s ease;
  opacity: ${p=>p.disabled?.6:1};

  &:hover {
    transform: ${p=>p.disabled?"none":"scale(1.1)"};
  }
`,fn=V(we.div)`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
`,cn=V(we.div)`
  display: flex;
  align-items: center;
  justify-content: center;
`,dn=V.div`
  flex: 1;
`,un=V.h1`
  font-size: 2rem;
  color: ${p=>p.theme.text};
  margin-bottom: 10px;
`,hn=V.p`
  color: ${p=>p.theme.text}CC;
  font-size: 1.1rem;
`,ft=V.div`
  margin-top: 30px;
  display: flex;
  flex-direction: column;
  gap: 20px;
`,Je=V.h2`
  font-size: 1.2rem;
  color: ${p=>p.theme.text};
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
`,xt=V.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
`,He=V(we.div)`
  background: rgba(255, 255, 255, 0.05);
  padding: 20px;
  border-radius: 15px;
  border: 1px solid rgba(255, 255, 255, 0.1);

  h3 {
    color: ${p=>p.theme.text}99;
    font-size: 0.9rem;
    margin-bottom: 8px;
  }

  p {
    color: ${p=>p.theme.text};
    font-size: 1.1rem;
  }
`;V.div`
  display: flex;
  justify-content: flex-end;
  margin-top: 20px;

  @media (max-width: 600px) {
    margin-top: 30px;
  }
`;const et=V(we.div)`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  backdrop-filter: blur(5px);
`,tt=V(we.div)`
  background: rgba(20, 20, 25, 0.95);
  padding: 30px;
  border-radius: 15px;
  width: 90%;
  max-width: 400px;
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  border: 1px solid rgba(255, 255, 255, 0.1);

  & > * {
    width: 100%;
    max-width: 340px;
    margin-left: auto;
    margin-right: auto;
  }
`,nt=V.h2`
  color: #fff;
  margin-bottom: 20px;
  font-size: 1.5rem;
`,Ue=V.p`
  color: ${p=>p.$success?"#28a745":"rgba(255, 255, 255, 0.8)"};
  margin-bottom: 20px;
  line-height: 1.5;
`,rt=V.input`
  width: 100%;
  padding: 12px 16px;
  margin: 15px auto;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.05);
  color: white;
  font-size: 1rem;
  display: block;

  &:focus {
    outline: none;
    border-color: #dc3545;
    box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.2);
  }

  &::placeholder {
    color: rgba(255, 255, 255, 0.4);
  }
`,it=V.div`
  display: flex;
  gap: 10px;
  margin: 20px auto 0;
  width: 100%;
`,Me=V.div`
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
`,Te=V(we.div)`
  display: flex;
  align-items: center;
  justify-content: center;
`,Re=V.button`
  padding: 8px 16px;
  border: none;
  border-radius: 8px;
  cursor: ${p=>p.$isLoading?"not-allowed":"pointer"};
  font-weight: 500;
  background: ${p=>p.variant==="danger"?"#dc3545":"rgba(255, 255, 255, 0.1)"};
  color: ${p=>p.variant==="danger"?"white":p.theme.text};
  opacity: ${p=>p.$isLoading?.7:1};
  flex: 1;

  &:hover {
    opacity: ${p=>p.$isLoading?.7:.9};
  }
`,pn=V(ft)`
  margin-top: 40px;
`,ot=V(we.div)`
  background: rgba(255, 255, 255, 0.05);
  padding: 20px;
  border-radius: 15px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 20px;

  @media (max-width: 600px) {
    flex-direction: column;
    align-items: stretch;
    text-align: center;
  }
`,Be=V.div`
  flex: 1;

  h3 {
    color: ${p=>p.theme.text};
    font-size: 1.1rem;
    margin-bottom: 8px;
  }

  p {
    color: ${p=>p.theme.text}99;
    font-size: 0.9rem;
  }
`,at=V(we.button)`
  padding: 8px 16px;
  border: none;
  border-radius: 8px;
  cursor: ${p=>p.$isLoading?"not-allowed":"pointer"};
  font-weight: 500;
  background: ${p=>p.theme.text};
  color: ${p=>p.theme.background};
  opacity: ${p=>p.$isLoading?.7:1};
  
  @media (max-width: 600px) {
    width: 100%;
  }
`,gn=V(at)`
  background: #dc3545;
  color: white;

  &:hover {
    background: #c82333;
  }
`,mn=V(ft)`
  margin-top: 40px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  padding-top: 40px;
`,bn=V(ot)`
  background: rgba(220, 53, 69, 0.1);
  border-color: rgba(220, 53, 69, 0.2);

  ${Be} {
    h3 {
      color: #dc3545;
    }
    p {
      color: rgba(220, 53, 69, 0.8);
    }
  }
`,Cn=()=>{var ee,te,be,de;const{currentUser:p,isAdmin:k}=kt(),$=Mt();ae.useState(!1);const{profileImage:u,setProfileImage:e}=Tt(),t=ae.useRef(null),[d,s]=ae.useState(!1),[b,w]=ae.useState(!1),[r,i]=ae.useState(""),[n,a]=ae.useState(""),[h,j]=ae.useState(!1),[F,v]=ae.useState(!1),[L,_]=ae.useState(!1),[I,D]=ae.useState(""),[g,P]=ae.useState(""),[f,l]=ae.useState(""),[x,A]=ae.useState(""),[y,C]=ae.useState(!1),[m,E]=ae.useState(!1),[c,o]=ae.useState("");ae.useState(!1);const[M,U]=ae.useState(!1),R=B=>B.split("@")[0].split(".").map(G=>G[0]).join("").toUpperCase().slice(0,2),N=()=>{const B=new Date().getTime(),G=Math.random().toString(36).substring(2,15);return`profile_${B}_${G}.jpg`},H=B=>["image/jpeg","image/png","image/gif","image/webp"].includes(B.type)?!0:(alert("Please upload an image file (JPEG, PNG, GIF, WEBP)"),!1),O=async B=>{const G={maxSizeMB:1,maxWidthOrHeight:1024,useWebWorker:!0,fileType:"image/jpeg"};try{return await le(B,G)}catch(W){throw console.error("Error compressing image:",W),W}},z=async B=>{try{const G=decodeURIComponent(B.split("/o/")[1].split("?")[0]),W=pt(gt,G);await Ot(W)}catch(G){console.error("Error deleting old profile photo:",G)}},S=async B=>{try{if(!H(B))return;s(!0);const G=await O(B),W=N(),X=pt(gt,`profileImages/${p==null?void 0:p.uid}/${W}`);u&&await z(u);const ie=await Bt(X,G),oe=await Nt(ie.ref);p!=null&&p.uid&&await Qt(ut(ht,"users",p.uid),{profilePhoto:oe}),e(oe)}catch(G){console.error("Error uploading image:",G),alert("Failed to upload image. Please try again.")}finally{s(!1)}},Q=B=>{var W;const G=(W=B.target.files)==null?void 0:W[0];G&&S(G)},Y=()=>{var B;(B=t.current)==null||B.click()},Z=async()=>{if(r!==(p==null?void 0:p.email)){a("Email does not match");return}try{j(!0),a(""),u&&await z(u),p!=null&&p.uid&&await Rt(ut(ht,"users",p.uid)),await Dt(p),$("/")}catch(B){console.error("Error deleting account:",B),B.code==="auth/requires-recent-login"?a("Please log out and log in again to delete your account"):a(Ye(B))}finally{j(!1)}},q=async()=>{try{if(l(""),o(""),C(!0),!p)return;const B=Lt.credential(p.email,I);await $t(p,B),await zt(p,g),o("Password updated successfully!"),D(""),P(""),setTimeout(()=>{v(!1),o("")},2e3)}catch(B){console.error("Error changing password:",B),l(Ye(B))}finally{C(!1)}},K=async()=>{try{if(A(""),E(!0),!p)return;await Ht(p,{url:`${window.location.origin}/verify-email?redirect=profile`,handleCodeInApp:!0}),U(!0),o("Verification email sent! Please check your inbox."),setTimeout(()=>{_(!1),o(""),U(!1)},3e3)}catch(B){console.error("Error setting up email verification:",B),A(Ye(B))}finally{E(!1)}};return T.jsxs(nn,{children:[T.jsx("input",{type:"file",ref:t,onChange:Q,accept:"image/*",style:{display:"none"}}),T.jsxs(rn,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[T.jsxs(on,{children:[T.jsxs(an,{children:[T.jsx(sn,{$imageUrl:u,children:!u&&(p==null?void 0:p.email)&&R(p.email)}),d&&T.jsx(fn,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:T.jsx(cn,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:T.jsx(Pe,{size:24})})}),T.jsx(ln,{onClick:Y,disabled:d,children:T.jsx(Wt,{size:16})})]}),T.jsxs(dn,{children:[T.jsx(un,{children:(ee=p==null?void 0:p.email)==null?void 0:ee.split("@")[0]}),T.jsx(hn,{children:p==null?void 0:p.email})]})]}),T.jsxs(ft,{children:[T.jsxs(Je,{children:[T.jsx(Gt,{size:20}),"Personal Information"]}),T.jsxs(xt,{children:[T.jsxs(He,{whileHover:{y:-5},transition:{type:"spring",stiffness:300},children:[T.jsx("h3",{children:"Username"}),T.jsx("p",{children:(te=p==null?void 0:p.email)==null?void 0:te.split("@")[0]})]}),T.jsxs(He,{whileHover:{y:-5},transition:{type:"spring",stiffness:300},children:[T.jsx("h3",{children:"Email"}),T.jsx("p",{children:p==null?void 0:p.email})]}),T.jsxs(He,{whileHover:{y:-5},transition:{type:"spring",stiffness:300},children:[T.jsx("h3",{children:"Account Created"}),T.jsx("p",{children:(be=p==null?void 0:p.metadata.creationTime)==null?void 0:be.split("GMT")[0]})]}),T.jsxs(He,{whileHover:{y:-5},transition:{type:"spring",stiffness:300},children:[T.jsx("h3",{children:"Last Sign In"}),T.jsx("p",{children:(de=p==null?void 0:p.metadata.lastSignInTime)==null?void 0:de.split("GMT")[0]})]})]})]}),T.jsxs(pn,{children:[T.jsxs(Je,{children:[T.jsx(qt,{size:20}),"Security Settings"]}),T.jsxs(xt,{children:[T.jsxs(ot,{children:[T.jsxs(Be,{children:[T.jsx("h3",{children:"Change Password"}),T.jsx("p",{children:"Update your account password"})]}),T.jsx(at,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>v(!0),$isLoading:y,children:T.jsxs(Me,{children:[y&&T.jsx(Te,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:T.jsx(Pe,{size:16})}),y?"Updating...":"Update Password"]})})]}),T.jsxs(ot,{children:[T.jsxs(Be,{children:[T.jsx("h3",{children:"Two-Factor Authentication"}),T.jsx("p",{children:"Add an extra layer of security to your account"})]}),T.jsx(at,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>_(!0),$isLoading:m,children:T.jsxs(Me,{children:[m&&T.jsx(Te,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:T.jsx(Pe,{size:16})}),m?"Verifying...":"Verify Code"]})})]})]})]}),!k&&T.jsxs(mn,{children:[T.jsxs(Je,{style:{color:"#dc3545"},children:[T.jsx(mt,{size:20}),"Danger Zone"]}),T.jsxs(bn,{children:[T.jsxs(Be,{children:[T.jsx("h3",{children:"Delete Account"}),T.jsx("p",{children:"Permanently remove your account and all associated data"})]}),T.jsx(gn,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>w(!0),$isLoading:h,children:T.jsxs(Me,{children:[h&&T.jsx(Te,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:T.jsx(Pe,{size:16})}),T.jsx(mt,{size:16}),"Delete Account"]})})]})]})]}),T.jsx(Ke,{children:b&&T.jsx(et,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>w(!1),children:T.jsxs(tt,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:B=>B.stopPropagation(),children:[T.jsx(nt,{children:"Delete Account"}),T.jsx(Ue,{children:"This action is permanent and cannot be undone. All your data will be permanently deleted. Please type your email address to confirm:"}),T.jsx(rt,{type:"email",value:r,onChange:B=>i(B.target.value),placeholder:(p==null?void 0:p.email)||"",disabled:h}),n&&T.jsx(Ue,{style:{color:"#dc3545",marginTop:0},children:n}),T.jsxs(it,{children:[T.jsx(Re,{variant:"cancel",onClick:()=>{w(!1),i(""),a("")},disabled:h,children:"Cancel"}),T.jsx(Re,{variant:"danger",onClick:Z,disabled:h,$isLoading:h,children:T.jsxs(Me,{children:[h&&T.jsx(Te,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:T.jsx(Pe,{size:16})}),h?"Deleting...":"Delete Account"]})})]})]})})}),T.jsx(Ke,{children:F&&T.jsx(et,{children:T.jsxs(tt,{children:[T.jsx(nt,{children:"Change Password"}),c&&T.jsx(Ue,{$success:!0,children:c}),T.jsx(rt,{type:"password",placeholder:"Current Password",value:I,onChange:B=>D(B.target.value)}),T.jsx(rt,{type:"password",placeholder:"New Password",value:g,onChange:B=>P(B.target.value)}),f&&T.jsx(Ue,{style:{color:"#dc3545"},children:f}),T.jsxs(it,{children:[T.jsx(Re,{variant:"cancel",onClick:()=>v(!1),$isLoading:y,children:"Cancel"}),T.jsx(Re,{variant:"danger",onClick:q,$isLoading:y,children:T.jsxs(Me,{children:[y&&T.jsx(Te,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:T.jsx(Pe,{size:16})}),y?"Updating...":"Update Password"]})})]})]})})}),T.jsx(Ke,{children:L&&T.jsx(et,{children:T.jsxs(tt,{children:[T.jsx(nt,{children:"Setup Email Authentication"}),c&&T.jsx(Ue,{$success:!0,children:c}),M?T.jsx(Ue,{children:"Verification email has been sent. Please check your inbox and click the link to complete the setup."}):T.jsxs(T.Fragment,{children:[T.jsx(Ue,{children:"We'll send a verification email to your registered email address. Click the link in the email to complete the setup."}),T.jsxs(it,{children:[T.jsx(Re,{variant:"cancel",onClick:()=>_(!1),$isLoading:m,children:"Cancel"}),T.jsx(Re,{variant:"danger",onClick:K,$isLoading:m,children:T.jsxs(Me,{children:[m&&T.jsx(Te,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:T.jsx(Pe,{size:16})}),m?"Sending...":"Send Verification Email"]})})]})]}),x&&T.jsx(Ue,{style:{color:"#dc3545"},children:x})]})})})]})};export{Cn as default};
